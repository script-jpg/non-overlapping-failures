-- 由加法的平均和几何平均不等式得
  -- $a^2 / b + b \geq 2a$
  have _a {a b : ℝ} (h : 0 < a) : a ^ 2 / b + b ≥ 2 * a := by
    calc
      _ = a ^ 2 / b + b * (b / b) := by rw [div_self]; positivity
      _ = a ^ 2 / b + b ^ 2 / b := by rw [mul_div_cancel_right₀]; positivity
      _ = (a - b) ^ 2 / b + 2 * a := by ring_nf
      _ ≥ 0 + 2 * a := by
        apply add_le_add
        positivity
        apply div_nonneg <;> apply pow_two_nonneg
      _ = _ := by ring

  -- $b^2 / c + c \geq 2b$
  have _b {b c : ℝ} (h : 0 < b) : b ^ 2 / c + c ≥ 2 * b := by
    calc
      _ = b ^ 2 / c + c * (c / c) := by rw [div_self]; positivity
      _ = b ^ 2 / c + c ^ 2 / c := by rw [mul_div_cancel_right₀]; positivity
      _ = (b - c) ^ 2 / c + 2 * b := by ring_nf
      _ ≥ 0 + 2 * b := by
        apply add_le_add
        positivity
        apply div_nonneg <;> apply pow_two_nonneg
      _ = _ := by ring

  -- $c^2 / d + d \geq 2c$
  have _c {c d : ℝ} (h : 0 < c) : c ^ 2 / d + d ≥ 2 * c := by
    calc
      _ = c ^ 2 / d + d * (d / d) := by rw [div_self]; positivity
      _ = c ^ 2 / d + d ^ 2 / d := by rw [mul_div_cancel_right₀]; positivity
      _ = (c - d) ^ 2 / d + 2 * c := by ring_nf
      _ ≥ 0 + 2 * c := by
        apply add_le_add
        positivity
        apply div_nonneg <;> apply pow_two_nonneg
      _ = _ := by ring

  -- $d^2 / a + a \geq 2d$
  have _d {d a : ℝ} (h : 0 < d) : d ^ 2 / a + a ≥ 2 * d := by
    calc
      _ = d ^ 2 / a + a * (a / a) := by rw [div_self]; positivity
      _ = d ^ 2 / a + a ^ 2 / a := by rw [mul_div_cancel_right₀]; positivity
      _ = (d - a) ^ 2 / a + 2 * d := by ring_nf
      _ ≥ 0 + 2 * d := by
        apply add_le_add
        positivity
        apply div_nonneg <;> apply pow_two_nonneg
      _ = _ := by ring

  have _← : a ^ 2 / b + b + (b ^ 2 / c + c) + (c ^ 2 / d + d) + (d ^ 2 / a + a) ≥ 2 * a + 2 * b + 2 * c + 2 * d := by linarith
  linarith
```