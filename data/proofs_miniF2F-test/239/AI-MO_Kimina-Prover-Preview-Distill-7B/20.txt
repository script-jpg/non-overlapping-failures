-- First, calculate the values of $\sin t$ and $\cos t$ for later use.
  have g₀ : (Real.sin t)^2 + (Real.cos t)^2 = 1 := Real.sin_sq_add_cos_sq t

  -- Calculate $\sin t$.
  have g₁ : Real.sin t = 1 / 2 ∨ Real.sin t = - 3 / 2 := by
    have g₁ : (Real.sin t + 1 / 2)^2 + (Real.cos t + 1 / 2)^2 = 2 := by
      nlinarith
    have g₂ : (Real.sin t + 1 / 2)^2 ≤ 2 := by nlinarith
    have g₃ : (Real.cos t + 1 / 2)^2 ≤ 2 := by nlinarith
    have g₄ : (Real.sin t + 1 / 2)^2 ≥ 0 := by nlinarith
    have g₅ : (Real.cos t + 1 / 2)^2 ≥ 0 := by nlinarith
    have g₆ : (Real.sin t + 1 / 2)^2 = 0 ∨ (Real.cos t + 1 / 2)^2 = 0 := by
      nlinarith [sq_nonneg (Real.sin t + 1 / 2), sq_nonneg (Real.cos t + 1 / 2),
        Real.sin_sq_add_cos_sq t]
    rcases g₆ with g₆ | g₆
   .   have g₇ : Real.sin t = - 1 / 2 := by nlinarith
      have g₈ : (Real.cos t + 1 / 2)^2 = 2 := by nlinarith
      have g₉ : Real.cos t + 1 / 2 = 0 ∨ Real.cos t + 1 / 2 = 0 := by
        nlinarith [sq_nonneg (Real.cos t + 1 / 2), sq_nonneg (Real.sin t + 1 / 2),
          Real.sin_sq_add_cos_sq t]
      simp at g₉
      rcases g₉ with g₉ | g₉
     .   have g₁₀ : Real.cos t = - 1 / 2 := by nlinarith
        have g₁₁ : (1 + Real.sin t) * (1 + Real.cos t) = 1 / 4 := by
          nlinarith
        nlinarith
     .   have g₁₀ : Real.cos t = - 1 / 2 := by nlinarith
        have g₁₁ : (1 - Real.sin t) * (1 - Real.cos t) = 5 / 4 := by
          nlinarith
        nlinarith
   .   have g₇ : Real.cos t = - 1 / 2 := by nlinarith
      have g₈ : (Real.sin t + 1 / 2)^2 = 2 := by nlinarith
      have g₉ : Real.sin t + 1 / 2 = 0 ∨ Real.sin t + 1 / 2 = 0 := by
        nlinarith [sq_nonneg (Real.sin t + 1 / 2), sq_nonneg (Real.cos t + 1 / 2),
          Real.sin_sq_add_cos_sq t]
      simp at g₉
      rcases g₉ with g₉ | g₉
     .   have g₁₀ : Real.sin t = - 1 / 2 := by nlinarith
        have g₁₁ : (1 + Real.sin t) * (1 + Real.cos t) = 1 / 4 := by
          nlinarith
        nlinarith
     .   have g₁₀ : Real.sin t = - 1 / 2 := by nlinarith
        have g₁₁ : (1 - Real.sin t) * (1 - Real.cos t) = 5 / 4 := by
          nlinarith
        nlinarith

  -- Calculate $\cos t$.
  have g₂ : Real.cos t = 1 / 2 ∨ Real.cos t = - 3 / 2 := by
    have g₂ : (Real.sin t + 1 / 2)^2 + (Real.cos t + 1 / 2)^2 = 2 := by
      nlinarith
    have g₃ : (Real.sin t + 1 / 2)^2 ≤ 2 := by nlinarith
    have g₄ : (Real.cos t + 1 / 2)^2 ≤ 2 := by nlinarith
    have g₅ : (Real.sin t + 1 / 2)^2 ≥ 0 := by nlinarith
    have g₆ : (Real.cos t + 1 / 2)^2 ≥ 0 := by nlinarith
    have g₇ : (Real.sin t + 1 / 2)^2 = 0 ∨ (Real.cos t + 1 / 2)^2 = 0 := by
      nlinarith [sq_nonneg (Real.sin t + 1 / 2), sq_nonneg (Real.cos t + 1 / 2),
        Real.sin_sq_add_cos_sq t]
    rcases g₇ with g₇ | g₇
   .   have g₈ : Real.sin t = - 1 / 2 := by nlinarith
      have g₉ : (Real.cos t + 1 / 2)^2 = 2 := by nlinarith
      have g₁₀ : Real.cos t + 1 / 2 = 0 ∨ Real.cos t + 1 / 2 = 0 := by
        nlinarith [sq_nonneg (Real.cos t + 1 / 2), sq_nonneg (Real.sin t + 1 / 2),
          Real.sin_sq_add_cos_sq t]
      simp at g₁₀
      rcases g₁₀ with g₁₀ | g₁₀
     .   have g₁₁ : Real.cos t = - 1 / 2 := by nlinarith
        have g₁₂ : (1 + Real.sin t) * (1 + Real.cos t) = 1 / 4 := by
          nlinarith
        nlinarith
     .   have g₁₁ : Real.cos t = - 1 / 2 := by nlinarith
        have g₁₂ : (1 - Real.sin t) * (1 - Real.cos t) = 5 / 4 := by
          nlinarith
        nlinarith
   .   have g₈ : Real.cos t = - 1 / 2 := by nlinarith
      have g₉ : (Real.sin t + 1 / 2)^2 = 2 := by nlinarith
      have g₁₀ : Real.sin t + 1 / 2 = 0 ∨ Real.sin t + 1 / 2 = 0 := by
        nlinarith [sq_nonneg (Real.sin t + 1 / 2), sq_nonneg (Real.cos t + 1 / 2),
          Real.sin_sq_add_cos_sq t]
      simp at g₁₀
      rcases g₁₀ with g₁₀ | g₁₀
     .   have g₁₁ : Real.sin t = - 1 / 2 := by nlinarith
        have g₁₂ : (1 + Real.sin t) * (1 + Real.cos t) = 1 / 4 := by
          nlinarith
        nlinarith
     .   have g₁₁ : Real.sin t = - 1 / 2 := by nlinarith
        have g₁₂ : (1 - Real.sin t) * (1 - Real.cos t) = 5 / 4 := by
          nlinarith
        nlinarith

  -- Prove that $\sin t = 1 / 2$ and $\cos t = 1 / 2$.
  have g₃ : Real.sin t = 1 / 2 ∧ Real.cos t = 1 / 2 := by
    have g₃ : Real.sin t = 1 / 2 ∨ Real.sin t = - 3 / 2 := by
      exact g₁
    have g₄ : Real.cos t = 1 / 2 ∨ Real.cos t = - 3 / 2 := by
      exact g₂
    rcases g₃ with g₃ | g₃
   .   rcases g₄ with g₄ | g₄
     .   exact ⟨g₃, g₄⟩
     .   have g₅ : (1 - Real.sin t) * (1 - Real.cos t) = 5 / 4 := by
          nlinarith
        nlinarith
   .   rcases g₄ with g₄ | g₄
     .   have g₅ : (1 + Real.sin t) * (1 + Real.cos t) = 5 / 4 := by
          nlinarith
        nlinarith
     .   exact ⟨g₃, g₄⟩

  -- Prove that $k = 2$.
  have g₄ : Real.sin t = 1 / 2 ∧ Real.cos t = 1 / 2 := by
    exact g₃

  have g₅ : Real.sin t ^ 2 + Real.cos t ^ 2 = 1 := by
    exact g₀

  have g₆ : (Real.sin t - 1 / 2) ^ 2 + (Real.cos t - 1 / 2) ^ 2 = 0 := by
    rw [g₃.1, g₃.2]
    norm_num

  have g₇ : (Real.sin t - 1 / 2) ^ 2 = 0 := by
    nlinarith

  have g₈ : (Real.cos t - 1 / 2) ^ 2 = 0 := by
    nlinarith

  have g₉ : Real.sin t - 1 / 2 = 0 := by
    nlinarith

  have g₁₀ : Real.cos t - 1 / 2 = 0 := by
    nlinarith

  have g₁₁ : Real.sin t = 1 / 2 := by
    linarith

  have g₁₂ : Real.cos t = 1 / 2 := by
    linarith

  have g₁₃ : (1 - Real.sin t) * (1 - Real.cos t) = 1 / 4 := by
    nlinarith

  have g₁₄ : m / n - Real.sqrt k = 1 / 4 := by
    linarith

  have g₁₅ : Real.sqrt k = m / n - 1 / 4 := by
    linarith

  have g₁₆ : m / n > 1 / 4 := by
    have g₁₆ : Real.sqrt k > 0 := by
      apply Real.sqrt_pos_of_pos
      nlinarith
    linarith

  have g₁₇ : m > 0 := by
    have g₁₇ : (m : ℝ) > 0 := by
      apply Nat.cast_pos.mpr
      nlinarith
    exact Nat.cast_pos.mp g₁₇

  have g₁₈ : n > 0 := by
    have g₁₈ : (n : ℝ) > 0 := by
      apply Nat.cast_pos.mpr
      nlinarith
    exact Nat.cast_pos.mp g₁₈

  have g₁₉ : (m : ℝ) / n > 0 := by
    apply div_pos
    exact Nat.cast_pos.mpr g₁₇
    exact Nat.cast_pos.mpr g₁₈

  have g₂₀ : m / n < 1 := by
    apply Nat.cast_lt_of_lt_cast
    exact g₁₂
    exact g₁₄

  have g₂₁ : m < n := by
    apply Nat.cast_lt_of_lt_cast
    exact g₂₀
    exact g₁₈

  have g₂₂ : k = 2 := by
    have g₂₂ : (Real.sqrt k) ^ 2 = (m / n - 1 / 4) ^ 2 := by
      rw [g₁₅]
    have g₂₃ : (Real.sqrt k) ^ 2 = k := by
      apply Real.sq_sqrt
      nlinarith
    rw [g₂₃] at g₂₂
    ring_nf at g₂₂
    have g₂₄ : 1 / 4 * (m * m) = 1 / 4 * n * n := by
      nlinarith
    apply Nat.mul_right_cancel g₂₄
    nlinarith

  -- Prove that $m = 1$ and $n = 2$.
  have g₂₃ : m = 1 := by
    clear g₂₂
    have g₂₃ : m * m = 1 * 1 := by
      nlinarith
    apply Nat.mul_right_cancel g₂₃
    nlinarith

  have g₂₄ : n = 2 := by
    clear g₂₂
    have g₂₄ : n * n = 2 * 2 := by
      nlinarith
    apply Nat.mul_right_cancel g₂₄
    nlinarith

  -- Show that $k + m + n = 27$.
  linarith

```