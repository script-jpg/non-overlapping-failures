-- define the function
  let f (n : ℕ) : ℝ := 2 - 1 / n

  -- check the monotonicity of the function
  have hf : StrictAntiOn f (Set.Ioi 0) := by
    intro n hn m hm hnm
    simp [f]
    rw [div_lt_div_iff₀ (by norm_num) (by norm_num)]
    simp
    have : m < n := by
      let n' := (n : ℝ)
      let m' := (m : ℝ)
      calc
        m' < n' := by simpa
        _ < n := by exact hn
    linarith

  -- check the limit at +infinity
  have h_aux1 : filterlim f atTop = 2 := by
    rw [filterlim_atTop_eq_1]
    simp [f]

  -- check the limit at + infinity of the function $g(n) = (f(n) - 2) * n$
  have h_aux2 : filterlim ((fun n : ℕ => (f n - 2) * n) : ℕ → ℝ) atTop = -1 := by
    rw [filterlim_atTop_eq_neg_one_iff]
    simp [f]
    intro ε hε
    use ⌈1 / ε⌉.natAbs
    intro n hn
    simp
    have : 1 / (n : ℝ) ≤ 1 / ⌈1 / ε⌉.natAbs := by
      apply one_div_le_one_div_of_le
      norm_num
      simp
      rw [Int.le_natAbs]
      calc
        (1 / ε : ℝ) ≤ 1 / 0 := by
          apply one_div_le_one_div_of_le
          norm_num
          apply hn
        _ ≤ (1 / ε : ℝ) := by simp
    have : (n : ℝ) ≥ 1 / ε := by
      calc
        (n : ℝ) ≥ 1 / (n : ℝ) := by apply one_div_le_of_le; simp; linarith
        _ ≥ 1 / (n : ℝ) := by simp
    calc
      -1 ≤ -ε := by linarith
      _ = - (ε : ℝ) := by simp
      _ ≤ (1 / (n : ℝ) - 2) * ↑n := by
        apply mul_le_mul
        simp
        apply sub_nonpos.mpr
        simp
        have : (2 : ℝ) ≤ (n : ℝ) * n := by
          apply mul_le_mul
          simp
          calc
            (n : ℝ) = (1 / (n : ℝ) : ℝ) * (n : ℝ) * n := by field_simp
            _ ≤ (1 / ⌈1 / ε⌉.natAbs : ℝ) * (n : ℝ) * n := by
              apply mul_le_mul_of_nonneg_right
              apply one_div_le_one_div_of_le
              norm_num
              simp
              rw [Int.le_natAbs]
              calc
                (1 / ε : ℝ) ≤ 1 / 0 := by
                  apply one_div_le_one_div_of_le
                  norm_num
                  apply hn
                _ ≤ (1 / ε : ℝ) := by simp
            _ = (1 / ⌈1 / ε⌉.natAbs : ℝ) * (↑n * ↑n) := by field_simp
            _ ≤ (↑(⌈1 / ε⌉.natAbs) : ℝ) * ↑n := by
              apply mul_le_mul_of_nonneg_right
              apply one_div_le_of_le
              norm_num
              simp
              rw [Int.le_natAbs]
              calc
                (1 / ε : ℝ) ≤ 1 / 0 := by
                  apply one_div_le_one_div_of_le
                  norm_num
                  apply hn
                _ ≤ (1 / ε : ℝ) := by simp
            _ ≤ n * n := by simp
        linarith
      _ = (1 / (n : ℝ) - 2) * ↑n := by simp

  -- check the value of the function at $n = 1, 2, 3$
  have h1 : f 1 = 1 := by simp [f]
  have h2 : f 2 = 3 / 2 := by simp [f]
  have h3 : f 3 = 2 - 1 / 3 := by simp [f]

  -- check the inequality $f(n) < 2 - 1 / n$ for $n \geq 4$
  have h4 : ∀ n, n ≥ 4 → f n < 2 - 1 / n := by
    intro n hn
    induction' n with n ih
    · norm_num at hn
    · rw [show n + 1 = n.succ by omega, show n + 1 - 1 = n by omega, show (2 : ℝ) - 1 / (n + 1) = 2 * n / (n + 1) by field_simp; ring]
      change 2 * ↑n / (↑n + 1) < 2 - 1 / ↑n
      have : 2 * ↑n / (↑n + 1) < 2 * ↑n / ↑n := by
        apply div_lt_div_of_pos_left
        linarith
        linarith
        apply one_div_lt_one_div_of_lt
        simp
        simp
        omega
      have : 2 * ↑n / ↑n = 2 := by
        field_simp
        omega
      linarith

  by_cases h : n < 4
  · interval_cases n
    -- check the inequality for $n = 0$
    · norm_num at h
      linarith
    -- check the inequality for $n = 1$
    · exact h4 1 (by norm_num)
    -- check the inequality for $n = 2$
    · rw [h2]
      norm_num
    -- check the inequality for $n = 3$
    · rw [h3]
      norm_num
  · -- check the inequality for $n \geq 4$
    exact h4 n h
```