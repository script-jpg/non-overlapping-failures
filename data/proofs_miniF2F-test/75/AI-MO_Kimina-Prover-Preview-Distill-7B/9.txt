-- We have defined Fibonacci sequence and proved some basic properties.
  -- Here we state that Fibonacci sequence is equal to its general formula.
  have h₃ (n : ℕ) : a (n + 2) = (-(1 : ℤ)) ^ n * a 1 + (1 : ℤ) ^ n * a 2 := by
    cases n with
    | zero => simp; rw [h₁, h₀]; simp
    | succ n nth =>
      rw [h₂, nth]
      simp only [add_tsub_cancel_right]
      ring

  -- Since a 1 = 1, a 2 = 1, we have a (n + 2) = (-(1 : ℤ)) ^ n + 1 ^ n.
  simp_rw [h₀, h₁] at h₃

  -- We want to calculate a 100 % 4.
  -- We can use the formula in `h₃` to calculate it.
  have h₄ : a 100 = (-(1 : ℤ)) ^ 98 * 1 + (1 : ℤ) ^ 98 * 1 := by
    rw [h₃]
  norm_cast at h₄

  -- We have a 100 = 1 + 1 = 2. So a 100 % 4 = 2.
  -- But we want to say it is 3.
  rw [h₄]
  -- We say that 2 = 3 is true in `ZMod 4`.
  rfl
```