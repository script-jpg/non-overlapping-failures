-- We want to find the remainder when the 100th Fibonacci number is divided by 4.
  -- Let's first understand what we're trying to compute: a(100) % 4 = 3

  -- Looking at the problem, we notice that computing the 100th Fibonacci number directly would be computationally intensive.
  -- So we need a more efficient approach.
  -- That's where modular arithmetic properties come in!

  -- Let's think about how to approach this...
  -- One key insight is that Fibonacci numbers have a periodicity property modulo m (Pisano period).
  -- For modulus 4, the Pisano period is 6.
  -- That means a(n) % 4 = a(n + 6) % 4
  -- So we could reduce 100 modulo 6 to simplify our work.
  -- 100 = 6 * 16 + 4, so a(100) % 4 = a(4) % 4 = 3

  -- Let's start by importing the necessary libraries and setting up our theorem statement:

  import Mathlib
  import Aesop

  set_option maxHeartbeats 0

  open BigOperators Real Nat Topology Rat

  /- The Fibonacci sequence is the sequence 1, 1, 2, 3, 5, $\ldots$ where each term is the sum of the previous two terms. What is the remainder when the $100^{\mathrm{th}}$ term of the sequence is divided by 4? Show that it is 3.-/

  theorem mathd_numbertheory_483 (a : ℕ → ℕ) (h₀ : a 1 = 1) (h₁ : a 2 = 1)
      (h₂ : ∀ n, a (n + 2) = a (n + 1) + a n) : a 100 % 4 = 3 := by

    -- Now, we could try to compute a(100) directly using the recurrence relation, but this would be impractical.
    -- Instead, we'll use the fact that Fibonacci numbers have a periodicity property modulo 4.
    -- For any Fibonacci number a(n), we have a(n) % 4 = a(n + 6) % 4 (Pisano period modulo 4 is 6).
    -- So we can reduce 100 modulo 6: 100 = 6 * 16 + 4, so a(100) % 4 = a(4) % 4 = 3

    -- Let's compute a(4) using our recurrence relation:
    -- a(4) = a(3) + a(2)
    -- a(3) = a(2) + a(1) = 1 + 1 = 2
    -- a(4) = 2 + 1 = 3
    -- Therefore, a(4) % 4 = 3

    -- Let's formalize this in Lean:

    have h₃ : a 3 = a 2 + a 1 := h₂ 1
    rw [h₀, h₁] at h₃
    norm_num at h₃

    have h₄ : a 4 = a 3 + a 2 := h₂ 2
    rw [h₃, h₁] at h₄
    norm_num at h₄

    have h₅ : a 5 = a 4 + a 3 := h₂ 3
    rw [h₄, h₃] at h₅
    norm_num at h₅

    have h₆ : a 6 = a 5 + a 4 := h₂ 4
    rw [h₅, h₄] at h₆
    norm_num at h₆

    have h₇ : a 7 = a 6 + a 5 := h₂ 5
    rw [h₆, h₅] at h₇
    norm_num at h₇

    have h₈ : a 8 = a 7 + a 6 := h₂ 6
    rw [h₇, h₆] at h₈
    norm_num at h₈

    have h₉ : a 9 = a 8 + a 7 := h₂ 7
    rw [h₈, h₇] at h₉
    norm_num at h₉

    have h₁₀ : a 10 = a 9 + a 8 := h₂ 8
    rw [h₉, h₈] at h₁₀
    norm_num at h₁₀

    have h₁₁ : a 11 = a 10 + a 9 := h₂ 9
    rw [h₁₀, h₉] at h₁₁
    norm_num at h₁₁

    have h₁₂ : a 12 = a 11 + a 10 := h₂ 10
    rw [h₁₁, h₁₀] at h₁₂
    norm_num at h₁₂

    have h₁₃ : a 13 = a 12 + a 11 := h₂ 11
    rw [h₁₂, h₁₁] at h₁₃
    norm_num at h₁₃

    have h₁₄ : a 14 = a 13 + a 12 := h₂ 12
    rw [h₁₃, h₁₂] at h₁₄
    norm_num at h₁₄

    have h₁₅ : a 15 = a 14 + a 13 := h₂ 13
    rw [h₁₄, h₁₃] at h₁₅
    norm_num at h₁₅

    have h₁₆ : a 16 = a 15 + a 14 := h₂ 14
    rw [h₁₅, h₁₄] at h₁₆
    norm_num at h₁₆

    have h₁₇ : a 17 = a 16 + a 15 := h₂ 15
    rw [h₁₆, h₁₅] at h₁₇
    norm_num at h₁₇

    have h₁₈ : a 18 = a 17 + a 16 := h₂ 16
    rw [h₁₇, h₁₆] at h₁₈
    norm_num at h₁₈

    have h₁₉ : a 19 = a 18 + a 17 := h₂ 17
    rw [h₁₈, h₁₇] at h₁₉
    norm_num at h₁₉

    have h₂₀ : a 20 = a 19 + a 18 := h₂ 18
    rw [h₁₉, h₁₈] at h₂₀
    norm_num at h₂₀

    have h₂₁ : a 21 = a 20 + a 19 := h₂ 19
    rw [h₂₀, h₁₉] at h₂₁
    norm_num at h₂₁

    have h₂₂ : a 22 = a 21 + a 20 := h₂ 20
    rw [h₂₁, h₂₀] at h₂₂
    norm_num at h₂₂

    have h₂₃ : a 23 = a 22 + a 21 := h₂ 21
    rw [h₂₂, h₂₁] at h₂₃
    norm_num at h₂₃

    have h₂₄ : a 24 = a 23 + a 22 := h₂ 22
    rw [h₂₃, h₂₂] at h₂₄
    norm_num at h₂₄

    have h₂₅ : a 25 = a 24 + a 23 := h₂ 23
    rw [h₂₄, h₂₃] at h₂₅
    norm_num at h₂₅

    have h₂₆ : a 26 = a 25 + a 24 := h₂ 24
    rw [h₂₅, h₂₄] at h₂₆
    norm_num at h₂₆

    have h₂₇ : a 27 = a 26 + a 25 := h₂ 25
    rw [h₂₆, h₂₅] at h₂₇
    norm_num at h₂₇

    have h₂₈ : a 28 = a 27 + a 26 := h₂ 26
    rw [h₂₇, h₂₆] at h₂₈
    norm_num at h₂₈

    have h₂₉ : a 29 = a 28 + a 27 := h₂ 27
    rw [h₂₈, h₂₇] at h₂₉
    norm_num at h₂₉

    have h₃₀ : a 30 = a 29 + a 28 := h₂ 28
    rw [h₂₉, h₂₈] at h₃₀
    norm_num at h₃₀

    have h₃₁ : a 31 = a 30 + a 29 := h₂ 29
    rw [h₃₀, h₂₉] at h₃₁
    norm_num at h₃₁

    have h₃₂ : a 32 = a 31 + a 30 := h₂ 30
    rw [h₃₁, h₃₀] at h₃₂
    norm_num at h₃₂

    have h₃₃ : a 33 = a 32 + a 31 := h₂ 31
    rw [h₃₂, h₃₁] at h₃₃
    norm_num at h₃₃

    have h₃₄ : a 34 = a 33 + a 32 := h₂ 32
    rw [h₃₃, h₃₂] at h₃₄
    norm_num at h₃₄

    have h₃₅ : a 35 = a 34 + a 33 := h₂ 33
    rw [h₃₄, h₃₃] at h₃₅
    norm_num at h₃₅

    have h₃₆ : a 36 = a 35 + a 34 := h₂ 34
    rw [h₃₅, h₃₄] at h₃₆
    norm_num at h₃₆

    have h₃₇ : a 37 = a 36 + a 35 := h₂ 35
    rw [h₃₆, h₃₅] at h₃₇
    norm_num at h₃₇

    have h₃₈ : a 38 = a 37 + a 36 := h₂ 36
    rw [h₃₇, h₃₆] at h₃₈
    norm_num at h₃₈

    have h₃₉ : a 39 = a 38 + a 37 := h₂ 37
    rw [h₃₈, h₃₇] at h₃₉
    norm_num at h₃₉

    have h₄₀ : a 40 = a 39 + a 38 := h₂ 38
    rw [h₃₉, h₃₈] at h₄₀
    norm_num at h₄₀

    have h₄₁ : a 41 = a 40 + a 39 := h₂ 39
    rw [h₄₀, h₃₉] at h₄₁
    norm_num at h₄₁

    have h₄₂ : a 42 = a 41 + a 40 := h₂ 40
    rw [h₄₁, h₄₀] at h₄₂
    norm_num at h₄₂

    have h₄₃ : a 43 = a 42 + a 41 := h₂ 41
    rw [h₄₂, h₄₁] at h₄₃
    norm_num at h₄₃

    have h₄₄ : a 44 = a 43 + a 42 := h₂ 42
    rw [h₄₃, h₄₂] at h₄₄
    norm_num at h₄₄

    have h₄₅ : a 45 = a 44 + a 43 := h₂ 43
    rw [h₄₄, h₄₃] at h₄₅
    norm_num at h₄₅

    have h₄₆ : a 46 = a 45 + a 44 := h₂ 44
    rw [h₄₅, h₄₄] at h₄₆
    norm_num at h₄₆

    have h₄₇ : a 47 = a 46 + a 45 := h₂ 45
    rw [h₄₆, h₄₅] at h₄₇
    norm_num at h₄₇

    have h₄₈ : a 48 = a 47 + a 46 := h₂ 46
    rw [h₄₇, h₄₆] at h₄₈
    norm_num at h₄₈

    have h₄₉ : a 49 = a 48 + a 47 := h₂ 47
    rw [h₄₈, h₄₇] at h₄₉
    norm_num at h₄₉

    have h₅₀ : a 50 = a 49 + a 48 := h₂ 48
    rw [h₄₉, h₄₈] at h₅₀
    norm_num at h₅₀

    have h₅₁ : a 51 = a 50 + a 49 := h₂ 49
    rw [h₅₀, h₄₉] at h₅₁
    norm_num at h₅₁

    have h₅₂ : a 52 = a 51 + a 50 := h₂ 50
    rw [h₅₁, h₅₀] at h₅₂
    norm_num at h₅₂

    have h₅₃ : a 53 = a 52 + a 51 := h₂ 51
    rw [h₅₂, h₅₁] at h₅₃
    norm_num at h₅₃

    have h₅₄ : a 54 = a 53 + a 52 := h₂ 52
    rw [h₅₃, h₅₂] at h₅₄
    norm_num at h₅₄

    have h₅₅ : a 55 = a 54 + a 53 := h₂ 53
    rw [h₅₄, h₅₃] at h₅₅
    norm_num at h₅₅

    have h₅₆ : a 56 = a 55 + a 54 := h₂ 54
    rw [h₅₅, h₅₄] at h₅₆
    norm_num at h₅₆

    have h₅₇ : a 57 = a 56 + a 55 := h₂ 55
    rw [h₅₆, h₅₅] at h₅₇
    norm_num at h₅₇

    have h₅₈ : a 58 = a 57 + a 56 := h₂ 56
    rw [h₅₇, h₅₆] at h₅₈
    norm_num at h₅₈

    have h₅₉ : a 59 = a 58 + a 57 := h₂ 57
    rw [h₅₈, h₅₇] at h₅₉
    norm_num at h₅₉

    have h₆₀ : a 60 = a 59 + a 58 := h₂ 58
    rw [h₅₉, h₅₈] at h₆₀
    norm_num at h₆₀

    have h₆₁ : a 61 = a 60 + a 59 := h₂ 59
    rw [h₆₀, h₅₉] at h₆₁
    norm_num at h₆₁

    have h₆₂ : a 62 = a 61 + a 60 := h₂ 60
    rw [h₆₁, h₆₀] at h₆₂
    norm_num at h₆₂

    have h₆₃ : a 63 = a 62 + a 61 := h₂ 61
    rw [h₆₂, h₆₁] at h₆₃
    norm_num at h₆₃

    have h₆₄ : a 64 = a