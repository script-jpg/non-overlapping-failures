-- some auxiliary statements

  -- it is enough to prove that m = n + t * pi
  suffices ∃ t : ℤ, m = n + t * Real.pi by
    obtain ⟨t, ht⟩ := this
    use (-t)
    linear_combination -ht

  -- some calculations about y
  have h₄ : ∀ x : ℝ, y x = ∑ i ∈ Finset.range k, Real.cos (a i + x) / 2 ^ i := by
    intro x
    exact h₁ x

  have h₅ : ∀ x : ℝ, y x = Real.cos (a 0 + x)  + ∑ i ∈ Finset.range k \ {0}, Real.cos (a i + x) / 2 ^ i := by
    intro x
    rw [h₄ x, Finset.sum_range_succ]
    simp

  have h₆ : ∀ x : ℝ, Real.cos (a 0 + x) ≠ 0 → y x ≠ 0 := by
    intro x ha
    rw [h₅ x, ha]
    conv =>
      arg 1; arg 1; simp only [Finset.mem_range, Finset.mem_singleton, true_or]
      rw [<-Finset.sum_insert]
    norm_num
    apply Finset.ne_zero_of_mem
    simp
    use 0
    rfl

  -- prove that cos (a_0 + m) = cos (a_0 + n) = 0
  have h₇ : Real.cos (a 0 + m) = 0 := by
    rw [h₅ m]
    rw [h₂] at h₃
    rw [h₅ n] at h₃
    apply_fun (fun x => x * 2 ^ k) at h₃
    simp at h₃
    rw [<-h₃]
    nlinarith

  have h₈ : Real.cos (a 0 + n) = 0 := by
    rw [h₅ n]
    rw [h₂] at h₃
    rw [h₅ m] at h₃
    apply_fun (fun x => x * 2 ^ k) at h₃
    simp at h₃
    rw [<-h₃]
    nlinarith

  -- prove that sin (a_0 + m) = (-1) * sin (a_0 + n)
  have h₉ : Real.sin (a 0 + m) = (-1) * Real.sin (a 0 + n) := by
    rw [h₅ m, h₅ n]
    conv =>
      arg 1; arg 1; simp only [Finset.mem_range, Finset.mem_singleton, true_or]
      rw [<-Finset.sum_insert]
    conv =>
      arg 1; arg 2; rw [h₂]
    simp
    rw [<-Finset.sum_insert]
    norm_num
    nlinarith

  -- prove that sin (a_0 + m) ^ 2 = sin (a_0 + n) ^ 2
  have h₁₀ : Real.sin (a 0 + m) ^ 2 = Real.sin (a 0 + n) ^ 2 := by
    rw [h₉]
    ring

  -- prove that sin (a_0 + m) ^ 2 = 1
  have h₁₁ : Real.sin (a 0 + m) ^ 2 = 1 := by
    have : Real.sin (a 0 + m) ^ 2 + Real.cos (a 0 + m) ^ 2 = 1 := Real.sin_sq_add_cos_sq (a 0 + m)
    rw [h₇] at this
    simp at this
    exact this

  -- prove that sin (a_0 + n) ^ 2 = 1
  have h₁₂ : Real.sin (a 0 + n) ^ 2 = 1 := by
    have : Real.sin (a 0 + n) ^ 2 + Real.cos (a 0 + n) ^ 2 = 1 := Real.sin_sq_add_cos_sq (a 0 + n)
    rw [h₈] at this
    simp at this
    exact this

  -- prove that sin (a_0 + m) = sin (a_0 + n) or sin (a_0 + m) = -sin (a_0 + n)
  have h₁₃ : Real.sin (a 0 + m) = Real.sin (a 0 + n) ∨ Real.sin (a 0 + m) = - Real.sin (a 0 + n) := by
    rw [sq_eq_sq_iff_eq_or_eq_neg]
    exact h₁₀

  -- consider two possible cases
  rcases h₁₃ with h₁₃ | h₁₃
  · -- if sin (a_0 + m) = sin (a_0 + n), then cos (a_0 + m) = - cos (a_0 + n)
    have h₁₄ : Real.cos (a 0 + m) = - Real.cos (a 0 + n) := by
      rw [h₇, h₈]
      norm_num
    -- prove that cos (a_0 + n) ≠ 0
    have h₁₅ : Real.cos (a 0 + n) ≠ 0 := by
      rw [h₈]
      by_contra ha
      simp [ha] at h₁₂
    -- prove that cos (a_0 + m) = 0
    have h₁₆ : Real.cos (a 0 + m) = 0 := by
      rw [h₁₄, h₁₅]
      norm_num
    -- we get a contradiction
    exfalso
    apply h₆
    exact h₁₃
  · -- if sin (a_0 + m) = - sin (a_0 + n), then cos (a_0 + m) = cos (a_0 + n)
    have h₁₇ : Real.cos (a 0 + m) = Real.cos (a 0 + n) := by
      rw [h₇, h₈]
      norm_num
    -- prove that cos (a_0 + n) ≠ 0
    have h₁₈ : Real.cos (a 0 + n) ≠ 0 := by
      rw [h₈]
      by_contra ha
      simp [ha] at h₁₂
    -- prove that cos (a_0 + m) = 0
    have h₁₉ : Real.cos (a 0 + m) = 0 := by
      rw [h₁₇, h₁₈]
      norm_num
    -- we get a contradiction
    exfalso
    apply h₆
    exact h₁₉

```