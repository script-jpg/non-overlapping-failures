-- We shall show that $a = \sqrt{2} + 1$. This holds because
  -- 1. $0 < a$, $\langle a^{-1} \rangle = \langle a^2 \rangle$ and $2 < a^2 < 3$
  -- 2. The function $f(x) = \langle x^{-1} \rangle - \langle x^2 \rangle$ is strictly antimonotone on the
  --    interval $(1, \sqrt{3})$ and therefore there are at most one root on this interval
  -- 3. $\sqrt{2} + 1$ is a root of $f(x) = 0$ on the interval $(1, \sqrt{3})$
  have h₄ : a = √2 + 1 := by

    -- $0 < a$, $\langle a^{-1} \rangle = \langle a^2 \rangle$ and $2 < a^2 < 3$
    have h₅ : 0 < a ^ 2 := by nlinarith
    have h₆ : 0 < a ^ 3 := by nlinarith
    have h₇ : 0 < a ^ 4 := by nlinarith
    have h₈ : 0 < a ^ 5 := by nlinarith
    have h₉ : 0 < a ^ 6 := by nlinarith
    have h₁₀ : 0 < a ^ 7 := by nlinarith
    have h₁₁ : 0 < a ^ 8 := by nlinarith
    have h₁₂ : 0 < a ^ 9 := by nlinarith
    have h₁₃ : 0 < a ^ 10 := by nlinarith
    have h₁₄ : 0 < a ^ 11 := by nlinarith
    have h₁₅ : 0 < a ^ 12 := by nlinarith
    have h₁₆ : 0 < a ^ 13 := by nlinarith

    -- $a > 1$
    have h₁₇ : 1 < a := by
      have : 1 < a ^ 2 := by linarith
      apply (one_lt_pow_iff (by norm_num)).mp at this
      rcases this with ⟨l, r⟩
      linarith

    -- $a < √3$
    have h₁₈ : a < √3 := by
      have : a ^ 2 < 3 := h₃
      apply (pow_lt_pow_iff_left₀ (by norm_num) (by norm_num) (by linarith)).mp at this
      rw [Real.sq_sqrt (by norm_num)] at this
      linarith

    -- $⌊a^2⌋ = 2$
    have h₁₉ : Int.floor (a ^ 2) = 2 := by
      suffices 2 < a ^ 2 ∧ a ^ 2 < 3 by
        simp [Int.floor_eq_iff]
        constructor <;> linarith
      constructor
      · linarith
      · exact h₃

    -- $⌊1/a⌋ = 0$
    have h₂₀ : Int.floor (1 / a) = 0 := by
      suffices 0 < 1 / a ∧ 1 / a < 1 by
        simp [Int.floor_eq_iff]
        constructor <;> linarith
      constructor
      · positivity
      · rw [div_lt_one (by positivity), one_lt_pow_iff (by norm_num)]
        linarith

    -- $1/a = a^2 - 2$
    have h₂₁ : 1 / a = a ^ 2 - 2 := by
      rw [Int.floor_eq_iff] at h₁ and h₂₀
      linarith

    -- $a^3 = 2a + 1$
    have h₂₂ : a ^ 3 = 2 * a + 1 := by
      suffices a * (1 / a) = a ^ 2 - 2 by
        field_simp at this
        linarith
      rw [h₁, h₂₀]
      simp

    -- $a^4 = 4a + 3$
    have h₂₃ : a ^ 4 = 4 * a + 3 := by
      calc
        _ = a ^ 2 * (2 * a + 1) := by rw [←h₂₂]; ring
        _ = _ := by nlinarith

    -- $a^5 = 8a + 5$
    have h₂₄ : a ^ 5 = 8 * a + 5 := by
      calc
        _ = a ^ 2 * (4 * a + 3) := by rw [←h₂₃]; ring
        _ = _ := by nlinarith

    -- $a^6 = 16a + 11$
    have h₂₅ : a ^ 6 = 16 * a + 11 := by
      calc
        _ = a ^ 2 * (8 * a + 5) := by rw [←h₂₄]; ring
        _ = _ := by nlinarith

    -- $a^7 = 32a + 21$
    have h₂₆ : a ^ 7 = 32 * a + 21 := by
      calc
        _ = a ^ 2 * (16 * a + 11) := by rw [←h₂₅]; ring
        _ = _ := by nlinarith

    -- $a^8 = 64a + 55$
    have h₂₇ : a ^ 8 = 64 * a + 55 := by
      calc
        _ = a ^ 2 * (32 * a + 21) := by rw [←h₂₆]; ring
        _ = _ := by nlinarith

    -- $a^9 = 128a + 109$
    have h₂₈ : a ^ 9 = 128 * a + 109 := by
      calc
        _ = a ^ 2 * (64 * a + 55) := by rw [←h₂₇]; ring
        _ = _ := by nlinarith

    -- $a^{10} = 256a + 213$
    have h₂₉ : a ^ 10 = 256 * a + 213 := by
      calc
        _ = a ^ 2 * (128 * a + 109) := by rw [←h₂₈]; ring
        _ = _ := by nlinarith

    -- $a^{11} = 512a + 421$
    have h₃₀ : a ^ 11 = 512 * a + 421 := by
      calc
        _ = a ^ 2 * (256 * a + 213) := by rw [←h₂₉]; ring
        _ = _ := by nlinarith

    -- $a^{12} = 1024a + 835$
    have h₃₁ : a ^ 12 = 1024 * a + 835 := by
      calc
        _ = a ^ 2 * (512 * a + 421) := by rw [←h₃₀]; ring
        _ = _ := by nlinarith

    -- Eliminating $a$ from $a^3 = 2a + 1$ and $a^4 = 4a + 3$
    -- we get $a^2 - 2a - 1 = 0$; that is, $(a - 1)^2 = 2$
    have h₃₂ : (a - 1) ^ 2 = 2 := by
      calc
        _ = a ^ 4 - 4 * a ^ 2 + 4 := by rw [←h₂₃, ←h₂₂]; ring
        _ = (a ^ 2 - 2) ^ 2 := by ring
        _ = _ := by nlinarith

    -- Since $1 < a < √3$, we have $a - 1 > 0$ and thus $a = 1 + √2$
    have h₃₃ : a - 1 = √2 := by
      have : 0 < a - 1 := by linarith
      rw [←h₃₂, Real.sq_sqrt (by norm_num)]
      field_simp
      linarith

    -- The result follows
    linarith

  -- We now show the result
  rw [h₄]
  have h₅ : (√2 + 1) ^ 12 = 1024 * √2 + 835 := by
    norm_num [pow_succ, pow_zero, mul_one, add_zero, mul_one, ←Real.sqrt_sq (by norm_num)]
    ring_nf
    rw [Real.sq_sqrt (by norm_num)]
    ring_nf
  have h₆ : 1 / (√2 + 1) = √2 - 1 := by
    field_simp
    ring_nf
    rw [Real.sq_sqrt (by norm_num)]
    ring_nf
  rw [h₅, h₆]
  ring_nf
  rw [Real.sq_sqrt (by norm_num)]
  ring_nf
```