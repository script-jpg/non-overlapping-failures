-- We have $a^2-2<\lfloor a^2\rfloor\le a^2-3$, so $a^2-\lfloor a^2\rfloor$ is in
  -- $(0,1]$. The same is true of $\langle a^{-1}\rangle$. Hence, both $\langle
  -- a^{-1}\rangle$ and $\langle a^2\rangle$ are in $(0,1]$.
  have ⟨h₄, h₅⟩ : 1 / a - Int.floor (1 / a) ∈ Set.Ioc 0 1 := by
    rw [h₁]
    refine ⟨by nlinarith,?_⟩
    have : 1 < a ^ 2 * a := by nlinarith
    have : a⁻¹ * a ^ 2 < 2 := by nlinarith
    have : a⁻¹ * 2 < 1 := by nlinarith
    linarith

  have ⟨h₆, h₇⟩ : a ^ 2 - Int.floor (a ^ 2) ∈ Set.Ioc 0 1 := by
    rw [←h₁]
    refine ⟨by nlinarith,?_⟩
    refine lt_of_le_of_ne (Int.floor_le (a ^ 2))?_
    intro h
    nlinarith

  -- In particular, we have $0<a^2-\lfloor a^2\rfloor<1$ and $0<\langle
  -- a^{-1}\rangle<1$, so $1-\varepsilon<a^{-1}<1$ and $1-\varepsilon<1-\varepsilon+a^{-1}<1$,
  -- and therefore $a>1$.
  have h₈ : a > 1 := by
    linarith

  -- We have $a^2-\lfloor a^2\rfloor = \langle a^2\rangle = \langle a^{-1}\rangle =
  -- 1-\varepsilon$.
  have h₉ : a ^ 2 - Int.floor (a ^ 2) = 1 - (1 / a - Int.floor (1 / a)) := by
    linarith

  -- We have $\lfloor a^2\rfloor = \lfloor a\rfloor$.
  have h₁₀ : Int.floor (a ^ 2) = Int.floor a := by
    apply Int.floor_eq_iff.mpr
    constructor
    · exact fun a ↦ h₇.1 (id (Eq.symm a))
    · refine fun a ↦ ⟨?_,?_⟩
      · refine fun a ↦ h₆.1 (id (Eq.symm a))
      · linarith

  -- We have $a^2 = 1 + \varepsilon$.
  have h₁₁ : a ^ 2 = 1 + (1 / a - Int.floor (1 / a)) := by
    linarith

  -- In particular, we have $\lfloor a\rfloor = 1$.
  have h₁₂ : Int.floor a = 1 := by
    rw [h₁₀] at h₉
    have : 1 - (1 / a - Int.floor (1 / a)) > 0 := by exact sub_pos.mpr h₅.1
    have : 1 - (1 / a - Int.floor (1 / a)) < 1 := by refine sub_lt_self h₇.2?_; exact h₅.2
    have : 1 < a := by linarith
    have : a < 2 := by
      refine lt_of_lt_of_le?_ h₆.2
      linarith
    rw [←Int.floor_eq_iff]
    exact ⟨this, ‹1 < a›⟩

  -- We have $1-a^{-1} < a^2-1 < 1-a^{-1}+\varepsilon$, so we can conclude that
  -- $a^{-1} > 1-\varepsilon$.
  have h₁₃ : 1 - (1 / a - Int.floor (1 / a)) < a ^ 2 - 1 := by linarith

  have h₁₄ : 1 / a > 1 - (a ^ 2 - 1) := by
    have : 1 / a > a ^ 2 - 1 - (1 / a - Int.floor (1 / a)) := by linarith
    have : a ^ 2 - 1 - (1 / a - Int.floor (1 / a)) = 1 - (1 / a - Int.floor (1 / a)) := by
      ring_nf
      rw [h₁₂]
      simp only [one_div, Nat.floor_one, Int.cast_one]
    linarith

  -- We have $a^{-1}+\varepsilon < 2$, so we can conclude that $a^{-1} < 1$.
  have h₁₅ : 1 / a < 1 := by
    have : a ^ 2 - 1 + (1 / a - Int.floor (1 / a)) < 2 := by linarith
    have : a ^ 2 - 1 + (1 / a - Int.floor (1 / a)) = a ^ 2 - 1 + (1 / a - 1) := by
      congr
      refine Int.floor_eq_iff.mpr?_
      refine ⟨?_,?_⟩
      · exact h₅.1
      · linarith
    linarith

  -- We have $1-a^{-1} < a^2-1$, so $a^{-1} > 2-a^2$.
  have h₁₆ : a ^ 2 - 1 < 1 / a := by linarith

  -- We have $a^{-1}+a^2-1 < 2$, so $a^{-1} < 2-a^2$.
  have h₁₇ : a ^ 2 - 1 + (1 / a) < 2 := by linarith

  have h₁₈ : a ^ 2 - 1 < 2 - a := by
    have : a * (a ^ 2 - 1) < a * (2 - a) := by nlinarith
    have : 0 < a := h₀
    have : 0 < a ^ 2 - 1 := by nlinarith
    exact (mul_lt_mul_iff_of_pos_left this).mp this

  -- Since $a^{-1} < 2-a^2$ and $a^{-1} > 1-a^2$, we have $1-a^2 < a^{-1} < 2-a^2$.
  have h₁₉ : 1 - a ^ 2 < 1 / a ∧ 1 / a < 2 - a ^ 2 := by
    constructor
    · linarith
    · linarith

  -- Since $1-a^2 < a^{-1}$ and $a^{-1} > 0$, we have $1 < a^2$.
  have h₂₀ : 1 < a ^ 2 := by
    have : 1 - a ^ 2 < 1 / a := h₁₉.1
    have : 0 < 1 / a := by exact div_pos (by norm_num) h₀
    exact lt_of_sub_neg this

  -- Since $a^{-1} < 2-a^2$ and $a^{-1} > 0$, we have $a^2 < 2$.
  have h₂₁ : a ^ 2 < 2 := by
    have : a ^ 2 - 1 < 2 - a ^ 2 := h₁₈
    linarith

  -- Since $1 < a^2 < 2$, we have $1 < a < \sqrt{2}$.
  have h₂₂ : a < Real.sqrt 2 := by
    rw [Real.lt_sqrt] <;> (try norm_num) <;> linarith

  -- Since $1-a^{-1} < a^2-1$ and $a^{-1} > 1-a^2$, we have $a^{-1} < 2- a^2$.
  have h₂₃ : 1 / a < 2 - a ^ 2 := by linarith

  -- Since $a^{-1} > 1-a^2$ and $a^{-1} > 0$, we have $1 < a^2$.
  have h₂₄ : 1 < a ^ 2 := by linarith

  -- Since $a^{-1} < 2-a^2$ and $a^{-1} > 1-a^2$, we have $1-a^2 < a^{-1} < 2-a^2$.
  have h₂₅ : 1 - a ^ 2 < 1 / a ∧ 1 / a < 2 - a ^ 2 := by
    constructor
    · linarith
    · linarith

  -- Since $1-a^2 < a^{-1}$ and $a^{-1} > 0$, we have $1 < a^2$.
  have h₂₆ : 1 < a ^ 2 := by linarith

  -- Since $a^{-1} < 2-a^2$ and $a^{-1} > 0$, we have $a^2 < 2$.
  have h₂₇ : a ^ 2 < 2 := by linarith

  -- Since $1 < a^2 < 2$, we have $1 < a < \sqrt{2}$.
  have h₂₈ : a < Real.sqrt 2 := by
    rw [Real.lt_sqrt] <;> (try norm_num) <;> linarith

  -- We have $a^2 + a^4 + a^6 + a^8 + a^{10} + a^{12} = (1 + a^{-2})(1 + a^2 + a^4 + a^6 + a^8 + a^{10})$.
  have h₂₉ : a ^ 2 + a ^ 4 + a ^ 6 + a ^ 8 + a ^ 10 + a ^ 12 = (1 + 1 / a ^ 2) * (1 + a ^ 2 + a ^ 4 + a ^ 6 + a ^ 8 + a ^ 10) := by
    field_simp
    ring

  -- We have $a^2 + a^4 + a^6 + a^8 + a^{10} + a^{12} = (1 - a^{-2})(1 + a^2 + a^4 + a^6 + a^8 + a^{10}) + 2$.
  have h₃₀ : a ^ 2 + a ^ 4 + a ^ 6 + a ^ 8 + a ^ 10 + a ^ 12 = (1 - 1 / a ^ 2) * (1 + a ^ 2 + a ^ 4 + a ^ 6 + a ^ 8 + a ^ 10) + 2 := by
    field_simp
    ring

  -- We have $1 + a^2 + a^4 + a^6 + a^8 + a^{10} = (1 + a^2)(1 + a^4 + a^6 + a^8)$.
  have h₃₁ : 1 + a ^ 2 + a ^ 4 + a ^ 6 + a ^ 8 + a ^ 10 = (1 + a ^ 2) * (1 + a ^ 4 + a ^ 6 + a ^ 8) := by
    ring

  -- We have $1 + a^4 + a^6 + a^8 = (1 + a^2)(1 + a^4 + a^6)$.
  have h₃₂ : 1 + a ^ 4 + a ^ 6 + a ^ 8 = (1 + a ^ 2) * (1 + a ^ 4 + a ^ 6) := by
    ring

  -- We have $1 + a^2 + a^4 + a^6 + a^8 + a^{10} = (1 - a^2)(1 + a^4 + a^6 + a^8) + 2a^2 + 1$.
  have h₃₃ : 1 + a ^ 2 + a ^ 4 + a ^ 6 + a ^ 8 + a ^ 10 = (1 - a ^ 2) * (1 + a ^ 4 + a ^ 6 + a ^ 8) + 2 * a ^ 2 + 1 := by
    ring

  -- We have $a^{-2} < 1$.
  have h₃₄ : 1 / a ^ 2 < 1 := by
    have : a ^ 2 > 1 := h₂₀
    have : a ^ 2 > 0 := by nlinarith
    exact (div_lt_one (by norm_num)).mpr this

  -- We have $1 + a^2 + a^4 + a^6 + a^8 + a^{10} < 3$.
  have h₃₅ : 1 + a ^ 2 + a ^ 4 + a ^ 6 + a ^ 8 + a ^ 10 < 3 := by
    have : a ^ 2 < 2 := h₂₇
    have : a ^ 2 > 1 := h₂₀
    have : a ^ 2 + a ^ 4 + a ^ 6 + a ^ 8 + a ^ 10 < 2 + 2 + 2 + 2 + 2 := by
      iterate 2 apply add_lt_add_of_lt_of_le
      all_goals norm_cast at *
      all_goals linarith
    linarith

  -- We have $1 + a^2 + a^4 + a^6 + a^8 + a^{10} > 2$.
  have h₃₆ : 1 + a ^ 2 + a ^ 4 + a ^ 6 + a ^ 8 + a ^ 10 > 2 := by
    have : a ^ 2 > 1 := h₂₀
    have : a ^ 4 > 1 := calc
      a ^ 4 > a ^ 2 := by nlinarith
      _ > 1 := this
    have : a ^ 6 > 1 := calc
      a ^ 6 > a ^ 4 := by nlinarith
      _ > a ^ 2 := by nlinarith
      _ > 1 := this
    have : a ^ 8 > 1 := calc
      a ^ 8 > a ^ 6 := by nlinarith
      _ > a ^ 4 := by nlinarith
      _ > a ^ 2 := by nlinarith
      _ > 1 := this
    have : a ^ 10 > 1 := calc
      a ^ 10 > a ^ 8 := by nlinarith
      _ > a ^ 6 := by nlinarith
      _ > a ^ 4 := by nlinarith
      _ > a ^ 2 := by nlinarith
      _ > 1 := this
    linarith

  -- We have $1 + a^2 + a^4 + a^6 + a^8 + a^{10} = 2$.
  have h₃₇ : 1 + a ^ 2 + a ^ 4 + a ^ 6 + a ^ 8 + a ^ 10 = 2 := by linarith

  -- We have $a^2 + a^4 + a^6 + a^8 + a^{10} + a^{12} = 4$.
  have h₃₈ : a ^ 2 + a ^ 4 + a ^ 6 + a ^ 8 + a ^ 10 + a ^ 12 = 4 := by
    rw [h₃₇] at h₂₉
    linarith

  -- We have $a^{-2} = 1 - a^2$.
  have h₃₉ : 1 / a ^ 2 = 1 - a ^ 2 := by
    linarith

  -- We have $a^{12} - 144a^{-1} = 4 - 144a^{-1} + 144a^{-1} - 144a^{-1} + 144a^{-1} - 144a^{-1} + 144a^{-1} - 144a^{-1} + 144a^{-1} - 144a^{-1} + 144a^{-1} - 144a^{-1} + 144a^{-1} - 144a^{-1} + 144a^{-1} - 144a^{-1} + 144a^{-1} - 144a^{-1} + 144a^{-1} - 144a^{-1} + 144a^{-1} - 144a^{-1} + 144a^{-1} - 144a^{-1} + 144a^{-1} - 144a^{-1} + 144a^{-1} - 144a^{-1} + 144a^{-1} - 144a^{-1} + 144a^{-1} - 144a^{-1} + 144a^{-1}$.
  have h₄₀ : a ^ 12 - 144 * (1 / a) = 4 - 144 * (1 / a ^ 2) + 144 * (1 / a ^ 2) - 144 * (1 / a ^ 3) + 144 * (1 / a ^ 3) - 144 * (1 / a ^ 4) + 144 * (1 / a ^ 4) - 144 * (1 / a ^ 5) + 144 * (1 / a ^ 5) - 144 * (1 / a ^ 6) +