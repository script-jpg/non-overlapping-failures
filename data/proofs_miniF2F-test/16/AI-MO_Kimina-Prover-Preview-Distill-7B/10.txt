-- Prove that $f(n) < n$ for every $n > 1$.
  have h₂ : ∀ n, 0 < n → f n < n := by
    intro n hn
    induction n with
    | zero => linarith
    | succ n ih =>
      by_cases h : n = 0
      · rw [h]; simp
      · have : n < n + 1 := Nat.lt_succ_self n
        have hn : 0 < n := by
          exact Nat.pos_of_ne_zero h
        have : f n < f (n + 1) := h₁ n hn
        have : f (f n) < f (n + 1) := Nat.trans (h₁ n hn) this
        rw [Nat.comp_lt_iff_le] at this
        · exact ih hn
        · exact `f n < f (n + 1)`

  -- Prove that $f(n) = n$ for every $n > 0$.
  intro n hn
  by_cases h : n = 0
  · rw [h]; simp
  · have : n < n + 1 := Nat.lt_succ_self n
    have hn : 0 < n := by
      exact Nat.pos_of_ne_zero h
    have : f n < f (n + 1) := h₁ n hn
    have : f (f n) < f (n + 1) := Nat.trans (h₁ n hn) this
    rw [Nat.comp_lt_iff_le] at this
    · exact h₂ n hn
    · exact `f n < f (n + 1)`

```