-- prove that f(n) ≤ n for all n > 0 by induction
  have H₁ : ∀ n, 0 < n → f n ≤ n := by
    intro n hn
    induction n with
    | zero => contradiction
    | succ n ih =>
      by_cases h : n = 0
      · simp [h]; linarith [h₀ 1]
      · have : n < n + 1 := by exact Nat.lt_succ_self n
        have : f n ≤ f (n + 1) := by
          apply h₁ (n + 1) (by simp)
          linarith
        have : f (n + 1) ≤ n + 1 := by
          linarith [ih (by linarith), this]
        linarith

  -- prove that f(n) ≥ n for all n > 0 by induction
  have H₂ : ∀ n, 0 < n → n ≤ f n := by
    intro n hn
    induction n with
    | zero => contradiction
    | succ n ih =>
      by_cases h : n = 0
      · simp [h]; linarith [h₀ 1]
      · have : n < n + 1 := by exact Nat.lt_succ_self n
        have : f n ≤ f (n + 1) := by
          apply h₁ (n + 1) (by simp)
          linarith
        have : n ≤ f n := by
          linarith [ih (by linarith), this]
        linarith

  -- prove the result
  intro n hn
  linarith [H₁ n hn, H₂ n hn]
```