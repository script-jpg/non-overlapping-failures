-- if $x = 0$, then $f(0) = 0$
  have h₂ : f 0 = 0 := by
    specialize h₁ 0
    simp at h₁
    by_contra! h₂
    have : f 0 > 0 := h₀ 0
    have : ¬ f 0 > 0 := by
      calc
        f 0 > f (f 0) := by exact h₁
        _ > 0 := by exact h₀ (f 0)
    contradiction
  have h₃ : ∀ n, 0 < n → f n > 0 := by
    intro n hn
    exact h₀ n
  -- prove that $f(n) \le n$
  have h₄ : ∀ n, 0 < n → f n ≤ n := by
    intro n hn
    induction n with
    | zero => contradiction
    | succ n ih =>
      by_cases h₄ : n = 0
      · rw [h₄, h₂]
      · have : n > 0 := by omega
        have h₅ : f (n + 1) > f (f n) := by apply h₁; omega
        have h₆ : f n > 0 := h₃ n (by omega)
        have h₇ : f (f n) > 0 := h₀ (f n)
        have : f (n + 1) > 0 := by
          calc
            f (n + 1) > f (f n) := by exact h₅
            _ > 0 := by exact h₀ (f n)
        have ih := ih (by omega)
        have : f n ≤ n := by exact ih
        by_cases h₈ : f n = n
        · rw [h₈]
          calc
            f (n + 1) > f (f n) := by apply h₅
            _ = f n := by rw [h₈]
            _ = n := by exact ih
        · have : f n < n := by omega
          have : f (n + 1) ≥ n + 1 := by
            calc
              f (n + 1) > f (f n) := by apply h₅
              _ > n := by exact ih
              _ ≥ n + 1 := by omega
          linarith
  -- prove that $f(n) \ge n$
  have h₈ : ∀ n, 0 < n → n ≤ f n := by
    intro n hn
    induction n with
    | zero => contradiction
    | succ n ih =>
      by_cases h₈ : n = 0
      · rw [h₈, h₂]
      · have : n > 0 := by omega
        have h₉ : f (n + 1) > f (f n) := by apply h₁; omega
        have h₁₀ : f n > 0 := h₃ n (by omega)
        have h₁₁ : f (f n) > 0 := h₀ (f n)
        have h₁₂ : f (n + 1) > 0 := by
          calc
            f (n + 1) > f (f n) := by exact h₉
            _ > 0 := by exact h₀ (f n)
        have ih := ih (by omega)
        have : n ≤ f n := by exact ih
        have h₁₃ : f (n + 1) ≥ n + 1 := by
          calc
            f (n + 1) > f (f n) := by apply h₉
            _ ≥ f n := by apply h₁₀
            _ ≥ n := by exact ih
            _ + 1 ≥ n + 1 := by omega
        by_cases h₁₄ : f (n + 1) = n + 1
        · rw [h₁₄]
          linarith
        · have : f (n + 1) > n + 1 := by omega
          have : n + 1 ≤ f (n + 1) := by
            calc
              n + 1 ≤ f (n + 1) := by exact h₁₄
              _ ≤ f (n + 1) := by exact h₁₂
          linarith
  -- by above, we have $f(n) = n$
  intro n hn
  have h₅ : f n ≤ n := by apply h₄; exact hn
  have h₆ : n ≤ f n := by apply h₈; exact hn
  have : f n = n := by omega
  exact this
```