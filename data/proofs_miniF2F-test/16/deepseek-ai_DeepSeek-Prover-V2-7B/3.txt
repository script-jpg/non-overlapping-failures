have step₁ : ∀ n, 0 < n → f n = n := by
    have h₂ : ∀ n, 0 < n → f n = n := by
      intro n hn
      induction n using Nat.strong_induction_on with
      | h n ih =>
        cases n with
        | zero => contradiction
        | succ n =>
          have h₃ := ih n (by linarith)
          have h₄ := h₁ n
          have h₅ := h₁ (f n)
          have h₆ := h₁ 1
          have h₇ := h₀ 0
          have h₈ := h₀ (f n)
          have h₉ := h₀ (n + 1)
          have h₁₀ := h₀ 1
          simp at *
          <;>
          (try omega) <;>
          (try cases n <;> simp_all [Nat.lt_succ_iff] <;> omega) <;>
          (try linarith) <;>
          (try omega) <;>
          (try
            {
              have h₁₁ := h₁ 0
              have h₁₂ := h₁ (f 0)
              simp at * <;> omega
            }) <;>
          (try
            {
              have h₁₁ := h₁ (n + 1)
              have h₁₂ := h₁ (f (n + 1))
              simp at * <;> omega
            }) <;>
          (try
            {
              have h₁₁ := h₁ (f n)
              have h₁₂ := h₁ n
              simp at * <;> omega
            }) <;>
          omega
    exact h₂
  intro n hn
  exact step₁ n hn

theorem imo_1977_p6_again (f : ℕ → ℕ) (h₀ : ∀ n, 0 < f n) (h₁ : ∀ n, 0 < n → f (f n) < f (n + 1)) :
    ∀ n, 0 < n → f n = n := by
  have h₂ : ∀ n, 0 < n → f n = n := by
    intro n hn
    induction n using Nat.strong_induction_on with
    | h n ih =>
      cases n with
      | zero => contradiction
      | succ n =>
        have h₃ := ih n (by linarith)
        have h₄ := h₁ n
        have h₅ := h₁ (f n)
        have h₆ := h₀ 0
        have h₇ := h₀ (f n)
        have h₈ := h₀ (n + 1)
        have h₉ := h₀ 1
        simp at *
        <;>
        (try omega) <;>
        (try cases n <;> simp_all [Nat.lt_succ_iff] <;> omega) <;>
        (try linarith) <;>
        (try omega) <;>
        (try
          {
            have h₁₀ := h₁ 0
            have h₁₁ := h₁ (f 0)
            simp at * <;> omega
          }) <;>
        (try
          {
            have h₁₀ := h₁ (n + 1)
            have h₁₁ := h₁ (f (n + 1))
            simp at * <;> omega
          }) <;>
        (try
          {
            have h₁₀ := h₁ (f n)
            have h₁₁ := h₁ n
            simp at * <;> omega
          }) <;>
        omega
  exact h₂

theorem imo_1977_p6_final (f : ℕ → ℕ) (h₀ : ∀ n, 0 < f n) (h₁ : ∀ n, 0 < n → f (f n) < f (n + 1)) :
    �