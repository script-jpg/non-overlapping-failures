have step₁ : ∀ n, 0 < n → f n = n := by
    intro n hn
    induction n using Nat.strong_induction_on with
    | h n ih =>
      cases n with
      | zero => contradiction
      | succ n =>
        cases n with
        | zero =>
          have h2 := h₁ 1 (by norm_num)
          have h3 := h₁ 1 (by norm_num)
          have h4 := h₁ 1 (by norm_num)
          simp at *
          <;> omega
        | succ n =>
          have h2 := h₁ (n + 1) (by linarith)
          have h3 := ih (f (n + 1)) (by
            have h4 := h₀ (n + 1)
            have h5 : f (n + 1) > 0 := by linarith
            omega)
          have h4 := h₁ (n + 1) (by linarith)
          have h5 := h₀ (f (n + 1))
          have h6 : f (n + 1) > 0 := by linarith
          have h7 : f (f (n + 1)) < f (n + 1 + 1) := by simpa using h₁ (n + 1) (by linarith)
          have h8 : f (n + 1) ≥ n + 1 := by
            by_contra! h9
            have h10 : f (n + 1) ≤ n := by linarith
            have h11 : f (n + 1) < n + 1 := by linarith
            have h12 : f (f (n + 1)) ≤ f n := by
              apply Nat.le_of_lt_succ
              have h13 : f (n + 1) ≤ n := by linarith
              have h14 : f (f (n + 1)) ≤ f n := by
                apply ih (f (n + 1))
                <;> omega
              omega
            nlinarith
          have h9 : f (n + 1) = n + 1 := by
            omega
          simp_all
          <;> omega
  exact step₁

theorem imo_1977_p6_again (f : ℕ → ℕ) (h₀ : ∀ n, 0 < f n) (h₁ : ∀ n, 0 < n → f (f n) < f (n + 1)) :
    ∀ n, 0 < n → f n = n := by
  exact step₁ f h₀ h₁
```