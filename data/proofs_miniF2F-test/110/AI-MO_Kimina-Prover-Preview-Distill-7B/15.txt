obtain ⟨ha, hb⟩ := h₀

  -- The arithmetic-geometric mean inequality.
  have am_gm : (a + b) / 2 - Real.sqrt (a * b) ≥ 0 := by
    apply sub_nonneg.mpr
    apply le_of_eq
    rw [eq_comm]
    exact (Real.sqrt_eq_iff_mul_self_eq_of_pos (by positivity)).mpr (by linarith)

  -- The inequality to be proven.
  have : (a + b) / 2 - Real.sqrt (a * b) ≤ (a - b) ^ 2 / (8 * b) := by

    -- integrand of am-gm inequality is non-negative
    have : 0 ≤ (Real.sqrt a - Real.sqrt b) ^ 2 := by
      exact sq_nonneg (Real.sqrt a - Real.sqrt b)

    -- (a + b) / 2 - √(ab) = ( (√a - √b) ^ 2 ) / (2 * √b)
    have : (Real.sqrt a - Real.sqrt b) ^ 2 = 2 * Real.sqrt b * ((a + b) / 2 - Real.sqrt (a * b)) := by
      calc _ = (Real.sqrt a) ^ 2 - 2 * Real.sqrt a * Real.sqrt b + (Real.sqrt b) ^ 2 := by ring
           _ = a - 2 * Real.sqrt (a * b) + b := by
            rw [Real.sq_sqrt (by positivity), Real.sq_sqrt (by positivity)]
            rw [Real.sqrt_mul (by positivity)]
            ring
           _ = 2 * ((a + b) / 2 - Real.sqrt (a * b)) * Real.sqrt b := by ring

    -- (a - b) ^ 2 / (8 * b) = (a - b) ^ 2 / (8 * b)
    have : (a - b) ^ 2 / (8 * b) = ((a - b) / (2 * Real.sqrt b)) ^ 2 / (2 * Real.sqrt b) := by
      field_simp
      ring_nf
      rw [Real.sq_sqrt (by positivity)]
      ring

    -- ((√a - √b) ^ 2) / (2 * √b) ≤ ((a - b) / (2 * √b)) ^ 2 / (2 * √b)
    have : ((a - b) / (2 * Real.sqrt b)) ^ 2 / (2 * Real.sqrt b) ≥ (Real.sqrt a - Real.sqrt b) ^ 2 / (2 * Real.sqrt b) := by
      apply div_le_div_of_nonneg_left
      · exact sq_le_sq₀ (by positivity) (by positivity) (by linarith)
      · exact mul_nonneg (by positivity) (by linarith)

    linarith

  linarith

```