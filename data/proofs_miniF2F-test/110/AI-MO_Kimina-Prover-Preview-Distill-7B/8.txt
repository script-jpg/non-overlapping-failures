obtain ⟨ha, hb⟩ := h₀

  -- The arithmetic mean of $a$ and $b$ is greater than or equal to their geometric mean.
  have h : (a + b) / 2 - Real.sqrt (a * b) ≥ 0 := by
    have h := (Real.sqrt_le_left (by positivity)).mpr (by linarith)
    have h' : Real.sqrt (a * b) ≤ (a + b) / 2 := by
      calc
        Real.sqrt (a * b) ≤ (a + b) / 2 := h
        _ = (a + b) / 2 - Real.sqrt (a * b) + Real.sqrt (a * b) := by ring
        _ ≤ (a + b) / 2 - Real.sqrt (a * b) + (a + b) / 2 - Real.sqrt (a * b) := by
          group
          nlinarith [Real.sq_sqrt (show 0 ≤ a * b by positivity)]
        _ = (a + b) / 2 - Real.sqrt (a * b) + ((a + b) / 2 - Real.sqrt (a * b)) * (Real.sqrt (a * b) / (a + b) - 1) := by ring
        _ ≤ (a + b) / 2 - Real.sqrt (a * b) + ((a + b) / 2 - Real.sqrt (a * b)) * (Real.sqrt (a * b) / (a + b) - 1) * (b / a) := by
          group
          nlinarith [Real.sq_sqrt (show 0 ≤ a * b by positivity), h₀.left, h₀.right]
        _ = (a + b) / 2 - Real.sqrt (a * b) + ((a + b) / 2 - Real.sqrt (a * b)) * (Real.sqrt (a * b) / (a + b) - 1) * (1 - b / a) := by ring
        _ = (a + b) / 2 - Real.sqrt (a * b) + ((a + b) / 2 - Real.sqrt (a * b)) * (Real.sqrt (a * b) / (a + b) - 1) * ((a - b) / a) := by ring
        _ = (a + b) / 2 - Real.sqrt (a * b) + ((a + b) / 2 - Real.sqrt (a * b)) * ((Real.sqrt (a * b) * (a - b) - a * b + b ^ 2) / ((a + b) * a)) := by
          field_simp
          ring
        _ = (a + b) / 2 - Real.sqrt (a * b) + ((a + b) / 2 - Real.sqrt (a * b)) * ((Real.sqrt (a * b) * (a - b) - b * (a - b)) / ((a + b) * a)) := by ring
        _ = (a + b) / 2 - Real.sqrt (a * b) + ((a + b) / 2 - Real.sqrt (a * b)) * ((a - b) / (a + b)) * (Real.sqrt (a * b) - b) * (1 / a) := by
          field_simp
          ring
        _ = (a + b) / 2 - Real.sqrt (a * b) + ((a + b) / 2 - Real.sqrt (a * b)) * ((a - b) / (a + b)) * (Real.sqrt (a * b) - Real.sqrt (b ^ 2)) * (1 / a) := by
          rw [Real.sqrt_sq (by positivity)]
        _ = (a + b) / 2 - Real.sqrt (a * b) + ((a + b) / 2 - Real.sqrt (a * b)) * ((a - b) / (a + b)) * (Real.sqrt (a * b) - Real.sqrt (b * b)) * (1 / a) := by ring
        _ = (a + b) / 2 - Real.sqrt (a * b) + ((a + b) / 2 - Real.sqrt (a * b)) * ((a - b) / (a + b)) * (Real.sqrt (a * b) - Real.sqrt (b ^ 2)) * (1 / a) := by
          rw [Real.sqrt_mul (by positivity), Real.sqrt_self (by positivity)]
        _ = (a + b) / 2 - Real.sqrt (a * b) + ((a + b) / 2 - Real.sqrt (a * b)) * ((a - b) / (a + b)) * (Real.sqrt (a * b) - b) * (1 / a) := by
          rw [Real.sqrt_sq (by positivity)]
        _ = (a + b) / 2 - Real.sqrt (a * b) + ((a + b) / 2 - Real.sqrt (a * b)) * ((a - b) / (a + b)) * ((Real.sqrt (a * b) - Real.sqrt (b * b)) / (b / a)) := by
          field_simp
          ring
        _ = (a + b) / 2 - Real.sqrt (a * b) + ((a + b) / 2 - Real.sqrt (a * b)) * ((a - b) / (a + b)) * ((Real.sqrt (a * b) - Real.sqrt (b ^ 2)) / ((1 - b / a) * a)) := by
          field_simp
          ring
        _ = (a + b) / 2 - Real.sqrt (a * b) + ((a + b) / 2 - Real.sqrt (a * b)) * ((a - b) / (a + b)) * ((Real.sqrt (a * b) - Real.sqrt (b ^ 2)) / ((a - b) / a * a)) := by
          field_simp
          ring
        _ = ((a + b) / 2 - Real.sqrt (a * b)) * (1 - ((a - b) / (a + b)) * (Real.sqrt (a * b) / (a + b) - 1)) := by ring
      linarith
    linarith

  have h' : (a + b) / 2 + Real.sqrt (a * b) ≥ 0 := by
    have h := (Real.sqrt_le_left (by positivity)).mpr (by linarith)
    have h' : Real.sqrt (a * b) ≤ (a + b) / 2 := by
      calc
        Real.sqrt (a * b) ≤ (a + b) / 2 := h
        _ = (a + b) / 2 - Real.sqrt (a * b) + Real.sqrt (a * b) := by ring
        _ ≤ (a + b) / 2 - Real.sqrt (a * b) + (a + b) / 2 - Real.sqrt (a * b) := by
          group
          nlinarith [Real.sq_sqrt (show 0 ≤ a * b by positivity)]
        _ = (a + b) / 2 - Real.sqrt (a * b) + ((a + b) / 2 - Real.sqrt (a * b)) * (Real.sqrt (a * b) / (a + b) - 1) := by ring
        _ ≤ (a + b) / 2 - Real.sqrt (a * b) + ((a + b) / 2 - Real.sqrt (a * b)) * (Real.sqrt (a * b) / (a + b) - 1) * (b / a) := by
          group
          nlinarith [Real.sq_sqrt (show 0 ≤ a * b by positivity), h₀.left, h₀.right]
        _ = (a + b) / 2 - Real.sqrt (a * b) + ((a + b) / 2 - Real.sqrt (a * b)) * (Real.sqrt (a * b) / (a + b) - 1) * ((a - b) / a) := by ring
        _ = (a + b) / 2 - Real.sqrt (a * b) + ((a + b) / 2 - Real.sqrt (a * b)) * ((Real.sqrt (a * b) * (a - b) - a * b + b ^ 2) / ((a + b) * a)) := by
          field_simp
          ring
        _ = (a + b) / 2 - Real.sqrt (a * b) + ((a + b) / 2 - Real.sqrt (a * b)) * ((Real.sqrt (a * b) * (a - b) - b * (a - b)) / ((a + b) * a)) := by ring
        _ = (a + b) / 2 - Real.sqrt (a * b) + ((a + b) / 2 - Real.sqrt (a * b)) * ((a - b) / (a + b)) * (Real.sqrt (a * b) - b) * (1 / a) := by
          field_simp
          ring
        _ = (a + b) / 2 - Real.sqrt (a * b) + ((a + b) / 2 - Real.sqrt (a * b)) * ((a - b) / (a + b)) * (Real.sqrt (a * b) - Real.sqrt (b * b)) * (1 / a) := by ring
        _ = (a + b) / 2 - Real.sqrt (a * b) + ((a + b) / 2 - Real.sqrt (a * b)) * ((a - b) / (a + b)) * (Real.sqrt (a * b) - Real.sqrt (b ^ 2)) * (1 / a) := by
          rw [Real.sqrt_mul (by positivity), Real.sqrt_self (by positivity)]
        _ = (a + b) / 2 - Real.sqrt (a * b) + ((a + b) / 2 - Real.sqrt (a * b)) * ((a - b) / (a + b)) * (Real.sqrt (a * b) - b) * (1 / a) := by ring
        _ = (a + b) / 2 - Real.sqrt (a * b) + ((a + b) / 2 - Real.sqrt (a * b)) * ((a - b) / (a + b)) * ((Real.sqrt (a * b) - Real.sqrt (b ^ 2)) / (b / a)) := by
          field_simp
          ring
        _ = (a + b) / 2 - Real.sqrt (a * b) + ((a + b) / 2 - Real.sqrt (a * b)) * ((a - b) / (a + b)) * ((Real.sqrt (a * b) - Real.sqrt (b * b)) / ((1 - b / a) * a)) := by
          field_simp
          ring
        _ = (a + b) / 2 - Real.sqrt (a * b) + ((a + b) / 2 - Real.sqrt (a * b)) * ((a - b) / (a + b)) * ((Real.sqrt (a * b) - Real.sqrt (b ^ 2)) / ((a - b) / a * a)) := by
          field_simp
          ring
        _ = ((a + b) / 2 - Real.sqrt (a * b)) * (1 - ((a - b) / (a + b)) * (Real.sqrt (a * b) / (a + b) - 1)) := by ring
      linarith
    linarith

  -- The desired inequality is the arithmetic mean-geometric mean inequality applied to the numbers $a$ and $b$.
  calc
    (a + b) / 2 - Real.sqrt (a * b) ≤ ((a + b) / 2 - Real.sqrt (a * b)) * (1 + ((a - b) ^ 2 / ((a + b) / 2 - Real.sqrt (a * b)) / (8 * b))) := by
      rw [mul_add, add_assoc]
      group
      nlinarith [Real.sq_sqrt (show 0 ≤ a * b by positivity), h', h₀.right, h₁, sq_nonneg (a - b)]
    _ = ((a + b) / 2 - Real.sqrt (a * b)) * (8 * b + (a - b) ^ 2 / ((a + b) / 2 - Real.sqrt (a * b))) / (8 * b) := by
      field_simp
      ring
    _ = ((a + b) / 2 - Real.sqrt (a * b)) * (8 * b + ((a - b) ^ 2 / ((a + b) / 2 - Real.sqrt (a * b))) * ((a + b) / 2 - Real.sqrt (a * b))) / (8 * b) := by
      field_simp
      ring
    _ = ((a + b) / 2 - Real.sqrt (a * b)) * (8 * b + (a - b) ^ 2) / ((8 * b) * ((a + b) / 2 - Real.sqrt (a * b))) := by
      field_simp
      ring
    _ = ((a + b) / 2 - Real.sqrt (a * b)) * ((8 * b + (a - b) ^ 2) / (8 * b)) := by
      field_simp
      ring
    _ = (a - b) ^ 2 / (8 * b) := by
      linarith

```