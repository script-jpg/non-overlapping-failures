-- We have a system of equations: on one hand we have area constraints
  -- on the other hand we have perimeter constraints. 
  -- We can eliminate one of the variables to get a constraint on the other.
  have h₃ : a + b = 27 := by linarith

  have h₄ : a ^ 2 + b ^ 2 = (a + b) ^ 2 - 2 * (a * b) := by ring

  -- Now we can substitute the known values in order to get the value of 
  -- $a^2+b^2$. This will give us the answer.
  rw [h₄, h₁, h₃]
  norm_num
```