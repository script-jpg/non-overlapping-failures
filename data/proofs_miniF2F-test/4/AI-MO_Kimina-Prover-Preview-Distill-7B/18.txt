-- The area of a rectangular patio is given by the product of its length and width.
  -- So we have a * b = 180 square feet.
  have h₃ : a + b = 27 := by
    linarith -- The perimeter is 54 feet, so 2 * (a + b) = 54. Dividing both sides by 2 gives a + b = 27.

  -- To find the length of the diagonal squared, we use the Pythagorean theorem.
  -- The diagonal forms a right triangle with the length and width of the patio.
  -- So the square of the diagonal is a^2 + b^2.
  have h₄ : a ^ 2 + b ^ 2 = (a + b) ^ 2 - 2 * (a * b) := by
    ring -- This is a algebraic identity: a^2 + b^2 = (a + b)^2 - 2ab.

  rw [h₄, h₁, h₃] -- Substitute h₄, h₁, and h₃ into the goal.
  norm_num -- Now we just need to calculate (27)^2 - 2 * (180) = 369.
```