-- We start by considering the remainder of $a$ when divided by $p$.
  have h2 : a % p = 0 ∨ a % p ∈ Icc 1 p := by
    apply Or.inl
    have : a % p < p := by apply Nat.mod_lt; exact h₁.pos
    omega

  -- Case 1: $a \equiv 0 \pmod{p}$.
  cases h2 with
  | inl h2 =>
    have : a ^ p % p = 0 := by
      have : a ^ p = a * a ^ (p - 1) := by
        rw [Nat.mul_comm, pow_succ']
      rw [this]
      apply Nat.mul_mod_eq_zero_left
      apply Nat.mod_eq_zero_of_dvd
      exact h2
    have : (a ^ p - a) % p = 0 := by
      apply Nat.sub_mod_eq_zero_of_mod_eq
      exact Nat.mod_eq_of_dvd this
    exact Nat.dvd_of_mod_eq_zero this

  -- Case 2: $a \not\equiv 0 \pmod{p}$.
  | inr h2 =>
    have h3 : 1 ≤ a % p := by exact Nat.le_of_lt_add_one (Nat.zero_lt_of_ne_zero h2)
    have h4 : a % p < p := by exact Nat.mod_lt a h₁.pos
    have h5 : a ^ p % p = a % p := by
      apply Nat.pow_mod
    have h6 : (a ^ p - a) % p = 0 := by
      rw [Nat.sub_mod]
      apply Nat modulararithmetic]
      rw [h5]
      exact Nat.mod_eq_of_lt h3
    exact Nat.dvd_of_mod_eq_zero h6
```