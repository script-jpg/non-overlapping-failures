have h : ((a + b) / 2) ^ n ≤ (a ^ n + b ^ n) / 2 := by
    have h' : (a ^ n + b ^ n) / 2 - ((a + b) / 2) ^ n ≥ 0 := by
      apply sub_nonneg.mpr
      calc
        _ = (n + 1 - (2 : ℝ) ^ n) * (a - b) ^ 2 / 2 + ∑ x ∈ Finset.Icc 1 n, (n.choose x - 1) * (a - b) ^ (2 * x) * a ^ (n - x) * b ^ (x - 1) + (a + b) ^ n * (n + 1 - (2 : ℝ) ^ n) / 2 := by
          ring_nf
        _ ≥ 0 := by
          apply add_nonneg
          apply add_nonneg
          · apply mul_nonneg
            · apply mul_nonneg
              · norm_num
              · exact h₀.left
            · norm_num
          · apply Finset.sum_nonneg
            intro i hi
            apply mul_nonneg
            · apply mul_nonneg
              · apply Nat.sub_le_sub
                simp
                exact (Nat.le_sub_one_iff_lt h₁).mpr hi.1
              · apply pow_nonneg
                apply le_of_lt
                exact hi.2
            · apply pow_nonneg
              apply le_of_lt
              exact hi.2
          · apply mul_nonneg
            · apply mul_nonneg
              · apply pow_nonneg
                apply le_of_lt
                exact h₀.left
              · apply pow_nonneg
                apply le_of_lt
                exact h₀.right
            · norm_num
    linarith
  exact h
```