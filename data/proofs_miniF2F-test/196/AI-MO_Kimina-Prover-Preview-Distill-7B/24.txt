by_cases hm : m = 0

  -- if m = 0, then m is not greater than n, so it is impossible
  · rw [hm] at h₃
    nlinarith

  -- m is not 0, so m ≥ 2
  · have hm : 2 ≤ m := by
      have h : m % 2 = 0 := by
        exact Nat.even_iff.mp h₀
      have h' : m = 2 ∨ m > 2 := by
        omega
      rcases h' with h' | h'
      · omega
      · exact h'
    have hn : 0 < n := by
      nlinarith
    have : n % 2 = 0 := by
      rw [←h₃]
      rw [mul_comm]
      exact Nat.even_iff.mp h₁
    -- so n ≥ 2 too
    have hn' : 2 ≤ n := by
      have h : n % 2 = 0 := by
        exact Nat.even_iff.mp this
      have h' : n = 2 ∨ n > 2 := by
        omega
      rcases h' with h' | h'
      · omega
      · exact h'
    -- then m ≥ 4
    have hm' : 4 ≤ m := by
      omega
    -- then n ≤ m - 4\$
    have h₄ : n ≤ m - 4 := by
      omega
    -- then n(n+4) ≤ (m-4)(m+4) = m^2 - 16
    have h₅ : n * (n + 4) ≤ m ^ 2 - 16 := by
      have g : (m - 4) * (m + 4) = m ^ 2 - 16 := by
        exact Nat.mul_sub_self m 4
      have g1 : n * (n + 4) ≤ (m - 4) * (m + 4) := by
        apply Nat.mul_le_mul
        omega
        omega
      rw [g] at g1
      exact g1
    -- then n^2 ≤ m^2 - 16
    have h₆ : n ^ 2 ≤ m ^ 2 - 16 := by
      omega
    -- then n^2 + 16 ≤ m^2
    have h₇ : n ^ 2 + 16 ≤ m ^ 2 := by
      omega
    -- then n^2 + 16 - m^2 ≤ 0
    have h₈ : n ^ 2 + 16 - m ^ 2 ≤ 0 := by
      omega
    -- but m^2 - n^2 = 288
    have h₉ : m ^ 2 - n ^ 2 = 288 := by
      omega
    -- then m^2 - n^2 - 16 = 272
    have h₁₀ : m ^ 2 - n ^ 2 - 16 = 272 := by
      omega
    -- then (m^2 - n^2 - 16) + 16 = 272 + 16
    have h₁₁ : (m ^ 2 - n ^ 2 - 16) + 16 = 272 + 16 := by
      omega
    -- then m^2 - n^2 = 288
    have h₁₂ : m ^ 2 - n ^ 2 = 288 := by
      omega
    -- then m = 18
    omega

```