-- Let $B = a - c > 0$ and $D = b - d > 0$ be the 'width' and 'height' of the rectangle.
  let B := a - c
  let D := b - d

  -- Prove that $B D = B^2 + D^2 + C D - D B$
  have : B * D = B ^ 2 + D ^ 2 + c * D - D * B := by
    simp [B, D]
    calc
      (a - c) * (b - d) = a * b - a * d - c * b + c * d := by ring
      _ = (b + d + a - c) * (b + d + c - a) - (b + d + c - a) * D - B * (b + d + c - a) + B * D := by
        rw [show c * d = (b + d + c - a) * D + B * (b + d + c - a) - B * D by rw [Nat.sub_add_eq, ←Nat.mul_sub, ←Nat.sub_mul, show b + d + c - a = a + b + c - d by omega, mul_comm D, ←Nat.sub_mul, show a + b + c - d = (b + d + a - c) + c - d by omega, Nat.sub_add_eq, Nat.sub_sub_eq, Nat.add_sub_cancel]] 
      _ = (b + d + a - c) * (b + d + c - a) - (b + d + c - a) * D - B * C + B * D := by rw [show a - c = B by simp [B], show c - a = -B by omega, show b + d + c - a = b + d + (c - a) by ring, Nat.sub_add_eq, Nat.add_sub_cancel, Nat.add_sub_cancel]
      _ = (b + d + a - c) * (b + d + c - a) - (b + d + c - a) * D - (a - c) * c + (a - c) * D := by rw [show b * d = (b + d + a - c) * D + (a - c) * c - (a - c) * D by rw [Nat.sub_add_eq, ←Nat.mul_sub, ←Nat.sub_mul, show b + d + a - c = a + b + c - d by omega, mul_comm D, ←Nat.sub_mul, show a + b + c - d = (b + d + a - c) + c - d by omega, Nat.sub_add_eq, Nat.add_sub_cancel]]
      _ = (b + d + a - c) * (b + d + c - a) - (b + d + c - a) * D - (a - c) * c + (a - c) * D - (b + d + a - c) * B + (b + d + a - c) * B := by omega
      _ = (b + d + a - c) * (b + d + c - a) - (b + d + c - a) * D - (a - c) * c + (a - c) * D - (b + d + a - c) * B + (b + d + a - c) * B - B * D + B * D := by omega
      _ = (b + d + a - c) * (b + d + c - a) - (b + d + c - a) * D - (a - c) * c + (a - c) * D - (b + d + a - c) * B + (b + d + a - c) * B - B * D := by omega
      _ = (b + d + a - c) * (b + d + c - a) - (b + d + c - a) * D - (a - c) * (c - B) + (a - c) * D - (b + d + a - c) * B + (b + d + a - c) * B - B * D := by rw [show c * d = (b + d + c - a) * D + B * (b + d + c - a) - B * D by rw [Nat.sub_add_eq, ←Nat.mul_sub, ←Nat.sub_mul, show b + d + c - a = a + b + c - d by omega, mul_comm D, ←Nat.sub_mul, show a + b + c - d = (b + d + a - c) + c - d by omega, Nat.sub_add_eq, Nat.add_sub_cancel, Nat.add_sub_cancel]]
      _ = (b + d + a - c) * (b + d + c - a) - (b + d + c - a) * D - (a - c) * B - (a - c) * (c - B) + (a - c) * D + (b + d + a - c) * B - B * D := by omega
      _ = (b + d + a - c) * (b + d + c - a) - (b + d + c - a) * D - (a - c) * B - (a - c) * C + (a - c) * D + (b + d + a - c) * B - B * D := by rw [show c - B = c - (a - c) by simp [B], show c - (a - c) = 2 * c - a by omega, show a - c = B by simp [B], Nat.sub_sub_eq, Nat.sub_sub_eq, Nat.add_sub_cancel]
      _ = (b + d + a - c) * (b + d + c - a) - (b + d + c - a) * D - (a - c) * B - (a - c) * (c - B) + (a - c) * D + (b + d + a - c) * B - B * D := by omega
      _ = (b + d + a - c) * (b + d + c - a) - (b + d + c - a) * D - (a - c) * B - (a - c) * C + (a - c) * D + (b + d + a - c) * B - B * D := by rw [show c - B = c - (a - c) by simp [B], show c - (a - c) = 2 * c - a by omega, show a - c = B by simp [B], Nat.sub_sub_eq, Nat.sub_sub_eq, Nat.add_sub_cancel]
      _ = (b + d + a - c) * (b + d + c - a) - (b + d + c - a) * D - B * D := by omega
      _ = (b + d + a - c) * (b + d + c - a) - (b + d + c - a) * D - (b + d + a - c) * B + B * D - B * D := by omega
      _ = (b + d + a - c) * (b + d + c - a) - (b + d + c - a) * D - (b + d + a - c) * B := by omega
      _ = (b + d + a - c) * (b + d + c - a) - (b + d + c - a) * D - (a - c) * B - (b + d + a - c) * B + (b + d + a - c) * B := by omega
      _ = (b + d + a - c) * (b + d + c - a) - (b + d + c - a) * D - (a - c) * B - (b + d + a - c) * B + (b + d + a - c) * B - B * D + B * D := by omega
      _ = (b + d + a - c) * (b + d + c - a) - (b + d + c - a) * D - (a - c) * B - (b + d + a - c) * B + (b + d + a - c) * B - B * D := by omega
      _ = (b + d + a - c) * (b + d + c - a) - (b + d + c - a) * D - (a - c) * (c - B) - (b + d + a - c) * B + (b + d + a - c) * B - B * D := by rw [show c * d = (b + d + c - a) * D + B * (b + d + c - a) - B * D by rw [Nat.sub_add_eq, ←Nat.mul_sub, ←Nat.sub_mul, show b + d + c - a = a + b + c - d by omega, mul_comm D, ←Nat.sub_mul, show a + b + c - d = (b + d + a - c) + c - d by omega, Nat.sub_add_eq, Nat.add_sub_cancel, Nat.add_sub_cancel]]
      _ = (b + d + a - c) * (b + d + c - a) - (b + d + c - a) * D - (a - c) * B - (b + d + a - c) * B + (b + d + a - c) * B - B * D := by omega
      _ = (b + d + a - c) * (b + d + c - a) - (b + d + c - a) * D - (a - c) * B - (b + d + a - c) * B + (b + d + a - c) * B - B * D := by omega
      _ = (b + d + a - c) * (b + d + c - a) - (b + d + c - a) * D - B * D := by omega
      _ = B * D := by omega

  -- Prove that $K L + M N = (B D + C D + K C) + (B D - C D + K C) = 2 B D + 2 K C$
  have : a * b + c * d = 2 * B * D + 2 * a * c := by
    simp [B, D]
    calc
      a * b + c * d = (b + d + a - c) * (b + d + c - a) - (b + d + c - a) * D - (a - c) * B - (b + d + a - c) * B + (b + d + a - c) * B - B * D := by rw [show a * c + b * d = (b + d + a - c) * (b + d + c - a) - (b + d + c - a) * D - (a - c) * B - (b + d + a - c) * B + (b + d + a - c) * B - B * D by rw [add_comm b d, add_comm c a, mul_comm B, mul_comm D, show c * d = (b + d + c - a) * D + B * (b + d + c - a) - B * D by rw [Nat.sub_add_eq, ←Nat.mul_sub, ←Nat.sub_mul, show b + d + c - a = a + b + c - d by omega, mul_comm D, ←Nat.sub_mul, show a + b + c - d = (b + d + a - c) + c - d by omega, Nat.sub_add_eq, Nat.add_sub_cancel, Nat.add_sub_cancel]]
      _ = (b + d + a - c) * (b + d + c - a) - (b + d + c - a) * D - (a - c) * B - (b + d + a - c) * B + (b + d + a - c) * B - B * D := by omega
      _ = (b + d + a - c) * (b + d + c - a) - (b + d + c - a) * D - (a - c) * (c - B) - (b + d + a - c) * B + (b + d + a - c) * B - B * D := by rw [show c * d = (b + d + c - a) * D + B * (b + d + c - a) - B * D by rw [Nat.sub_add_eq, ←Nat.mul_sub, ←Nat.sub_mul, show b + d + c - a = a + b + c - d by omega, mul_comm D, ←Nat.sub_mul, show a + b + c - d = (b + d + a - c) + c - d by omega, Nat.sub_add_eq, Nat.add_sub_cancel, Nat.add_sub_cancel]]
      _ = 2 * (b + d + a - c) * (b + d + c - a) - 2 * (b + d + c - a) * D - 2 * (a - c) * B := by omega
      _ = 2 * B * D + 2 * a * c := by rw [show (b + d + a - c) * (b + d + c - a) - (b + d + c - a) * D - (a - c) * B = B * D by omega]

  -- Let's prove that $B D + 2 B D + 2 C D = 3 B D + 2 C D$ is not prime.
  have : ¬Nat.Prime (3 * B * D + 2 * c * d) := by
    apply Nat.not_prime_mul
    · simp
      calc
        3 * B * D + 2 * c * d = 3 * B * D + 2 * (a * c + b * d - B * D) := by rw [show 3 * B * D + 2 * c * d = 3 * B * D + 2 * (a * c + b * d - B * D) by omega]
        _ = 3 * B * D + 2 * (a * c + b * d) - 2 * B * D := by omega
        _ = B * D + 2 * (a * c + b * d) := by omega
        _ ≥ B * D + 2 * (B * D + 2 * c * d) := by omega
        _ = (B + 2 * c) * D + 2 * (a * c + b * d) := by omega
        _ ≥ 3 * B * D + 2 * (a * c + b * d) := by omega
        _ = 3 * B * D + 2 * c * d := by omega
    · calc
        3 * B * D + 2 * c * d = 3 * B * D + 2 * (a * c + b * d - B * D) := by rw [show 3 * B * D + 2 * c * d = 3 * B * D + 2 * (a * c + b * d - B * D) by omega]
        _ = 3 * B * D + 2 * a * c + 2 * b * d - 2 * B * D := by omega
        _ = B * D + 2 * a * c + 2 * b * d := by omega
        _ ≥ 3 * B * D + 2 * a * c := by omega
        _ = 3 * B * D + 2 * c * d := by omega

  -- Let $A = a - 2 c > 0$ and $F = b - 2 d > 0$ be the 'width' and 'height' of the rectangle.
  let A := a - 2 * c
  let F := b - 2 * d

  -- Prove that $A F = B D + 2 B D + 2 C D = 3 B D + 2 C D$.
  have : A * F = 3 * B * D + 2 * c * d := by
    calc
      A * F = (a - 2 * c) * (b - 2 * d) := by rfl
      _ = a * b - 2 * a * d - 2 * c * b + 4 * c * d := by omega
      _ = (b + d + a - c) * (b + d + c - a) - 2 * (b + d + c - a) * D - 2 * (a - c) * B + 4 * c * d := by omega
      _ = 3 * B * D + 2 * c * d := by omega

  -- Prove that $K L + M N = 2 A F$
  have : a * b + c * d = 2 * A * F := by
    calc
      a * b + c * d = 2 * B * D + 2 * a * c := by assumption
      _ = 2 * A * F := by omega

  -- Since $A F$ is not prime, neither is $K L + M N$.
  intro h
  rw [this] at h
  revert h
  simp only [not_iff_not_exists, Nat.Prime.exists]
  intro b e _ use _ use _
  have : b > 1 := by omega
  have : e > 1 := by omega
  have : b * e = 2 * A * F := by omega
  have : 2 * A * F > 2 * F := by omega
  have : 2 * A * F < 2 * A := by omega
  omega

```