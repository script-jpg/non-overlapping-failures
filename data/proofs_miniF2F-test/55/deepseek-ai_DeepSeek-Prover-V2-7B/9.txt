have h1 : ∀ n, ∑ k in Finset.range n, k ^ 3 = (∑ k in Finset.range n, k) ^ 2 := by
    intro n
    induction n with
    | zero => simp
    | succ n ih =>
      cases n with
      | zero => simp
      | succ n =>
        simp_all [Finset.sum_range_succ, Nat.succ_eq_add_one, pow_two, mul_add, mul_comm, mul_left_comm]
        <;> ring_nf at *
        <;> nlinarith
  apply h1
  <;> rfl
  <;> simp_all
  <;> ring_nf
  <;> nlinarith

theorem sum_k_sq (n : ℕ) : ∑ k in Finset.range n, k ^ 2 = n * (n - 1) * (2 * n - 1) / 6 := by
  induction n with
  | zero => simp
  | succ n ih =>
    cases n with
    | zero => simp
    | succ n =>
      simp_all [Finset.sum_range_succ, Nat.succ_eq_add_one, pow_two, mul_add, mul_comm, mul_left_comm, Nat.mul_sub_left_distrib]
      ring_nf
      omega

theorem sum_k_mul_k_minus_1 (n : ℕ) : ∑ k in Finset.range n, k * (k - 1) = n * (n - 1) * (n - 2) / 3 := by
  induction n with
  | zero => simp
  | succ n ih =>
    cases n with
    | zero => simp
    | succ n =>
      cases n with
      | zero => simp
      | succ n =>
        simp_all [Finset.sum_range_succ, Nat.succ_eq_add_one, mul_add, mul_comm, mul_left_comm, Nat.mul_sub_left_distrib]
        ring_nf
        omega

theorem sum_k_mul_k_minus_1_eq (n : ℕ) : ∑ k in Finset.range n, k * (k - 1) = n * (n - 1) * (n - 2) / 3 := by
  induction n with
  | zero => simp
  | succ n ih =>
    cases n with
    | zero => simp
    | succ n =>
      cases n with
      | zero => simp
      | succ n =>
        simp_all [Finset.sum_range_succ, Nat.succ_eq_add_one, mul_add, mul_comm, mul_left_comm, Nat.mul_sub_left_distrib]
        ring_nf
        omega

theorem sum_k_sq_eq (n : ℕ) : ∑ k in Finset.range n, k ^ 2 = n * (n - 1) * (2 * n - 1) / 6 := by
  induction n with
  | zero => simp
  | succ n ih =>
    cases n with
    | zero => simp
    | succ n =>
      simp_all [Finset.sum_range_succ, Nat.succ_eq_add_one, pow_two, mul_add, mul_comm, mul_left_comm, Nat.mul_sub_left_distrib]
      ring_nf
      omega

theorem sum_k_eq (n : ℕ) : ∑ k in Finset.range n, k = n * (n - 1) / 2 := by
  induction n with
  | zero => simp
  | succ n ih =>
    cases n with
    | zero => simp
    | succ n =>
      simp_all [Finset.sum_range_succ, Nat.succ_eq_add_one, Nat.mul_sub_left_distrib]
      ring_nf
      omega

theorem sum_k_eq_aux (n : ℕ) : ∑ k in Finset.range n, k = n * (n - 1) / 2 := by
  induction n with
  |