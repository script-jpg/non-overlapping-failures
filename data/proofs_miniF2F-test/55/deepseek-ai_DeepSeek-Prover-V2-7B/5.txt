have h₁ : ∑ k in Finset.range n, k ^ 3 = ∑ k in Finset.range n, k ^ 3 := rfl
  have h₂ : (∑ k in Finset.range n, k) ^ 2 = ∑ k in Finset.range n, k ^ 2 + 2 * ∑ k in Finset.range n, ∑ m in Finset.range k, m := by
    rw [sq]
    have h₃ : ∑ k in Finset.range n, k = ∑ k in Finset.range n, k := rfl
    have h₄ : ∑ k in Finset.range n, k ^ 2 = ∑ k in Finset.range n, k ^ 2 := rfl
    have h₅ : ∑ k in Finset.range n, ∑ m in Finset.range k, m = ∑ k in Finset.range n, ∑ m in Finset.range k, m := rfl
    rw [← Finset.sum_add_distrib]
    <;> simp_all [Finset.sum_mul, Finset.mul_sum, mul_comm, mul_assoc, mul_left_comm]
    <;> ring
    <;> linarith
  
  have h₃ : ∑ k in Finset.range n, k ^ 2 = ∑ k in Finset.range n, k ^ 2 := rfl
  have h₄ : ∑ k in Finset.range n, ∑ m in Finset.range k, m = ∑ k in Finset.range n, (k * (k - 1)) / 2 := by
    apply Finset.sum_congr rfl
    intro k hk
    have h₅ : ∑ m in Finset.range k, m = (k * (k - 1)) / 2 := by
      rw [Finset.sum_range_id]
      <;>
      cases k with
      | zero => simp_all
      | succ k =>
        simp_all [Nat.succ_mul, Nat.mul_succ, Nat.mul_one, Nat.mul_zero]
        <;> ring_nf
        <;> omega
    simp_all
  
  have h₅ : ∑ k in Finset.range n, k ^ 3 = ∑ k in Finset.range n, k ^ 3 := rfl
  have h₆ : (∑ k in Finset.range n, k) ^ 2 = ∑ k in Finset.range n, k ^ 2 + 2 * ∑ k in Finset.range n, (k * (k - 1)) / 2 := by
    rw [h₂, h₄]
    <;>
    simp_all [Finset.sum_add_distrib, Finset.mul_sum, mul_comm, mul_assoc, mul_left_comm]
    <;>
    ring_nf at *
    <;>
    omega
  
  have h₇ : ∑ k in Finset.range n, k ^ 2 = ∑ k in Finset.range n, k ^ 2 := rfl
  have h₈ : ∑ k in Finset.range n, (k * (k - 1)) / 2 = 0 := by
    apply Finset.sum_eq_zero
    intro k hk
    have h₉ : k < n := Finset.mem_range.mp hk
    have h₁₀ : k = 0 ∨ k ≥ 1 := by omega
    cases h₁₀ with
    | inl h₁₀ =>
      simp [h₁₀]
    | inr h₁₀ =>
      have h₁₁ : k - 1 < k := by omega
      have h₁₂ : (k * (k - 1)) / 2 = 0 := by
        apply Nat.div_eq_of_lt
        have h₁₃ : k * (k - 1) < 2 := by
          nlinarith
        omega
      simp [h₁₂]
  
  have h₉ : ∑ k in Fin