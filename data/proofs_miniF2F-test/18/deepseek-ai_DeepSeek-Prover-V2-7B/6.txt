have h₂ : n ≠ 0 := by linarith
  have h₃ : (16 : ℝ) = 2 ^ 4 := by norm_num
  have h₄ : (4 : ℝ) = 2 ^ 2 := by norm_num
  rw [h₃, h₄] at h₁
  field_simp [Real.logb, Real.log_rpow, Real.log_pow, mul_assoc, mul_comm, mul_left_comm] at h₁
  ring_nf at h₁
  have h₅ : n ≠ 0 := by linarith
  norm_cast at h₁
  have h₆ : n = 2 ^ 16 := by
    have h₇ : n ≠ 0 := by linarith
    have h₈ : n > 0 := by linarith
    have h₉ : n = 2 ^ 16 := by
      apply le_antisymm
      · -- Show that n ≤ 2^16
        apply le_of_not_gt
        intro h
        have h₁₀ : n ≥ 2 ^ 17 := by
          have h₁₁ : 2 ^ 17 > 2 ^ 16 := by norm_num
          have h₁₂ : n > 2 ^ 16 := by linarith
          omega
        have h₁₃ : Real.logb 2 (Real.logb 16 n) > 4 := by
          have h₁₄ : Real.logb 16 n ≥ 4 := by
            apply Real.le_logb_iff_rpow_le (by norm_num) (by positivity) |>.mpr
            norm_cast
            have h₁₅ : 2 ^ 17 ≥ 16 * n := by nlinarith
            nlinarith
          have h₁₅ : Real.logb 2 (Real.logb 16 n) ≥ 4 := by
            apply Real.le_logb_iff_rpow_le (by norm_num) (by positivity) |>.mpr
            nlinarith
          nlinarith
        have h₁₆ : Real.logb 4 (Real.logb 4 n) ≤ 4 := by
          have h₁₇ : Real.logb 4 n ≤ 4 * 4 := by
            apply Real.logb_le_iff_le_rpow (by norm_num) (by positivity) |>.mpr
            norm_cast
            have h₁₈ : n ≤ 2 ^ 16 := by omega
            nlinarith
          have h₁₉ : Real.logb 4 (Real.logb 4 n) ≤ 4 := by
            apply Real.logb_le_iff_le_rpow (by norm_num) (by positivity) |>.mpr
            nlinarith
          nlinarith
        nlinarith
      · -- Show that n ≥ 2^16
        apply le_of_not_gt
        intro h
        have h₁₀ : n ≤ 2 ^ 15 := by
          have h₁₁ : 2 ^ 15 < 2 ^ 16 := by norm_num
          have h₁₂ : n < 2 ^ 16 := by linarith
          omega
        have h₁₃ : Real.logb 2 (Real.logb 16 n) < 4 := by
          have h₁₄ : Real.logb 16 n < 4 := by
            apply Real.logb_lt_iff_lt_rpow (by norm_num) (by positivity) |>.mpr
            norm_cast
            have h₁₅ : n ≤ 2 ^ 15 := by omega
            nlinarith
          have h₁₅ : Real.logb 2 (Real.logb 16 n) < 4 := by
            apply Real.logb_lt_iff_lt_rpow (by norm_num) (by positivity) |>.mpr
            nlinarith
          nlinarith
        have h₁₆ : Real.logb 4 (Real.logb 4 n) ≥ 4 := by