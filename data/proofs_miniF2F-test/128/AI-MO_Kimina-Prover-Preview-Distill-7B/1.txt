-- We first show that the square roots in the equation are well-defined.
  have h₁ : 4 + Real.sqrt (16 + 16 * a) ≥ 0 := by
    have : 16 + 16 * a ≥ 0 := by linarith
    exact add_nonneg (by norm_num) (Real.sqrt_nonneg this)
  have h₂ : 1 + Real.sqrt (1 + a) ≥ 0 := by
    have : 1 + a ≥ 0 := by linarith
    exact add_nonneg (by norm_num) (Real.sqrt_nonneg this)

  -- We calculate the value of the first square root.
  have h₃ : Real.sqrt (4 + Real.sqrt (16 + 16 * a)) = 4 + Real.sqrt (1 + a) := by
    rw [Real.sqrt_eq_iff_sq_eq] <;> (try positivity) <;> ring_nf <;> (try norm_num) <;> linarith

  -- Substitute the value of the first square root.
  rw [h₃] at h₀
  -- We calculate the value of the second square root.
  have h₄ : Real.sqrt (1 + Real.sqrt (1 + a)) = 2 := by
    linarith

  -- Substitute the value of the second square root.
  rw [h₄] at h₀
  -- We solve for $a$.
  have h₅ : Real.sqrt (1 + a) = 2 := by
    linarith

  have h₆ : 1 + a = 2 ^ 2 := by
    rw [←h₅]
    exact Real.sq_sqrt (by linarith)

  linarith


```