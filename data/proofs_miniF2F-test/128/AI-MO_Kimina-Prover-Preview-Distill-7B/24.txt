-- We have $\sqrt{4+\sqrt{16+16a}} = 2\sqrt{1+\sqrt{1+a}}.$
  have : Real.sqrt (4 + Real.sqrt (16 + 16 * a)) = 2 * Real.sqrt (1 + Real.sqrt (1 + a)) := by
    rw[Real.sqrt_eq_iff_eq_sq]
    rw[Real.sq_sqrt]
    ring_nf
    rw[Real.sq_sqrt]
    ring_nf
    linarith
    all_goals
      try linarith

  -- Substituting this into the original equation, we have $\sqrt{1+\sqrt{1+a}} = 2.$
  rw[this] at hâ‚€
  have : Real.sqrt (1 + Real.sqrt (1 + a)) = 2 := by linarith

  -- Squaring, we have $1+\sqrt{1+a} = 4.$
  rw[Real.sqrt_eq_iff_eq_sq] at this
  ring_nf at this

  -- So, $\sqrt{1+a} = 3.$
  have : Real.sqrt (1 + a) = 3 := by linarith

  -- Squaring, we have $1+a = 9.$
  rw[Real.sqrt_eq_iff_eq_sq] at this
  ring_nf at this

  -- Hence, $a = 8.$
  linarith
  all_goals
    try linarith
```