-- We have $\sqrt{4+\sqrt{16+16a}} = 2\sqrt{1+\sqrt{1+a}}.$
  have : Real.sqrt (4 + Real.sqrt (16 + 16 * a)) = 2 * Real.sqrt (1 + Real.sqrt (1 + a)) := by
    calc

      Real.sqrt (4 + Real.sqrt (16 + 16 * a))
        = Real.sqrt (4 + Real.sqrt ((16 + 16 * a) * 1)) := by ring_nf
      _ = Real.sqrt (4 + Real.sqrt ((16 + 16 * a) * (1 ^ 2))) := by ring_nf
      _ = Real.sqrt (4 + Real.sqrt (4 ^ 2 * (1 + a))) := by
        ring_nf
        congr
        ext
        · ring_nf
          congr
          ext
          · ring_nf
            congr
            ring
      _ = Real.sqrt (4 + 4 * Real.sqrt (1 + a)) := by
        rw [Real.sqrt_mul (by linarith only)]
        rw [(by linarith : (4 ^ 2 * (1 + a)) = (4 ^ 2) * (1 + a))]
        rw [Real.sqrt_sq (by linarith only)]
      _ = Real.sqrt (4 * (1 + 2 * Real.sqrt (1 + a))) := by ring_nf
      _ = Real.sqrt ( (2 ^ 2) * (1 + 2 * Real.sqrt (1 + a)) ) := by ring_nf
      _ = 2 * Real.sqrt (1 + 2 * Real.sqrt (1 + a)) := by
        rw [Real.sqrt_mul (by linarith only)]
        rw [(by linarith : (2 ^ 2) = (2 ^ 2) * 1)]
        rw [Real.sqrt_mul_self (by linarith only)]
      _ = 2 * Real.sqrt (1 + Real.sqrt (1 + a) * (1 + 1)) := by
        ring_nf
        rw [← Real.sqrt_mul (by linarith only)]
        ring_nf
        congr
        ext
        · ring_nf
          congr
          ext
          · ring_nf
            congr
            ring
      _ = 2 * Real.sqrt (1 + Real.sqrt (1 + a) + Real.sqrt (1 + a) * Real.sqrt (1 + a)) := by
        rw [Real.sqrt_mul (by linarith only)]
      _ = 2 * Real.sqrt ((1 + Real.sqrt (1 + a)) * (1 + 1)) := by
        ring_nf
        rw [← Real.sqrt_mul (by linarith only)]
        ring_nf
        congr
        ext
        · ring_nf
          congr
          ext
          · ring_nf
            congr
            ring
      _ = 2 * Real.sqrt ((1 + Real.sqrt (1 + a)) * 2) := by
        congr
        ring
      _ = 2 * Real.sqrt (1 + Real.sqrt (1 + a)) * Real.sqrt 2 := by
        rw [Real.sqrt_mul (by linarith only)]
        ring_nf
        rw [(by linarith : 2 = 1 + 1)]
      _ = 2 * Real.sqrt (1 + Real.sqrt (1 + a)) * Real.sqrt 2 := by ring_nf
      _ = 2 * Real.sqrt (1 + Real.sqrt (1 + a)) := by
        rw [Real.sqrt_eq_iff_eq_sq] <;> (ring_nf) <;> linarith only
        <;> ring_nf <;> (try linarith only)
  -- Move the term to LHS
  rw [this] at h₀
  have : Real.sqrt (1 + Real.sqrt (1 + a)) * (2 - 1) = 6 - 2 * Real.sqrt (1 + Real.sqrt (1 + a)) := by
    calc
      Real.sqrt (1 + Real.sqrt (1 + a)) * (2 - 1)
        = Real.sqrt (1 + Real.sqrt (1 + a))) - Real.sqrt (1 + Real.sqrt (1 + a)) := by ring_nf
      _ = 6 - Real.sqrt (1 + Real.sqrt (1 + a)) - Real.sqrt (1 + Real.sqrt (1 + a)) := by rw [h₀]
      _ = 6 - 2 * Real.sqrt (1 + Real.sqrt (1 + a)) := by ring_nf
  -- Solve for $\sqrt{1+\sqrt{1+a}} = 2$
  rw [mul_left_inj' (by norm_num)] at this
  have : (6 : ℝ) - 2 * Real.sqrt (1 + Real.sqrt (1 + a)) = 2 := by linarith only
  have : (6 : ℝ) - 2 * Real.sqrt (1 + Real.sqrt (1 + a)) = 2 := by linarith only
  have : Real.sqrt (1 + Real.sqrt (1 + a)) = 2 := by linarith only
  -- Square both sides
  have : (Real.sqrt (1 + Real.sqrt (1 + a))) ^ 2 = 2 ^ 2 := by rw [this]
  ring_nf at this
  -- Rearrange the terms
  have : (Real.sqrt (1 + Real.sqrt (1 + a))) ^ 2 - 4 = 0 := by linarith only
  have : (Real.sqrt (1 + Real.sqrt (1 + a))) ^ 2 - 4 = (Real.sqrt (1 + Real.sqrt (1 + a)) - 2) * (Real.sqrt (1 + Real.sqrt (1 + a)) + 2) := by ring_nf
  rw [this] at this
  -- Solve for $\sqrt{1+\sqrt{1+a}} = -2$
  have : Real.sqrt (1 + Real.sqrt (1 + a)) + 2 ≠ 0 := by
    have : 0 ≤ Real.sqrt (1 + Real.sqrt (1 + a)) := by
      positivity
    linarith only
  have : Real.sqrt (1 + Real.sqrt (1 + a)) - 2 = 0 := by
    apply_fun (fun x => x / (Real.sqrt (1 + Real.sqrt (1 + a)) + 2)) at this
    field_simp [this] at this
    exact this
  -- We have $\sqrt{1+\sqrt{1+a}} = 2$
  rw [sub_eq_zero] at this
  -- repeat the above process
  have : (Real.sqrt (1 + Real.sqrt (1 + a))) ^ 2 = 2 ^ 2 := by rw [this]
  ring_nf at this
  have : (Real.sqrt (1 + Real.sqrt (1 + a))) ^ 2 - 4 = 0 := by linarith only
  have : (Real.sqrt (1 + Real.sqrt (1 + a))) ^ 2 - 4 = (Real.sqrt (1 + Real.sqrt (1 + a)) - 2) * (Real.sqrt (1 + Real.sqrt (1 + a)) + 2) := by ring_nf
  rw [this] at this
  have : Real.sqrt (1 + Real.sqrt (1 + a)) + 2 ≠ 0 := by
    have : 0 ≤ Real.sqrt (1 + Real.sqrt (1 + a)) := by
      positivity
    linarith only
  have : Real.sqrt (1 + Real.sqrt (1 + a)) - 2 = 0 := by
    apply_fun (fun x => x / (Real.sqrt (1 + Real.sqrt (1 + a)) + 2)) at this
    field_simp [this] at this
    exact this
  -- Solve for $a$
  repeat rw [sub_eq_zero] at this
  ring_nf at this
  apply_fun (fun x => x ^ 2) at this
  ring_nf at this
  apply_fun (fun x => x - 1) at this
  ring_nf at this
  apply_fun (fun x => x ^ 2) at this
  ring_nf at this
  linarith only
```