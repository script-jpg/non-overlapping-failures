-- We have $\sqrt{16 + 16a} = 4\sqrt{1+a}$.
  have : Real.sqrt (16 + 16 * a) = 4 * Real.sqrt (1 + a) := by
    rw [show (16 + 16 * a) = (4^2) * (1 + a) by ring]
    rw [Real.sqrt_mul]
    rw [Real.sqrt_sq]
    linarith

  -- Rewrite the left square root in the given equation.
  have : Real.sqrt (4 + Real.sqrt (16 + 16 * a)) = 2 * Real.sqrt (1 + a) := by
    rw [this]
    rw [show (4 + 4 * Real.sqrt (1 + a)) = (2^2) * (1 + a) by ring]
    rw [Real.sqrt_mul]
    rw [Real.sqrt_sq]
    linarith

  -- Substitute it in the given equation.
  rw [this] at h₀
  have : 2 * Real.sqrt (1 + a) + Real.sqrt (1 + Real.sqrt (1 + a)) = 6 := by
    exact h₀

  -- We have $\sqrt{1 + \sqrt{1 + a}} = 6 - 2\sqrt{1+a}$.
  have : Real.sqrt (1 + Real.sqrt (1 + a)) = 6 - 2 * Real.sqrt (1 + a) := by
    linarith

  -- Square both sides.
  have h₁ : Real.sqrt (1 + a) ≥ 0 := by
    apply Real.sqrt_nonneg

  have h₂ : (Real.sqrt (1 + Real.sqrt (1 + a)))^2 = (6 - 2 * Real.sqrt (1 + a))^2 := by
    rw [this]

  rw [Real.sq_sqrt (by linarith)] at h₂
  rw [mul_pow, Real.sq_sqrt (by linarith), sub_mul, mul_assoc, mul_comm (6:ℝ), ← mul_assoc, ← mul_assoc] at h₂
  norm_num at h₂
  have : Real.sqrt (1 + a) = 4 + 2 * Real.sqrt (1 + a) := by
    linarith

  -- We have $\sqrt{1 + a} = 4$.
  have : Real.sqrt (1 + a) = 4 := by
    linarith

  -- Square both sides.
  apply_fun (·^2) at this
  rw [Real.sq_sqrt (by linarith)] at this
  norm_num at this
  linarith
```