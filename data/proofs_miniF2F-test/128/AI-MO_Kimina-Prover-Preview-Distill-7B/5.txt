-- We have $\sqrt{16+16a} = 4\sqrt{1+a}$.
  have : Real.sqrt (16 + 16 * a) = 4 * Real.sqrt (1 + a) := by
    rw [Real.sqrt_eq_iff_sq_eq] <;> nlinarith
    <;> ring_nf <;> nlinarith

  -- Hence, $\sqrt{4+\sqrt{16+16a}} = \sqrt{4+4\sqrt{1+a}}$.
  have : Real.sqrt (4 + Real.sqrt (16 + 16 * a)) = Real.sqrt (4 + 4 * Real.sqrt (1 + a)) := by
    rw [this]

  -- Rearrange to get: $$\sqrt{1+\sqrt{1+a}} = 6 - \sqrt{4+4\sqrt{1+a}}.$$
  have : Real.sqrt (1 + Real.sqrt (1 + a)) = 6 - Real.sqrt (4 + 4 * Real.sqrt (1 + a)) := by
    linarith

  -- Square both sides: $$1+\sqrt{1+a} = 36 - 12\sqrt{4+4\sqrt{1+a}} + 4+4\sqrt{1+a}.$$
  apply_fun (· ^ 2) at this
  ring_nf at this

  -- Simplify: $$12\sqrt{4+4\sqrt{1+a}} = 40 + 3\sqrt{1+a}.$$
  apply_fun (· + 12 * Real.sqrt (4 + 4 * Real.sqrt (1 + a))) at this
  ring_nf at this
  linarith


```