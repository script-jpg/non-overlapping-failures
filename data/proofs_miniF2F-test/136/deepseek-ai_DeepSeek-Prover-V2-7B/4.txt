have h₂ := h₁
    simp only [Set.preimage, Set.singleton_subset_iff, Set.mem_setOf_eq] at h₂
    have h₃ := h₂
    have h₄ : f (Real.cos (2 * Real.pi / 7)) = 0 := by simp_all
    have h₅ : f (Real.cos (4 * Real.pi / 7)) = 0 := by simp_all
    have h₆ : f (Real.cos (6 * Real.pi / 7)) = 0 := by simp_all
    simp only [h₀, mul_comm] at h₄ h₅ h₆
    have h₇ : Real.cos (2 * Real.pi / 7) + Real.cos (4 * Real.pi / 7) + Real.cos (6 * Real.pi / 7) = -a := by
      rw [← sub_eq_zero]
      have h₈ : Real.cos (2 * Real.pi / 7) + Real.cos (4 * Real.pi / 7) + Real.cos (6 * Real.pi / 7) =
        Real.cos (2 * Real.pi / 7) + Real.cos (4 * Real.pi / 7) + Real.cos (6 * Real.pi / 7) := by rfl
      rw [h₈]
      -- Use the fact that the sum of the cosines of these angles is -a
      <;> simp_all [Real.cos_add, Real.cos_sub, Real.cos_two_mul, Real.cos_three_mul]
      <;> ring_nf at *
      <;> nlinarith [Real.cos_le_one (2 * Real.pi / 7), Real.cos_le_one (4 * Real.pi / 7),
        Real.cos_le_one (6 * Real.pi / 7), Real.cos_le_one (Real.pi / 7), Real.cos_le_one (3 * Real.pi / 7),
        Real.cos_le_one (5 * Real.pi / 7)]
    have h₈ : Real.cos (2 * Real.pi / 7) * Real.cos (4 * Real.pi / 7) + Real.cos (4 * Real.pi / 7) * Real.cos (6 * Real.pi / 7) + Real.cos (6 * Real.pi / 7) * Real.cos (2 * Real.pi / 7) = b / 2 := by
      rw [← sub_eq_zero]
      have h₉ : Real.cos (2 * Real.pi / 7) * Real.cos (4 * Real.pi / 7) + Real.cos (4 * Real.pi / 7) * Real.cos (6 * Real.pi / 7) + Real.cos (6 * Real.pi / 7) * Real.cos (2 * Real.pi / 7) =
        Real.cos (2 * Real.pi / 7) * Real.cos (4 * Real.pi / 7) + Real.cos (4 * Real.pi / 7) * Real.cos (6 * Real.pi / 7) + Real.cos (6 * Real.pi / 7) * Real.cos (2 * Real.pi / 7) := by rfl
      rw [h₉]
      -- Use the product-to-sum identities to simplify the expression
      <;> simp_all [Real.cos_add, Real.cos_sub, Real.cos_two_mul, Real.cos_three_mul]
      <;> ring_nf at *
      <;> nlinarith [Real.cos_le_one (2 * Real.pi / 7), Real.cos_le_one (4 * Real.pi / 7),
        Real.cos_le_one (6 * Real.pi / 7), Real.cos_le_one (Real.pi / 7), Real.cos_le_one (3 * Real.pi / 7),
        Real.cos_le_one (5 * Real.pi / 7)]
    have h₉ : Real.cos (2 * Real.pi / 7) * Real.cos (4 * Real.pi / 7) * Real.cos (6 * Real