-- We will prove that the solution set is {0, π/2, π, 3π/2, 2π}.
  suffices S = {0, Real.pi / 2, Real.pi, 3 * Real.pi / 2, 2 * Real.pi} by
    rw [this]
    simp

  -- We will prove that the solution set is a subset of {0, π/2, π, 3π/2, 2π}.
  suffices S ⊆ {0, Real.pi / 2, Real.pi, 3 * Real.pi / 2, 2 * Real.pi} by
    -- It is easy to prove that {0, π/2, π, 3π/2, 2π} is a subset of the solution set.
    have : {0, Real.pi / 2, Real.pi, 3 * Real.pi / 2, 2 * Real.pi} ⊆ S := by
      intro x hx
      simp at hx
      rcases hx with (rfl | rfl | rfl | rfl | rfl)
      all_goals
        simp
        <;> try constructor
        <;> try (rw [this]; try linarith)
    -- So the solution set is exactly {0, π/2, π, 3π/2, 2π}.
    symm
    apply eq_of_subset_of_subset this
    apply Set.subset_iff_inter_eq_left.mpr
    apply inter_subset_right

  -- We will prove that {0, π/2, π, 3π/2, 2π} is a subset of the solution set.
  suffices {0, Real.pi / 2, Real.pi, 3 * Real.pi / 2, 2 * Real.pi} ⊆ S by
    intro x hx
    simp at hx
    simp [this]

  intro x hx
  simp at hx
  rcases hx with (rfl | rfl | rfl | rfl | rfl)
  all_goals
    simp
    <;> try constructor
    <;> try (rw [this]; try linarith)

  -- We have $\tan(2\cdot 0) = \tan(0) = 0$ and $\cos(0/2) = \cos(0) = 1$, so $0$ is a solution.
  · norm_num

  -- We have $\tan(2\cdot \pi/2) = \tan(\pi) = 0$ and $\cos((\pi/2)/2) = \cos(\pi/4) = \sqrt{2}/2$, so $\pi/2$ is not a solution.
  · exfalso
    have : Real.tan (2 * (Real.pi / 2)) = 0 := by
      rw [show 2 * (Real.pi / 2) = Real.pi by ring]
      exact Real.tan_pi
    rw [this] at this
    have : Real.cos (Real.pi / 2 / 2) = Real.sqrt 2 / 2 := by
      rw [show Real.pi / 2 / 2 = Real.pi / 4 by ring]
      exact Real.cos_pi_div_four
    rw [this] at this
    absurd this
    linarith

  -- We have $\tan(2\cdot \pi) = \tan(2\pi) = 0$ and $\cos((\pi)/2) = \cos(\pi/2) = 0$, so $\pi$ is a solution.
  · norm_num

  -- We have $\tan(2\cdot 3\pi/2) = \tan(3\pi) = 0$ and $\cos((3\pi/2)/2) = \cos(3\pi/4) = -\sqrt{2}/2$, so $3\pi/2$ is not a solution.
  · exfalso
    have : Real.tan (2 * (3 * Real.pi / 2)) = 0 := by
      rw [show 2 * (3 * Real.pi / 2) = 3 * Real.pi by ring]
      rw [show 3 * Real.pi = Real.pi + 2 * Real.pi by ring]
      rw [Real.tan_add_two_pi]
      exact Real.tan_pi
    rw [this] at this
    have : Real.cos (3 * Real.pi / 2 / 2) = - Real.sqrt 2 / 2 := by
      rw [show 3 * Real.pi / 2 / 2 = 3 * Real.pi / 4 by ring]
      have : 3 * Real.pi / 4 = Real.pi / 2 + Real.pi / 4 := by ring
      rw [this]
      rw [Real.cos_add]
      simp
      rw [Real.cos_pi_div_four, Real.sin_pi_div_four]
      ring
      rw [Real.sq_sqrt]
      linarith
    rw [this] at this
    absurd this
    linarith

  -- We have $\tan(2\cdot 2\pi) = \tan(4\pi) = 0$ and $\cos((2\pi)/2) = \cos(\pi) = -1$, so $2\pi$ is not a solution.
  · exfalso
    have : Real.tan (2 * (2 * Real.pi)) = 0 := by
      rw [show 2 * (2 * Real.pi) = 4 * Real.pi by ring]
      rw [show 4 * Real.pi = 2 * Real.pi + 2 * Real.pi by ring]
      rw [Real.tan_add_two_pi]
      exact Real.tan_two_pi]
    rw [this] at this
    have : Real.cos (2 * Real.pi / 2) = -1 := by
      rw [show 2 * Real.pi / 2 = Real.pi by ring]
      exact Real.cos_pi
    rw [this] at this
    absurd this
    linarith
```