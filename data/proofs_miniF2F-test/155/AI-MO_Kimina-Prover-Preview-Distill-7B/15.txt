-- Prove that $2 \pi \notin S$.
  have h₁ : 2 * Real.pi ∉ S := by
    rw [h₀]
    simp

    -- Prove that $2\tan(\pi/2)$ is undefined.
    have h₁ : Real.tan (2 * Real.pi / 2) ≠ Real.tan (2 * Real.pi / 2) := by
      have h₁ : 2 * Real.pi / 2 = Real.pi := by ring
      rw [h₁]
      have h₂ : Real.tan Real.pi ≠ 0 := by
        simp
      have h₃ : Real.tan Real.pi = 0 := by
        simp
      contradiction
    exact h₁

  -- Prove that $0 \in S$.
  have h₂ : 0 ∈ S := by
    rw [h₀]
    simp

  -- Prove that $S \subseteq \{\frac{\pi}{6}, \frac{\pi}{2}, \frac{5\pi}{6}, \frac{7\pi}{6}, \frac{3\pi}{2}\}$.
  have h₃ : ∀ x ∈ S, x ∈ ({π / 6, π / 2, 5 * π / 6, 7 * π / 6, 3 * π / 2} : Finset ℝ) := by
    intro x hx
    rcases hx with ⟨hx, hmin, hmax, heq⟩
    rw [h₀] at hx
    simp at hx

    -- Prove that $x \neq 2\pi$.
    have hneq : x ≠ 2 * Real.pi := by
      intro h
      exact h₁ h

    right

    cases' abs_cases (x - Real.pi / 2) with h₁ h₁
    · -- Case $x - \frac{\pi}{2} \geq 0$.
      cases' abs_cases (Real.tan (2 * x) - Real.cos (x / 2)) with h₂ h₂
      · -- Case $2\tan(x) - \cos(\frac{x}{2}) \geq 0$.
        apply sub_eq_zero_of_eq at heq
        have hneq : Real.cos (x / 2) ≠ 0 := by
          rw [Real.cos_eq_zero_iff] at h₂
          rcases h₂ with ⟨k, hk⟩
          simp [hk] at hmin hmax
          intro h
          linarith [Real.pi_pos]
        have h : 2 * Real.tan x - Real.cos (x / 2) = 0 := by
          rw [← heq]
          ring
        rw [sub_eq_zero] at h

        -- Prove that $\cos(\frac{x}{2}) \neq 0$.
        have hneq : Real.cos (x / 2) ≠ 0 := by
          intro h
          rw [Real.cos_eq_zero_iff] at h
          rcases h with ⟨k, hk⟩
          simp [hk] at hmin hmax
          intro h
          linarith [Real.pi_pos]
        have h₃ : Real.cos (x / 2) > 0 := by
          rcases abs_cases (x / 2) with h₁ h₁
          · -- Case $x / 2 \geq 0$.
            rw [← Real.cos_sq_add_sin_sq (x / 2)]
            nlinarith
          · -- Case $x / 2 < 0$.
            rw [← Real.cos_sq_add_sin_sq (x / 2)]
            nlinarith
        have h₄ : Real.cos (x / 2) ≠ 0 := by
          intro h
          rw [Real.cos_eq_zero_iff] at h
          rcases h with ⟨k, hk⟩
          simp [hk] at hmin hmax
          intro h
          linarith [Real.pi_pos]
        have h₅ : Real.cos (x / 2) * (2 * Real.tan x - Real.cos (x / 2)) = 0 := by
          rw [h]
          ring
        simp at h₅

        -- Prove that $\cos(\frac{x}{2}) \neq 0$.
        have hneq : Real.cos (x / 2) ≠ 0 := by
          intro h
          rw [Real.cos_eq_zero_iff] at h
          rcases h with ⟨k, hk⟩
          simp [hk] at hmin hmax
          intro h
          linarith [Real.pi_pos]
        have h₆ : Real.cos (x / 2) > 0 := by
          rcases abs_cases (x / 2) with h₁ h₁
          · -- Case $x / 2 \geq 0$.
            rw [← Real.cos_sq_add_sin_sq (x / 2)]
            nlinarith
          · -- Case $x / 2 < 0$.
            rw [← Real.cos_sq_add_sin_sq (x / 2)]
            nlinarith
        have h₇ : Real.cos (x / 2) * (2 * Real.tan x - Real.cos (x / 2)) > 0 := by
          apply mul_pos
          assumption
          linarith
        linarith

      · -- Case $2\tan(x) - \cos(\frac{x}{2}) < 0$.
        apply sub_eq_zero_of_eq at heq
        simp at heq
        have hneq : Real.cos (x / 2) ≠ 0 := by
          intro h
          rw [Real.cos_eq_zero_iff] at h
          rcases h with ⟨k, hk⟩
          simp [hk] at hmin hmax
          intro h
          linarith [Real.pi_pos]
        have h : Real.cos (x / 2) > 0 := by
          rcases abs_cases (x / 2) with h₁ h₁
          · -- Case $x / 2 \geq 0$.
            rw [← Real.cos_sq_add_sin_sq (x / 2)]
            nlinarith
          · -- Case $x / 2 < 0$.
            rw [← Real.cos_sq_add_sin_sq (x / 2)]
            nlinarith
        linarith

    · -- Case $x - \frac{\pi}{2} < 0$.
      cases' abs_cases (Real.tan (2 * x) - Real.cos (x / 2)) with h₂ h₂
      · -- Case $2\tan(x) - \cos(\frac{x}{2}) \geq 0$.
        apply sub_eq_zero_of_eq at heq
        simp at heq
        have hneq : Real.cos (x / 2) ≠ 0 := by
          intro h
          rw [Real.cos_eq_zero_iff] at h
          rcases h with ⟨k, hk⟩
          simp [hk] at hmin hmax
          intro h
          linarith [Real.pi_pos]
        have h : Real.cos (x / 2) > 0 := by
          rcases abs_cases (x / 2) with h₁ h₁
          · -- Case $x / 2 \geq 0$.
            rw [← Real.cos_sq_add_sin_sq (x / 2)]
            nlinarith
          · -- Case $x / 2 < 0$.
            rw [← Real.cos_sq_add_sin_sq (x / 2)]
            nlinarith
        linarith

      · -- Case $2\tan(x) - \cos(\frac{x}{2}) < 0$.
        apply sub_eq_zero_of_eq at heq
        simp at heq
        have hneq : Real.cos (x / 2) ≠ 0 := by
          intro h
          rw [Real.cos_eq_zero_iff] at h
          rcases h with ⟨k, hk⟩
          simp [hk] at hmin hmax
          intro h
          linarith [Real.pi_pos]
        have h : Real.cos (x / 2) > 0 := by
          rcases abs_cases (x / 2) with h₁ h₁
          · -- Case $x / 2 \geq 0$.
            rw [← Real.cos_sq_add_sin_sq (x / 2)]
            nlinarith
          · -- Case $x / 2 < 0$.
            rw [← Real.cos_sq_add_sin_sq (x / 2)]
            nlinarith
        linarith

    -- Prove that $x \neq 2\pi$.
    have hneq : x ≠ 2 * Real.pi := by
      intro h
      exact h₁ h

    -- Cases $x < 2\pi$ and $x > 0$.
    cases' lt_or_gt_of_ne hneq with h h
    · -- Case $x < 2\pi$.
      cases' abs_cases (x - Real.pi / 2) with h₁ h₁
      · -- Case $x - \frac{\pi}{2} \geq 0$.
        cases' abs_cases (Real.tan (2 * x) - Real.cos (x / 2)) with h₂ h₂
        · -- Case $2\tan(x) - \cos(\frac{x}{2}) \geq 0$.
          apply sub_eq_zero_of_eq at heq
          have hneq : Real.cos (x / 2) ≠ 0 := by
            rw [Real.cos_eq_zero_iff] at h₂
            rcases h₂ with ⟨k, hk⟩
            simp [hk] at hmin hmax
            intro h
            linarith [Real.pi_pos]
          have h : 2 * Real.tan x - Real.cos (x / 2) = 0 := by
            rw [← heq]
            ring
          rw [sub_eq_zero] at h

          -- Prove that $\cos(\frac{x}{2}) \neq 0$.
          have hneq : Real.cos (x / 2) ≠ 0 := by
            intro h
            rw [Real.cos_eq_zero_iff] at h
            rcases h with ⟨k, hk⟩
            simp [hk] at hmin hmax
            intro h
            linarith [Real.pi_pos]
          have h₃ : Real.cos (x / 2) > 0 := by
            rcases abs_cases (x / 2) with h₁ h₁
            · -- Case $x / 2 \geq 0$.
              rw [← Real.cos_sq_add_sin_sq (x / 2)]
              nlinarith
            · -- Case $x / 2 < 0$.
              rw [← Real.cos_sq_add_sin_sq (x / 2)]
              nlinarith
          have h₄ : Real.cos (x / 2) ≠ 0 := by
            intro h
            rw [Real.cos_eq_zero_iff] at h
            rcases h with ⟨k, hk⟩
            simp [hk] at hmin hmax
            intro h
            linarith [Real.pi_pos]
          have h₅ : Real.cos (x / 2) * (2 * Real.tan x - Real.cos (x / 2)) = 0 := by
            rw [h]
            ring
          simp at h₅

          -- Prove that $\cos(\frac{x}{2}) \neq 0$.
          have hneq : Real.cos (x / 2) ≠ 0 := by
            intro h
            rw [Real.cos_eq_zero_iff] at h
            rcases h with ⟨k, hk⟩
            simp [hk] at hmin hmax
            intro h
            linarith [Real.pi_pos]
          have h₆ : Real.cos (x / 2) > 0 := by
            rcases abs_cases (x / 2) with h₁ h₁
            · -- Case $x / 2 \geq 0$.
              rw [← Real.cos_sq_add_sin_sq (x / 2)]
              nlinarith
            · -- Case $x / 2 < 0$.
              rw [← Real.cos_sq_add_sin_sq (x / 2)]
              nlinarith
          have h₇ : Real.cos (x / 2) * (2 * Real.tan x - Real.cos (x / 2)) > 0 := by
            apply mul_pos
            assumption
            linarith
          linarith

        · -- Case $2\tan(x) - \cos(\frac{x}{2}) < 0$.
          apply sub_eq_zero_of_eq at heq
          simp at heq
          have hneq : Real.cos (x / 2) ≠ 0 := by
            intro h
            rw [Real.cos_eq_zero_iff] at h
            rcases h with ⟨k, hk⟩
            simp [hk] at hmin hmax
            intro h
            linarith [Real.pi_pos]
          have h : Real.cos (x / 2) > 0 := by
            rcases abs_cases (x / 2) with h₁ h₁
            · -- Case $x / 2 \geq 0$.
              rw [← Real.cos_sq_add_sin_sq (x / 2)]
              nlinarith
            · -- Case $x / 2 < 0$.
              rw [← Real.cos_sq_add_sin_sq (x / 2)]
              nlinarith
          linarith

      · -- Case $x - \frac{\pi}{2} < 0$.
        cases' abs_cases (Real.tan (2 * x) - Real.cos (x / 2)) with h₂ h₂
        · -- Case $2\tan(x) - \cos(\frac{x}{2}) \geq 0$.
          apply sub_eq_zero_of_eq at heq
          simp at heq
          have hneq : Real.cos (x / 2) ≠ 0 := by
            intro h
            rw [Real.cos_eq_zero_iff] at h
            rcases h with ⟨k, hk⟩
            simp [hk] at hmin hmax
            intro h
            linarith [Real.pi_pos]
          have h : Real.cos (x / 2) > 0 := by
            rcases abs_cases (x / 2) with h₁ h₁
            · -- Case $x / 2 \geq 0$.
              rw [← Real.cos_sq_add_sin_sq (x / 2)]
              nlinarith
            · -- Case $x / 2 < 0$.
              rw [← Real.cos_sq_add_sin_sq (x / 2)]
              nlinarith
          linarith

        · -- Case $2\tan(x) - \cos(\frac{x}{2}) < 0$.
          apply sub_eq_zero_of_eq at heq
          simp at heq
          have hneq : Real.cos (x / 2) ≠ 0 := by
            intro h
            rw [Real.cos_eq_zero_iff] at h
            rcases h with ⟨k, hk⟩
            simp [hk] at hmin hmax
            intro h
            linarith [Real.pi_pos]
          have h : Real.cos (x / 2) > 0 := by
            rcases abs_cases (x / 2) with h₁ h₁
            · -- Case $x / 2 \geq 0$.
              rw [← Real.cos_sq_add_sin_sq (x / 2)]
              nlinarith
            · -- Case $x / 2 < 0$.
              rw [← Real.cos_sq_add_sin_sq (x / 2)]
              nlinarith
          linarith

    · -- Case $x > 0$.
      cases' abs_cases (x - Real.pi / 2) with h₁ h₁
      · -- Case $x - \frac{\pi}{2} \geq 0$.
        cases' abs_cases (Real.tan (2 * x) - Real.cos (x / 2)) with h₂ h₂
        · -- Case $2\tan(x) - \cos(\frac{x}{2}) \geq 0$.
          apply sub_eq_zero_of_eq at heq
          have hneq : Real.cos (x / 2) ≠ 0 := by
            rw [Real.cos_eq_zero_iff] at h₂
            rcases h₂ with ⟨k, hk⟩
            simp [hk] at hmin hmax
            intro h
            linarith [Real.pi_pos]
          have h : 2 * Real.tan x - Real.cos (x / 2) = 0 := by
            rw [← heq]
            ring
          rw [sub_eq_zero] at h

          -- Prove that $\cos(\frac{x}{2}) \neq 0$.
          have hneq : Real.cos (x / 2) ≠ 0 := by
            intro h
            rw [Real.cos_eq_zero_iff] at h
            rcases h with ⟨k, hk⟩
            simp [hk] at hmin hmax
            intro h
            linarith [Real.pi_pos]
          have h₃ : Real.cos (x / 2) > 0 := by
            rcases abs_cases (x / 2) with h₁ h₁
            · -- Case $x / 2 \geq 0$.
              rw [← Real.cos_sq_add_sin_sq (x / 2)]
              nlinarith
            · -- Case $x / 2 < 0$.
              rw [← Real.cos_sq_add_sin_sq (x / 2)]
              nlinarith
          have h₄ : Real.cos (x / 2) ≠ 0 := by
            intro h
            rw [Real.cos_eq_zero_iff] at h
            rcases h with ⟨k, hk⟩
            simp [hk] at hmin hmax
            intro h
            linarith [Real.pi_pos]
          have h₅ : Real.cos (x / 2) * (2 * Real.tan x - Real.cos (x / 2)) = 0 := by
            rw [h]
            ring
          simp at h₅

          -- Prove that $\cos(\frac{x}{2}) \neq 0$.
          have hneq : Real.cos (x / 2) ≠ 0 := by
            intro h
            rw [Real