have step1 : S.card = 5 := by
    have h₁ : S = {0, Real.pi / 2, Real.pi, (3 * Real.pi) / 2, 2 * Real.pi} := by
      ext x
      simp only [h₀, Finset.mem_insert, Finset.mem_singleton, eq_self_iff_true, and_true]
      constructor
      · intro h
        have h₂ : 0 ≤ x := h.1
        have h₃ : x ≤ 2 * Real.pi := h.2.1
        have h₄ : Real.tan (2 * x) = Real.cos (x / 2) := h.2.2
        have h₆ : x = 0 ∨ x = Real.pi / 2 ∨ x = Real.pi ∨ x = (3 * Real.pi) / 2 ∨ x = 2 * Real.pi := by
          have h₆₀ : Real.tan (2 * x) = Real.cos (x / 2) := h₄
          have h₆₁ : Real.tan (2 * x) = Real.sin (2 * x) / Real.cos (2 * x) := by rw [Real.tan_eq_sin_div_cos]
          rw [h₆₁] at h₆₀
          have h₆₂ : Real.cos (x / 2) ≠ 0 ∨ Real.cos (x / 2) = 0 := by by_cases h : Real.cos (x / 2) = 0 <;> [right; left] <;> simp_all
          cases h₆₂ with
          | inl h₆₃ =>
            have h₆₄ : Real.sin (2 * x) / Real.cos (2 * x) = Real.cos (x / 2) := by linarith
            have h₆₅ : Real.sin (2 * x) = Real.cos (2 * x) * Real.cos (x / 2) := by
              field_simp [h₆₃] at h₆₄ ⊢ <;> nlinarith
            have h₆₆ : Real.sin (2 * x) = 2 * Real.sin (x) * Real.cos (x) := by rw [Real.sin_two_mul]
            rw [h₆₆] at h₆₅
            have h₆₇ : 2 * Real.sin (x) * Real.cos (x) = Real.cos (2 * x) * Real.cos (x / 2) := by linarith
            have h₆₈ : Real.cos (2 * x) = 2 * Real.cos (x) ^ 2 - 1 := by rw [Real.cos_two_mul]
            rw [h₆₈] at h₆₇
            have h₆₉ : 2 * Real.sin (x) * Real.cos (x) = (2 * Real.cos (x) ^ 2 - 1) * Real.cos (x / 2) := by linarith
            have h₇₀ : x ≤ 2 * Real.pi := by linarith
            have h₇₁ : 0 ≤ x := by linarith
            have h₇₂ : x = 0 ∨ x = Real.pi / 2 ∨ x = Real.pi ∨ x = (3 * Real.pi) / 2 ∨ x = 2 * Real.pi := by
              by_contra! h₇₃
              have h₇₄ : x > 0 := by
                by_contra h₇₅
                have h₇₆ : x = 0 := by linarith
                simp_all
              have h₇₅ : x < 2 * Real.pi := by
                by_contra h₇₆
                have h₇₇ : x ≥ 2 * Real.pi := by linarith
                have h₇₈ : x = 2 * Real.pi := by linarith
                simp_all
              have h₇₆ : Real.sin (x) ≥ 0 := by
                apply Real.sin_nonneg_of_mem