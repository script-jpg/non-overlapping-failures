-- We show that $2^k \equiv 2^{k \bmod 3}$ \pmod{7}.
  have h : ∀ k, 2 ^ k % 7 = 2 ^ (k % 3) % 7 := by
    intro k
    rw [show 2 ^ k = 1 + (2 ^ k - 1) by omega, show 7 = 1 + (7 - 1) by omega]
    have : 2 ^ (k % 3) % (7 - 1) = (2 ^ k - 1) / (2 ^ (k % 3) - 1) := by
      zify
      ring_nf
      rw [Int.mul_ediv_cancel_right, sub_dvd_pow_sub_pow (by omega)]
      apply Nat.one_le_pow
      omega
    rw [one_pow] at this
    convert this using 1
    apply @Int.ModEq.pow_card_sub_one_eq_one _ (by norm_num) (by norm_num)
    unfold Nat.ModEq
    rw [Int.subNatNat_of_le]
    apply Nat.one_le_pow
    omega
    rw [show 7 - 1 = 1 + (7 - 1 - 1) by omega, show 2 ^ k - 1 = 1 + (2 ^ k - 1 - 1) by omega]
    have : (2 ^ (k % 3) - 1) / (2 ^ (k % 3) - 1) = 1 := by
      apply Nat.div_self
      omega
    rw [this]
    omega

  -- Using the above, we simplify $2^k \bmod 7$ for $k = 0, 1, 2, \dots, 100$.
  have h' : ∀ k, 2 ^ k % 7 = if k % 3 = 0 then 1 else if k % 3 = 1 then 2 else 4 := by
    intro k
    rw [h k]
    rw [show 2 ^ (k % 3) % 7 = 2 ^ (k % 3) by omega]
    have : k % 3 = 0 ∨ k % 3 = 1 ∨ k % 3 = 2 := by omega
    rcases this with (h | h | h)
    · simp [h]
    · simp [h]
    · rw [show k % 3 = 2 by omega, show 2 ^ 2 = 4 by omega]

  -- Now, using this, we simplify the sum $\sum_{k=0}^{100} 2^k \bmod 7$.
  have h'' : (∑ k in Finset.range 101, 2 ^ k) % 7 = 3 := by
    have : 101 = 3 * 33 + 2 := by omega
    rw [this]
    rw [Finset.sum_range_add, Finset.sum_range_add, Finset.sum_range_add, Finset.sum_range_add]
    rw [Finset.sum_range_succ]
    rw [Finset.sum_range_succ]
    simp
    have : ∑ k ∈ Finset.range 33, (∑ i ∈ Finset.range 3, (2 ^ (3 * k + i) % 7)) = 33 * (1 + 2 + 4) % 7 := by
      simp [Finset.sum_range_succ, Finset.sum_range_succ, Finset.sum_range_succ]
      simp [h']
      ring_nf
    rw [this]
    simp
    omega

  -- And that's it!
  exact h''

```