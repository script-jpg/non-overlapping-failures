have h₃ : Real.sqrt (3 - x) - Real.sqrt (x + 1) > 0 := by
    calc
      Real.sqrt (3 - x) - Real.sqrt (x + 1) > 1 / 2 := by exact h₂
      _ > 0 := by norm_num

  have h₄ : 3 - x ≥ 0 := by
    exact sq_nonneg (Real.sqrt (3 - x) - Real.sqrt (x + 1)) / 2 + Real.sqrt (3 - x) - Real.sqrt (x + 1) + x - 3

  have h₅ : x + 1 ≥ 0 := by
    calc
      x + 1 = (Real.sqrt (3 - x) - Real.sqrt (x + 1)) ^ 2 := by rw [sub_sq]; rw [Real.sq_sqrt h₃, Real.sq_sqrt h₁]; linarith
      _ ≥ 0 := by positivity

  have h₆ : Real.sqrt (3 - x) > Real.sqrt (x + 1) := by
    linarith [Real.sqrt_nonneg (3 - x), Real.sqrt_nonneg (x + 1)]

  have h₇ : Real.sqrt (3 - x) - Real.sqrt (x + 1) < (Real.sqrt (3 - x) - Real.sqrt (x + 1)) ^ 2 := by
    apply sub_lt_sq
    all_goals
      apply Real.sqrt_nonneg
      linarith

  have h₈ : 0 < Real.sqrt (3 - x) := by
    linarith [Real.sqrt_nonneg (x + 1)]

  have h₉ : 2 * Real.sqrt (3 - x) < 1 + 2 * Real.sqrt (3 - x) - 2 * Real.sqrt (x + 1) := by
    linarith [h₆, h₈]

  have h₁₀ : 2 * Real.sqrt (3 - x) - 2 * Real.sqrt (x + 1) < (Real.sqrt (3 - x) - Real.sqrt (x + 1)) ^ 2 := by
    linarith [h₆, h₈]

  have h₁₁ : 0 < Real.sqrt (x + 1) := by
    by_contra! h₁₁
    have : Real.sqrt (x + 1) = 0 := by linarith
    rw [this] at h₆
    simp at h₆
    linarith

  have h₁₂ : 1 - Real.sqrt 31 / 8 > -1 := by
    have : 8 < Real.sqrt 31 := by
      rw [Real.lt_sqrt (by norm_num)]
      norm_num
    linarith

  constructor
  · -- Show that -1 ≤ x.
    by_contra! h
    have : x < -1 := by linarith
    have h₁₃ : x + 1 < 0 := by linarith
    have : Real.sqrt (x + 1) < 0 := by
      apply (Real.sqrt_neg_iff (by linarith)).mpr
      linarith
    have : 0 < Real.sqrt (3 - x) := by
      linarith [Real.sqrt_nonneg (x + 1)]
    have : 0 < Real.sqrt (3 - x) - Real.sqrt (x + 1) := by linarith
    have : (Real.sqrt (3 - x) - Real.sqrt (x + 1)) ^ 2 > 0 := by positivity
    have : (Real.sqrt (3 - x) - Real.sqrt (x + 1)) ^ 2 = (Real.sqrt (3 - x)) ^ 2 - 2 * Real.sqrt (3 - x) * Real.sqrt (x + 1) + (Real.sqrt (x + 1)) ^ 2 := by ring
    have : (Real.sqrt (3 - x)) ^ 2 - 2 * Real.sqrt (3 - x) * Real.sqrt (x + 1) + (Real.sqrt (x + 1)) ^ 2 > 0 := by linarith
    have h₁₄ : (Real.sqrt (3 - x)) ^ 2 = 3 - x := by
      rw [Real.sq_sqrt]
      linarith
    have h₁₅ : (Real.sqrt (x + 1)) ^ 2 = x + 1 := by
      rw [Real.sq_sqrt]
      linarith
    have : 3 - x - 2 * Real.sqrt (3 - x) * Real.sqrt (x + 1) + x + 1 > 0 := by linarith
    have : 4 - 2 * Real.sqrt (3 - x) * Real.sqrt (x + 1) > 0 := by linarith
    have : 2 * Real.sqrt (3 - x) * Real.sqrt (x + 1) < 4 := by linarith
    have : Real.sqrt (3 - x) * Real.sqrt (x + 1) < 2 := by linarith
    have h₁₆ : Real.sqrt (3 - x) * Real.sqrt (x + 1) = Real.sqrt (3 - x) * Real.sqrt (x + 1) := by rfl
    have h₁₇ : ((3 - x) * (x + 1)) < (Real.sqrt (3 - x) * Real.sqrt (x + 1)) ^ 2 := by
      rw [←h₁₆]
      apply sq_lt_sq'
      all_goals
        positivity
    have h₁₈ : (Real.sqrt ((3 - x) * (x + 1))) ^ 2 = (Real.sqrt (3 - x)) ^ 2 * (Real.sqrt (x + 1)) ^ 2 := by
      rw [Real.sq_sqrt (by positivity)]
      rw [Real.sq_sqrt (by linarith)]
      rw [Real.sq_sqrt (by linarith)]
    have h₁₉ : ((3 - x) * (x + 1)) = (Real.sqrt ((3 - x) * (x + 1))) ^ 2 := by
      rw [Real.sq_sqrt (by positivity)]
    have h₂₀ : (Real.sqrt (3 - x)) ^ 2 * (Real.sqrt (x + 1)) ^ 2 = (Real.sqrt (3 - x) * Real.sqrt (x + 1)) ^ 2 := by
      rw [mul_pow]
    rw [h₁₈, h₁₉] at h₁₇
    rw [h₂₀] at h₁₇
    have h₂₁ : (Real.sqrt ((3 - x) * (x + 1))) ^ 2 < 4 := by
      linarith
    rw [Real.sq_sqrt (by positivity)] at h₂₁
    have h₂₂ : (3 - x) * (x + 1) < 4 := by
      linarith
    have h₂₃ : 3 * x + 3 - (3 - x) * (x + 1) > 0 := by
      calc
        3 * x + 3 - (3 - x) * (x + 1) = -x ^ 2 - 1 := by ring
        _ > 0 := by nlinarith
    have h₂₄ : 3 * x + 3 - (3 - x) * (x + 1) = -x ^ 2 - 1 := by ring
    linarith
  · -- Show that x < 1 - √31/8.
    have h₈' : Real.sqrt (3 - x) - Real.sqrt (x + 1) > 0 := by
      calc
        Real.sqrt (3 - x) - Real.sqrt (x + 1) > 1 / 2 := by exact h₂
        _ > 0 := by norm_num
    have h₁₇ : 1 - Real.sqrt 31 / 8 > -1 := by
      have : 8 < Real.sqrt 31 := by
        rw [Real.lt_sqrt (by norm_num)]
        norm_num
      linarith
    have h₁₈ : Real.sqrt (3 - x) > Real.sqrt (x + 1) := by
      linarith [Real.sqrt_nonneg (3 - x), Real.sqrt_nonneg (x + 1)]
    have h₁₉ : Real.sqrt (3 - x) * Real.sqrt (x + 1) < 2 := by
      have h₁₉ : (Real.sqrt (3 - x) - Real.sqrt (x + 1)) ^ 2 < (Real.sqrt (3 - x) - Real.sqrt (x + 1)) ^ 2 := by
        linarith [h₈', h₁₇]
      linarith
    have h₂₀ : 0 < Real.sqrt (x + 1) := by
      by_contra! h₂₀
      have : Real.sqrt (x + 1) < 0 := by linarith
      have : 0 < Real.sqrt (3 - x) := by
        linarith [Real.sqrt_nonneg (x + 1)]
      have : 0 < Real.sqrt (3 - x) - Real.sqrt (x + 1) := by linarith
      have : (Real.sqrt (3 - x) - Real.sqrt (x + 1)) ^ 2 > 0 := by positivity
      have : (Real.sqrt (3 - x) - Real.sqrt (x + 1)) ^ 2 = (Real.sqrt (3 - x)) ^ 2 - 2 * Real.sqrt (3 - x) * Real.sqrt (x + 1) + (Real.sqrt (x + 1)) ^ 2 := by ring
      have : (Real.sqrt (3 - x)) ^ 2 - 2 * Real.sqrt (3 - x) * Real.sqrt (x + 1) + (Real.sqrt (x + 1)) ^ 2 > 0 := by linarith
      have h₂₁ : (Real.sqrt (3 - x)) ^ 2 = 3 - x := by
        rw [Real.sq_sqrt]
        linarith
      have h₂₂ : (Real.sqrt (x + 1)) ^ 2 = x + 1 := by
        rw [Real.sq_sqrt]
        linarith
      have : 3 - x - 2 * Real.sqrt (3 - x) * Real.sqrt (x + 1) + x + 1 > 0 := by linarith
      have : 4 - 2 * Real.sqrt (3 - x) * Real.sqrt (x + 1) > 0 := by linarith
      have : 2 * Real.sqrt (3 - x) * Real.sqrt (x + 1) < 4 := by linarith
      have : Real.sqrt (3 - x) * Real.sqrt (x + 1) < 2 := by linarith
      linarith
    have h₂₁ : (Real.sqrt (3 - x) - Real.sqrt (x + 1)) ^ 2 > 0 := by
      apply sq_pos_of_pos
      linarith [Real.sqrt_nonneg (3 - x), Real.sqrt_nonneg (x + 1)]
    have h₂₂ : (Real.sqrt (3 - x) - Real.sqrt (x + 1)) ^ 2 = (Real.sqrt (3 - x)) ^ 2 - 2 * Real.sqrt (3 - x) * Real.sqrt (x + 1) + (Real.sqrt (x + 1)) ^ 2 := by ring
    have h₂₃ : (Real.sqrt (3 - x)) ^ 2 - 2 * Real.sqrt (3 - x) * Real.sqrt (x + 1) + (Real.sqrt (x + 1)) ^ 2 > 0 := by linarith
    have h₂₄ : (Real.sqrt (3 - x)) ^ 2 = 3 - x := by
      rw [Real.sq_sqrt]
      linarith
    have h₂₅ : (Real.sqrt (x + 1)) ^ 2 = x + 1 := by
      rw [Real.sq_sqrt]
      linarith
    have : 3 - x - 2 * Real.sqrt (3 - x) * Real.sqrt (x + 1) + x + 1 > 0 := by linarith
    have : 4 - 2 * Real.sqrt (3 - x) * Real.sqrt (x + 1) > 0 := by linarith
    have : 2 * Real.sqrt (3 - x) * Real.sqrt (x + 1) < 4 := by linarith
    have : Real.sqrt (3 - x) * Real.sqrt (x + 1) < 2 := by linarith
    have h₂₆ : Real.sqrt (3 - x) * Real.sqrt (x + 1) < Real.sqrt 31 / 4 + Real.sqrt (3 - x) * Real.sqrt (x + 1) := by
      linarith [h₁₉]
    have h₂₇ : Real.sqrt 31 / 4 > 0 := by
      positivity
    have h₂₈ : 1 - Real.sqrt 31 / 8 < 1 - Real.sqrt 31 / 4 + Real.sqrt (3 - x) - Real.sqrt (x + 1) := by
      linarith
    have : 1 - Real.sqrt 31 / 4 + Real.sqrt (3 - x) - Real.sqrt (x + 1) < 1 - Real.sqrt 31 / 4 + Real.sqrt (3 - x) := by
      linarith [h₈']
    linarith

```