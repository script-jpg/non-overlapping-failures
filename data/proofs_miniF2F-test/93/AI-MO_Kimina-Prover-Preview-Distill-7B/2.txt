-- Some bounds to help later. Need to show later that $a \le 6$ and $a \ge 3$.
  have h₄ : a < 16 := by
    -- bound using amc12b_2002_p7
    have : a * (a + 1) * (a + 2) < 8 * (a + (a + 1) + (a + 2)) := by
      -- expand and simplify
      ring_nf
      apply lt_of_lt_of_le
      have : a ^ 2 < 4 * a + 3 := by
        rw [pow_two]
        apply lt_of_lt_of_le
        refine Nat.lt_succ_mul?_
        exact Nat.lt_succ_iff.mpr h₀
        refine Nat.le_of_lt_succ?_
        exact Nat.lt_succ_iff.mpr h₀
      linarith
      simp
      trans 1
     . exact Nat.zero_lt_succ 0
     . exact Nat.lt_succ_iff.mpr h₀
    -- bound
    have : a * (a + 1) * (a + 2) < 16 * a := by
      specialize this
      rw [mul_assoc]
      apply Nat.mul_lt_mul_left
      exact this
    -- simp
    apply lt_of_lt_of_le
   . exact Nat.lt_mul_of_pos_right (a * (a + 1)) 2
   . intro b
      simp [b] at this
      exact Nat.le_of_lt_succ this
  have h₅ : a ≥ 3 := by
    -- bound using amc12b_2002_p7
    have : a * (a + 1) * (a + 2) ≥ 8 * (a + (a + 1) + (a + 2)) := by
      -- expand and simplify
      ring_nf
      apply ge_of_le
      have : a ^ 2 ≥ 4 * a + 3 := by
        rw [pow_two]
        apply le_of_lt
        refine Nat.lt_succ_mul?_
        exact Nat.lt_succ_iff.mpr h₀
        refine Nat.le_of_lt_succ?_
        exact Nat.lt_succ_iff.mpr h₀
      linarith
      simp
    -- bound
    have : a * (a + 1) * (a + 2) ≥ 24 * a := by
      specialize this
      rw [mul_assoc]
      apply Nat.mul_le_mul_left
      exact this
    -- simp
    rw [mul_assoc] at this
    apply le_of_le_of_lt
   . exact Nat.le_mul_of_pos_right a (1 + 1)
   . specialize h₄ a (by exact Nat.lt_succ_iff.mpr h₀)
      rw [mul_assoc] at h₄
      apply lt_of_mul_lt_mul_right at h₄
      exact h₄

  have h₆ : a = 3 ∨ a = 4 := by
    -- bound using amc12b_2002_p7
    have : a * (a + 1) * (a + 2) = 8 * (a + (a + 1) + (a + 2)) := by
      -- expand and simplify
      ring_nf
      rw [h₁, h₂] at h₃
      exact h₃
    -- cancel
    have : a * (a + 1) * (a + 2) - (8 * (a + (a + 1) + (a + 2))) = 0 := by exact Nat.eq_sub_of_add_eq h₃
    have : (a - 3) * (a - 4) = 0 := by
      calc
        (a - 3) * (a - 4)
          = (a * (a + 1) * (a + 2) - (8 * (a + (a + 1) + (a + 2)))) / 8 := by
            rw [Nat.mul_sub, Nat.mul_sub, Nat.mul_add, Nat.mul_add, Nat.add_mul, Nat.add_mul,
              Nat.sub_mul, Nat.sub_mul, Nat.mul_comm, Nat.mul_comm]
            ring_nf
            rw [add_assoc, add_assoc, ← mul_assoc, mul_assoc 2, mul_assoc 2]
            congr
            rw [← mul_assoc, mul_assoc 3, mul_assoc 3]
            congr
            rw [mul_assoc 4]
            get-hyp
            rw [← mul_assoc, mul_assoc 5, mul_assoc 5]
            rw [← mul_assoc, mul_assoc 6, mul_assoc 6]
            rw [mul_assoc]
            rw [mul_assoc]
            rw [mul_assoc]
            rw [mul_assoc]
            rw [mul_assoc]
            rw [mul_assoc]
            rw [mul_assoc]
            rw [mul_assoc]
            omega
          _ = 0 / 8 := by rw [this]
          _ = 0 := by simp
    -- simp
    simp at this
    cases this <;> simp

  -- Now it is easy to show that the sum of the squares is 77.
  rcases h₆ with h₆ | h₆
 . rw [h₆] at h₁ h₂ h₃
    -- simplify
    rw [h₁, h₂] at h₃
    ring_nf at h₃
    rw [h₆, h₁, h₂]
    norm_num
 . rw [h₆] at h₁ h₂ h₃
    -- simplify
    rw [h₁, h₂] at h₃
    ring_nf at h₃
    rw [h₆, h₁, h₂]
    norm_num
```