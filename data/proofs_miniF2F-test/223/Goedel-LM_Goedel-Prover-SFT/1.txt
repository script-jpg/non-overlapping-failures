/-
  Given a real number \( x \), we need to show that if \( |x-1| + |x| + |x+1| = x + 2 \), then \( 0 \leq x \leq 1 \). We will consider different cases based on the signs of \( x-1 \), \( x \), and \( x+1 \). For each case, we will simplify the absolute values and solve the resulting equations.
  1. **Case 1**: \( x-1 \geq 0 \), \( x \geq 0 \), and \( x+1 \geq 0 \).
     - This implies \( x \geq 1 \), \( x \geq 0 \), and \( x \geq -1 \).
     - The equation simplifies to \( (x-1) + x + (x+1) = x + 2 \), which reduces to \( 3x = x + 2 \).
     - Solving for \( x \), we get \( x = 1 \).
  2. **Case 2**: \( x-1 \geq 0 \), \( x \geq 0 \), and \( x+1 < 0 \).
     - This implies \( x \geq 1 \), \( x \geq 0 \), and \( x < -1 \).
     - The equation simplifies to \( (x-1) + x + (-(x+1)) = x + 2 \), which reduces to \( x - 1 + x - x - 1 = x + 2 \).
     - Solving for \( x \), we get \( x = 1 \).
  3. **Case 3**: \( x-1 \geq 0 \), \( x < 0 \), and \( x+1 \geq 0 \).
     - This implies \( x \geq 1 \), \( x < 0 \), and \( x \geq -1 \).
     - The equation simplifies to \( (x-1) + x + (x+1) = x + 2 \), which reduces to \( 3x = x + 2 \).
     - Solving for \( x \), we get \( x = 1 \).
  4. **Case 4**: \( x-1 \geq 0 \), \( x < 0 \), and \( x+1 < 0 \).
     - This implies \( x \geq 1 \), \( x < 0 \), and \( x < -1 \).
     - The equation simplifies to \( (x-1) + x + (-(x+1)) = x + 2 \), which reduces to \( x - 1 + x - x - 1 = x + 2 \).
     - Solving for \( x \), we get \( x = 1 \).
  5. **Case 5**: \( x-1 < 0 \), \( x \geq 0 \), and \( x+1 \geq 0 \).
     - This implies \( x < 1 \), \( x \geq 0 \), and \( x \geq -1 \).
     - The equation simplifies to \( (-(x-1)) + x + (x+1) = x + 2 \), which reduces to \( -x + 1 + x + x + 1 = x + 2 \).
     - Solving for \( x \), we get \( x = 1 \).
  6. **Case 6**: \( x-1 < 0 \), \( x \geq 0 \), and \( x+1 < 0 \).
     - This implies \( x < 1 \), \( x \geq 0 \), and \( x < -1 \).
     - The equation simplifies to \( (-(x-1)) + x + (-(x+1)) = x + 2 \), which reduces to \( -x + 1 + x - x - 1 = x + 2 \).
     - Solving for \( x \), we get \( x = 1 \).
  7. **Case 7**: \( x-1 < 0 \), \( x < 0 \), and \( x+1 \geq 0 \).
     - This implies \( x < 1 \), \( x < 0 \), and \( x \geq -1 \).
     - The equation simplifies to \( (-(x-1)) + x + (x+1) = x + 2 \), which reduces to \( -x + 1 + x + x + 1 = x + 2 \).
     - Solving for \( x \), we get \( x = 1 \).
  8. **Case 8**: \( x-1 < 0 \), \( x < 0 \), and \( x+1 < 0 \).
     - This implies \( x < 1 \), \( x < 0 \), and \( x < -1 \).
     - The equation simplifies to \( (-(x-1)) + x + (-(x+1)) = x + 2 \), which reduces to \( -x + 1 + x - x - 1 = x + 2 \).
     - Solving for \( x \), we get \( x = 1 \).
  In all cases, we find that \( x = 1 \). However, since \( x \) must satisfy \( 0 \leq x \leq 1 \), the only consistent solution is \( 0 \leq x \leq 1 \).
  -/
  constructor
  -- We need to prove both 0 ≤ x and x ≤ 1.
  case left =>
    -- Prove 0 ≤ x.
    cases' le_total 0 (x - 1) with h₀ h₀ <;>
      cases' le_total 0 x with h₁ h₁ <;>
        cases' le_total 0 (x + 1) with h₂ h₂ <;>
          -- Simplify the absolute values based on the signs of x-1, x, and x+1.
          simp_all [abs_of_nonneg, abs_of_nonpos, le_of_lt] <;>
            -- Solve the resulting equations using linear arithmetic.
            nlinarith
  case right =>
    -- Prove x ≤ 1.
    cases' le_total 0 (x - 1) with h₀ h₀ <;>
      cases' le_total 0 x with h₁ h₁ <;>
        cases' le_total 0 (x + 1) with h₂ h₂ <;>
          -- Simplify the absolute values based on the signs of x-1, x, and x+1.
          simp_all [abs_of_nonneg, abs_of_nonpos, le_of_lt] <;>
            -- Solve the resulting equations using linear arithmetic.
            nlinarith
```