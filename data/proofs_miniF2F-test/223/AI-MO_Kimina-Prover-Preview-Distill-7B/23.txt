-- $x = x$
  have hx_eq : x = x := by rfl

  -- $x - 1 \leq 0$
  have hxm1_le_0 : x - 1 ≤ 0 := by
    calc
      _ = -(x + 1) + 2 * x := by ring
      _ ≤ -(x + 1) + 2 * 1 := by
        apply mul_le_mul
        apply hx_eq.le
        apply le_of_lt
        apply lt_add_neg
        apply lt_of_le
        apply abs_nonneg
        apply le_of_eq
        apply abs_eq_self.mpr
        apply le_of_max_le_left
        apply abs_le_max_left
        apply one_le_abs
        apply le_of_max_le_right
        apply abs_le_max_right
      _ = _ := by ring

  -- $x - 1 \geq 0$
  have hxm1_ge_0 : x - 1 ≥ 0 := by
    calc
      _ = -abs (x - 1) + 2 * x := by
        group
        ring
      _ ≥ -abs (x - 1) + 2 * 0 := by
        apply add_le_add_left
        apply mul_nonneg
        apply le_of_lt
        apply lt_add_neg
        apply lt_of_le
        apply abs_nonneg
        apply le_of_eq
        apply abs_eq_neg_self.mpr
        apply le_of_max_le_right
        apply abs_le_max_right
      _ = _ := by group; ring

  -- $x \leq 0$
  have hx_le_0 : x ≤ 0 := by
    calc
      _ = -(x + 1) + 2 * (x + 1) - 2 := by ring
      _ ≤ -(x + 1) + 2 * 0 - 2 := by
        apply sub_le_sub_right
        apply sub_le_sub_left
        apply mul_le_mul
        apply hxm1_le_0.le
        apply le_of_lt
        apply lt_add_neg
        apply lt_of_le
        apply abs_nonneg
        apply le_of_eq
        apply abs_eq_self.mpr
        apply le_of_max_le_left
        apply abs_le_max_left
        apply one_le_abs
        apply le_of_max_le_right
        apply abs_le_max_right
      _ = _ := by ring

  -- $x \geq 0$
  have hx_ge_0 : x ≥ 0 := by
    calc
      _ = abs (x - 1) - 2 * x + 2 := by
        group
        ring
      _ ≥ abs (x - 1) - 2 * 0 + 2 := by
        apply sub_add_le_sub_add
        apply sub_le_sub_left
        apply mul_le_mul
        apply hx_le_0.le
        apply le_of_lt
        apply lt_add_neg
        apply lt_of_le
        apply abs_nonneg
        apply le_of_eq
        apply abs_eq_neg_self.mpr
        apply le_of_max_le_right
        apply abs_le_max_right
      _ = _ := by group; ring

  -- $x = 0$
  have hx_eq_0 : x = 0 := by
    apply eq_of_le_of_le
    apply hx_le_0
    apply hx_ge_0

  -- $0 \leq x \leq 1$
  constructor
  all_goals
  apply le_trans
  apply hx_eq_0.le
  norm_num

```