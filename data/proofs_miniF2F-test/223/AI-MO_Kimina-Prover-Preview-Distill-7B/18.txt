-- set $-1$, $0$ and $1$ as the critical points
  have h₁ : abs (x - 1) = abs x + 1 - 2 * x := by
    by_cases h : x ≥ 1
    · -- when $x \geq 1$
      rw [abs_of_nonneg (show x - 1 ≥ 0 by linarith only [h]), abs_of_nonneg (show x ≥ 0 by linarith only [h])]
      linarith only [h]
    · -- when $x < 1$
      by_cases h' : x ≥ 0
      · -- when $0 \leq x < 1$
        rw [abs_of_nonpos (show x - 1 ≤ 0 by linarith only [h]), abs_of_nonneg (show x ≥ 0 by linarith only [h'])]
        linarith only [h]
      · -- when $x < 0$
        rw [abs_of_nonpos (show x - 1 ≤ 0 by linarith only [h]), abs_of_nonpos (show x ≤ 0 by linarith only [h'])]
        linarith only [h]

  have h₂ : abs (x + 1) = 2 * x + 1 := by
    by_cases h : x ≥ -1
    · -- when $x \geq -1$
      rw [abs_of_nonneg (show x + 1 ≥ 0 by linarith only [h])]
      linarith only [h]
    · -- when $x < -1$
      rw [abs_of_nonpos (show x + 1 ≤ 0 by linarith only [h])]
      linarith only [h]

  -- combine $h₁$ and $h₂$
  rw [h₁, h₂] at h₀
  ring_nf at h₀

  -- show that $0 \leq x$
  have h₃ : 0 ≤ x := by
    by_contra! h
    -- if $x < 0$, then $x + 2 \leq 0$
    have : x + 2 ≤ 0 := by linarith only [h]
    -- which is impossible
    linarith only [this, h₀]

  -- show that $x \leq 1$
  have h₄ : x ≤ 1 := by
    by_contra! h
    -- if $1 < x$, then $x + 2 < 2 * x + 2$
    have : x + 2 < 2 * x + 2 := by linarith only [h]
    -- which is impossible
    linarith only [this, h₀]

  tauto
```