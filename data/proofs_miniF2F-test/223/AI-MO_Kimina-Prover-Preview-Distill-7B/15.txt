-- $x + 2 \geq 1 + 0 + (-1) = -1$, so $x \geq -1$

  have h₀ : x + 2 ≥ -1 := by calc
    x + 2 = abs (x - 1) + abs x + abs (x + 1) := by rw [h₀]
    _ ≥ -1 := by
      have : abs (x - 1) ≥ 0 := abs_nonneg (x - 1)
      have : abs x ≥ 0 := abs_nonneg x
      have : abs (x + 1) ≥ 0 := abs_nonneg (x + 1)
      linarith

  have : x ≥ -1 := by linarith

  -- $|x-1| + |x| + |x+1| = x + 2 \geq 0$, so $x \geq -2$

  have h₁ : x + 2 ≥ 0 := by calc
    x + 2 = abs (x - 1) + abs x + abs (x + 1) := by rw [h₀]
    _ ≥ 0 := by
      have : abs (x - 1) ≥ 0 := abs_nonneg (x - 1)
      have : abs x ≥ 0 := abs_nonneg x
      have : abs (x + 1) ≥ 0 := abs_nonneg (x + 1)
      linarith

  have : x ≥ -2 := by linarith

  -- $|x-1| + |x| + |x+1| = x + 2 \leq 1 + 1 + 2 = 4$, so $x \leq 2$

  have h₂ : x + 2 ≤ 4 := by calc
    x + 2 = abs (x - 1) + abs x + abs (x + 1) := by rw [h₀]
    _ ≤ 4 := by
      have : abs (x - 1) ≤ 2 := by
        have : abs (x - 1) ≤ 2 := by
          by_cases h₃ : x ≥ 1
          · calc
              abs (x - 1) = x - 1 := by rw [abs_of_nonneg (by linarith)]
              _ ≤ 2 := by linarith
          · have : x ≤ 1 := by linarith
            calc
              abs (x - 1) = -(x - 1) := by rw [abs_of_nonpos (by linarith)]
              _ ≤ 2 := by linarith
        linarith
      have : abs x ≤ 2 := by
        have : abs x ≤ 2 := by
          by_cases h₃ : x ≥ 0
          · calc
              abs x = x := by rw [abs_of_nonneg (by linarith)]
              _ ≤ 2 := by linarith
          · have : x ≤ 0 := by linarith
            calc
              abs x = -x := by rw [abs_of_nonpos (by linarith)]
              _ ≤ 2 := by linarith
        linarith
      have : abs (x + 1) ≤ 2 := by
        have : abs (x + 1) ≤ 2 := by
          by_cases h₃ : x ≥ -1
          · calc
              abs (x + 1) = x + 1 := by rw [abs_of_nonneg (by linarith)]
              _ ≤ 2 := by linarith
          · have : x ≤ -1 := by linarith
            calc
              abs (x + 1) = -(x + 1) := by rw [abs_of_nonpos (by linarith)]
              _ ≤ 2 := by linarith
        linarith
      linarith

  have : x ≤ 2 := by linarith

  by_cases h₃ : x ≥ 1

  · -- if $x \geq 1$,

    rw [abs_of_nonneg (by linarith), abs_of_nonneg (by linarith), abs_of_nonneg (by linarith)] at h₀

    have : x = 1 := by linarith

    rw [this]

    exact ⟨by norm_num, by norm_num⟩

  · -- if $x < 1$,

    by_cases h₄ : x ≥ 0

    · -- if $0 \leq x < 1$,

      rw [abs_of_nonpos (by linarith), abs_of_nonneg (by linarith), abs_of_nonneg (by linarith)] at h₀

      have : x = 0 := by linarith

      rw [this]

      exact ⟨by norm_num, by norm_num⟩

    · -- if $x < 0$,

      rw [abs_of_nonpos (by linarith), abs_of_nonpos (by linarith), abs_of_nonneg (by linarith)] at h₀

      have : x = -1 := by linarith

      rw [this] at h₃

      linarith
```