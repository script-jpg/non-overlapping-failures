-- Show that $x \geq 0$.
  have hx_ge_0 : x ≥ 0 := by

    -- From $|x-1| + |x| + |x+1| = x + 2$, we get $|x-1| + |x| + |x+1| - x = 2$.
    have h₁ : abs (x - 1) + abs x + abs (x + 1) - x = 2 := by
      linarith

    -- We have $|x-1| \geq 0$, $|x| \geq 0$ and $|x+1| \geq 0$.
    have h₂ : abs (x - 1) ≥ 0 := abs_nonneg (x - 1)
    have h₃ : abs x ≥ 0 := abs_nonneg x
    have h₄ : abs (x + 1) ≥ 0 := abs_nonneg (x + 1)

    -- We have $|x-1| + |x| + |x+1| - x \geq 0$.
    have h₅ : abs (x - 1) + abs x + abs (x + 1) - x ≥ 0 := by
      linarith

    -- Since $|x-1| + |x| + |x+1| - x = 2$, we get $2 \geq 0$.
    linarith

  -- Show that $x \leq 1$.
  have hx_le_1 : x ≤ 1 := by

    -- Consider the cases $x \geq 1$, $-1 \leq x < 1$ and $x < -1$.
    by_cases h : x ≥ 1
    · -- If $x \geq 1$, then $|x-1| = x-1$, $|x| = x$ and $|x+1| = x+1$.
      rw [abs_of_nonneg (by linarith), abs_of_nonneg (by linarith), abs_of_nonneg (by linarith)] at h₁
      linarith

    -- Consider the cases $-1 \leq x < 1$ and $x < -1$.
    by_cases h : -1 ≤ x
    · -- If $-1 \leq x < 1$, then $|x-1| = 1-x$, $|x| = x$ and $|x+1| = x+1$.
      rw [abs_of_nonpos (by linarith), abs_of_nonneg (by linarith), abs_of_nonneg (by linarith)] at h₁
      linarith

    · -- If $x < -1$, then $|x-1| = 1-x$, $|x| = -x$ and $|x+1| = -x-1$.
      rw [abs_of_nonpos (by linarith), abs_of_nonpos (by linarith), abs_of_nonpos (by linarith)] at h₁
      linarith

  -- Combine the two inequalities.
  exact ⟨hx_ge_0, hx_le_1⟩
```