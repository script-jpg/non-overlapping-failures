-- We consider the two cases for $a$.
  cases' abs_cases (a - 1 / a) with h h <;>
  cases' abs_cases (b - 1 / b) with h' h' <;>
  -- and prove that $a = b$ or derive a contradiction from the assumption.
  make \[\]
  any_goals
    first|(cases' h with h; cases' h' with h'; any_goals assumption)
    |(cases' h with h; cases' h' with h'; any_goals assumption)
    |(cases' h with h; cases' h' with h'; field_simp at h h'; nlinarith)
    |(cases' h with h; cases' h' with h'; field_simp at h h'; nlinarith)
    |(cases' h with h; cases' h' with h'; linarith)
    |(cases' h with h; cases' h' with h'; linarith)
    |(cases' h with h; cases' h' with h'; field_simp at h h'; nlinarith)
    |(cases' h with h; cases' h' with h'; field_simp at h h'; nlinarith)

  -- We are left with the case $a > 0$, $b < 0$ (or vice versa), and we have to prove that $a + b = \sqrt 5$.
  -- Now we have $a > 0$, $b < 0$, and we have to prove that $a + b = \sqrt 5$.
  cases' h with ha ha <;>
  cases' h' with hb hb <;>
  -- Consider the case $a > 0$ and $b > 0$.
  make \[\]
  any_goals
    first|(cases' h with h; cases' h' with h'; any_goals assumption)
    |(cases' h with h; cases' h' with h'; field_simp at h h'; nlinarith)
    |(cases' h with h; cases' h' with h'; linarith)
    |(cases' h with h; cases' h' with h'; linarith)
    |(cases' h with h; cases' h' with h'; field_simp at h h'; nlinarith)
    |(cases' h with h; cases' h' with h'; field_simp at h h'; nlinarith)

  -- We are left with the case $a > 0$ and $b < 0$.
  -- Now we have $a > 0$, $b < 0$, and we have to prove that $a + b = \sqrt 5$.
  cases' ha with ha ha <;>
  cases' hb with hb hb <;>
  -- We have $a - 1 / a = 1$, and $-b - 1 / b = 1$.
  -- We have $a - 1 / a = 1$, and $-b - 1 / b = 1$.
  -- Clear fractions by multiplying by $a$ and $b$ respectively.
  make \[\]
  any_goals
    first|(cases' ha with ha; cases' hb with hb; any_goals assumption)
    |(cases' ha with ha; cases' hb with hb; field_simp at ha hb)
    |(cases' ha with ha; cases' hb with hb; linarith)
    |(cases' ha with ha; cases' hb with hb; linarith)
    |(cases' ha with ha; cases' hb with hb; nlinarith)
    |(cases' ha with ha; cases' hb with hb; nlinarith)

  -- We are left with the case $a - 1 / a = 1$ and $-b - 1 / b = 1$.
  -- We have $a - 1 / a = 1$, and $-b - 1 / b = 1$.
  -- Clear fractions by multiplying by $a$ and $b$ respectively.
  cases' ha with ha ha <;>
  cases' hb with hb hb <;>
  field_simp at ha hb
  -- Now we have $a^2 - 1 = a$, and $-b^2 - 1 = b$.
  -- We have $a^2 - a - 1 = 0$, and $b^2 + b + 1 = 0$.
  make \[\]
  any_goals
    first|(cases' ha with ha; cases' hb with hb; any_goals assumption)
    |(cases' ha with ha; cases' hb with hb; nlinarith)
    |(cases' ha with ha; cases' hb with hb; nlinarith)
    |(cases' ha with ha; cases' hb with hb; nlinarith)
    |(cases' ha with ha; cases' hb with hb; nlinarith)
    |(cases' ha with ha; cases' hb with hb; nlinarith)
    |(cases' ha with ha; cases' hb with hb; nlinarith)

  -- We are left with the case $a^2 - a - 1 = 0$, and $b^2 + b + 1 = 0$.
  -- We have $a^2 - a - 1 = 0$ and $b^2 + b + 1 = 0$.
  -- Make sure that $a^2 - a - 1 = 0$.
  have ha : a^2 - a - 1 = 0 := by linarith
  -- We have $a^2 - a - 1 = 0$, so $a^2 = 1 + a$.
  have ha : a^2 = 1 + a := by linarith
  -- We have $b^2 + b + 1 = 0$, so $b^2 = -1 - b$.
  have hb : b^ 2 = -1 - b := by linarith
  -- Now we have $a > 0$, $b < 0$, $a^2 = 1 + a$, and $b^2 = -1 - b$.
  -- We have to prove that $a + b = \sqrt 5$.
  (  -- We have $a > 0$, $b < 0$, $a^2 = 1 + a$, and $b^2 = -1 - b$.
    -- Adding the two equations, we get $a^2 + b^2 = 1 + a - 1 - b = a - b$.
    have h : a^2 + b^2 = a - b := by linarith
    -- Then $a^2 + b^2 + 2ab = a - b + 2ab$.
    have h' : a^2 + b^2 + 2 * a * b = a - b + 2 * a * b := by linarith
    -- Then $(a + b)^2 = (a - b) + 2ab$.
    have h'' : (a + b)^2 = (a - b) + 2 * a * b := by linarith
    -- We have $a^2 = 1 + a$ and $b^2 = -1 - b$.
    -- Then $a^2 + b^2 = 1 + a - 1 - b = a - b$.
    have h''' : a^2 + b^2 = a - b := by linarith
    have h'''' : 0 < a - b := by linarith
    -- So $(a + b)^2 = a - b + 2ab$.
    linarith
  )
```