-- We have $a>0$, $b>0$, $a\neq b$ and $|a-1/a|=1$, $|b-1/b|=1$. We need to show that $a+b=\sqrt{5}$.

  -- Two different positive numbers $a$ and $b$ each differ from their reciprocals by $1$. What is $a+b$?

  -- We divided into cases when the absolute value is $1$.

  cases' abs_cases (a - 1 / a) with h h <;> cases' abs_cases (b - 1 / b) with h' h' <;> try simp_all

  -- In the first case, we get $a = 1 + 1/a$. We can rewrite this as a quadratic equation by multiplying both sides by $a$.

  · -- We have $a = 1 + 1 / a$.

    have : a = 1 + 1 / a := by linarith

    -- Multiplying both sides by $a$ gives $a^2 = a + 1$.

    have : a ^ 2 = a + 1 := by
      field_simp at this
      linarith

    -- By the quadratic formula, $a = \frac{1 + \sqrt{5}}{2}$ or $a = \frac{1 - \sqrt{5}}{2}$.

    have : (a - (1 + Real.sqrt 5) / 2) * (a - (1 - Real.sqrt 5) / 2) = 0 := by
      ring_nf
      rw [Real.sq_sqrt (by norm_num)]
      linarith

    -- So $a = \frac{1 + \sqrt{5}}{2}$ or $a = \frac{1 - \sqrt{5}}{2}$.

    have : a = (1 + Real.sqrt 5) / 2 ∨ a = (1 - Real.sqrt 5) / 2 := by
      rcases mul_eq_zero.mp this with h | h
      · left
        linarith
      · right
        linarith

    -- In the second case, we have $a = 1 - 1/a$. We can rewrite this as a quadratic equation by multiplying both sides by $a$.

    have : (a - (1 + Real.sqrt 5) / 2) * (a - (1 - Real.sqrt 5) / 2) = 0 := by
      ring_nf
      rw [Real.sq_sqrt (by norm_num)]
      linarith

    -- So $a = \frac{1 + \sqrt{5}}{2}$ or $a = \frac{1 - \sqrt{5}}{2}$.

    have : a = (1 + Real.sqrt 5) / 2 ∨ a = (1 - Real.sqrt 5) / 2 := by
      rcases mul_eq_zero.mp this with h | h
      · left
        linarith
      · right
        linarith

    -- By the same method, we solve the case when $b$ is negative.

    cases' this with h h <;> cases' this with h' h' <;> try simp_all

  -- So $a = \frac{1 + \sqrt{5}}{2}$ and $b = \frac{1 - \sqrt{5}}{2}$ or $a = \frac{1 - \sqrt{5}}{2}$ and $b = \frac{1 + \sqrt{5}}{2}$. In both cases, $a + b = 1$.

  · -- So $a = \frac{1 + \sqrt{5}}{2}$ and $b = \frac{1 - \sqrt{5}}{2}$.

    have : a = (1 + Real.sqrt 5) / 2 ∨ a = (1 - Real.sqrt 5) / 2 := by
      apply mul_eq_mul_right.mp
      ring_nf
      rw [Real.sq_sqrt (by norm_num)]
      linarith

    have : b = (1 + Real.sqrt 5) / 2 ∨ b = (1 - Real.sqrt 5) / 2 := by
      apply mul_eq_mul_right.mp
      ring_nf
      rw [Real.sq_sqrt (by norm_num)]
      linarith

    cases' this with h h <;> cases' this with h' h' <;> try simp_all

  -- So $a = \frac{1 - \sqrt{5}}{2}$ and $b = \frac{1 + \sqrt{5}}{2}$.

  · -- In both cases, $a + b = 1$.

    have : a = (1 + Real.sqrt 5) / 2 ∨ a = (1 - Real.sqrt 5) / 2 := by
      apply mul_eq_mul_right.mp
      ring_nf
      rw [Real.sq_sqrt (by norm_num)]
      linarith

    have : b = (1 + Real.sqrt 5) / 2 ∨ b = (1 - Real.sqrt 5) / 2 := by
      apply mul_eq_mul_right.mp
      ring_nf
      rw [Real.sq_sqrt (by norm_num)]
      linarith

    cases' this with h h <;> cases' this with h' h' <;> try simp_all

  -- In the last case, we get $a = 1 - 1/a$. We can rewrite this as a quadratic equation by multiplying both sides by $a$.

  · -- We have $a = 1 - 1 / a$.

    have : a = 1 - 1 / a := by linarith

    -- Multiplying both sides by $a$ gives $a^2 = a - 1$.

    have : a ^ 2 = a - 1 := by
      field_simp at this
      linarith

    -- By the quadratic formula, $a = \frac{1 + \sqrt{5}}{2}$ or $a = \frac{1 - \sqrt{5}}{2}$.

    have : (a - (1 + Real.sqrt 5) / 2) * (a - (1 - Real.sqrt 5) / 2) = 0 := by
      ring_nf
      rw [Real.sq_sqrt (by norm_num)]
      linarith

    -- So $a = \frac{1 + \sqrt{5}}{2}$ or $a = \frac{1 - \sqrt{5}}{2}$.

    have : a = (1 + Real.sqrt 5) / 2 ∨ a = (1 - Real.sqrt 5) / 2 := by
      rcases mul_eq_zero.mp this with h | h
      · left
        linarith
      · right
        linarith

    -- In the last case, we get $b = 1 + 1/b$. We can rewrite this as a quadratic equation by multiplying both sides by $b$.

  have : (b - (1 + Real.sqrt 5) / 2) * (b - (1 - Real.sqrt 5) / 2) = 0 := by
    ring_nf
    rw [Real.sq_sqrt (by norm_num)]
    linarith

  -- So $b = \frac{1 + \sqrt{5}}{2}$ or $b = \frac{1 - \sqrt{5}}{2}$.

  have : b = (1 + Real.sqrt 5) / 2 ∨ b = (1 - Real.sqrt 5) / 2 := by
    rcases mul_eq_zero.mp this with h | h
    · left
      linarith
    · right
      linarith

  -- So $a = \frac{1 - \sqrt{5}}{2}$ and $b = \frac{1 + \sqrt{5}}{2}$ or $a = \frac{1 + \sqrt{5}}{2}$ and $b = \frac{1 - \sqrt{5}}{2}$. In both cases, $a + b = 1$.

  cases' this with h h <;> cases' this with h' h' <;> try simp_all

  -- So $a = \frac{1 + \sqrt{5}}{2}$ and $b = \frac{1 + \sqrt{5}}{2}$. But this is a contradiction.

  · -- We have $a = b$, which contradicts the fact that $a$ and $b$ are different.

    have : a = b := by linarith

    contradiction

  -- So $a = \frac{1 - \sqrt{5}}{2}$ and $b = \frac{1 - \sqrt{5}}{2}$. But this is also a contradiction.

  · -- We have $a = b$, which contradicts the fact that $a$ and $b$ are different.

    have : a = b := by linarith

    contradiction
```