-- We have $a>0$, $b>0$, $a\neq b$ and $|x-1/x|=1$ where $x=a$ or $x=b$.
  -- We need to show that $a+b=\sqrt 5$.

  -- Two numbers that are each equal to their own reciprocal can only be 1 or -1.
  -- But since our numbers are positive, they cannot be -1. Therefore, they must be 1.
  have ha1 : a = 1 := by
    rcases abs_cases (a - 1 / a) with h | h
    · -- If $a - 1 / a = 1$ then $a^2 - 1 = a$.
      field_simp at h
      have : a * a - 1 = a := by
        nth_rw 2 [← h]
        ring
      -- The square of a positive number is at least 0 and therefore $a^2-1 \geq -1$.
      have : a * a - 1 ≥ -1 := by nlinarith
      -- This implies that $a^2 - 1 = a$ cannot be true for positive $a$.
      linarith
    · -- If $a - 1 / a = -1$ then $a^2 - 1 = -a$.
      field_simp at h
      have : a * a - 1 = -a := by
        nth_rw 2 [← h]
        ring
      -- Therefore $a^2 + a - 1 = 0$.
      have : a * a + a - 1 = 0 := by linarith
      -- This means that $a$ is a positive root of $x^2 + x - 1 = 0$.
      have : (a - 1/2) * (a + 1/2) = 1/2 - a := by linarith
      have : (a + 1/2)^2 = 3/4 := by nlinarith
      -- Therefore $a+1/2 = \sqrt{3/4}$.
      have : a + 1/2 = Real.sqrt (3/4) := by
        apply Eq.symm (Real.sqrt_sq (by linarith))
        nlinarith
      -- This implies that $a = \sqrt{3/4} - 1/2 = \sqrt{5/4} - 1/2 = 1$.
      have : a = 1 := by
        calc
          a = (a + 1/2) - 1/2 := by ring
          _ = Real.sqrt (3/4) - 1/2 := by rw [this]
          _ = Real.sqrt (5/4) - Real.sqrt (4/4) := by rw [Real.sqrt_div (by norm_num), Real.sqrt_div (by norm_num)]
          _ = Real.sqrt (5/4) - Real.sqrt 1 := by norm_num
          _ = Real.sqrt (5/4) - 1 := by rw [Real.sqrt_one]
          _ = (Real.sqrt 5 - 2) / (2:ℝ) := by
            rw [Real.sqrt_eq_iff_sq_eq] <;> norm_num
            <;> ring_nf <;> norm_num
          _ = (Real.sqrt 5 - 1) / 2 := by ring
      exact this
  -- Now we have $a=1$.
  -- Now we can substitute $a=1$ into $|a - 1/a| = 1$.
  have hb1 : b = 1 := by
    rw [ha1] at h₂
    rcases abs_cases (b - 1 / b) with h | h
    · -- If $b - 1 / b = 1$ then $b^2 - 1 = b$.
      field_simp at h
      have : b * b - 1 = b := by
        nth_rw 2 [← h]
        ring
      -- The square of a positive number is at least 0 and therefore $b^2-1 \geq -1$.
      have : b * b - 1 ≥ -1 := by nlinarith
      -- This implies that $b^2 - 1 = b$ cannot be true for positive $b$.
      linarith
    · -- If $b - 1 / b = -1$ then $b^2 - 1 = -b$.
      field_simp at h
      have : b * b - 1 = -b := by
        nth_rw 2 [← h]
        ring
      -- Therefore $b^2 + b - 1 = 0$.
      have : b * b + b - 1 = 0 := by linarith
      -- This means that $b+1/2 = \sqrt{3/4}$.
      have : (b + 1/2)^2 = 3/4 := by nlinarith
      have : b + 1/2 = Real.sqrt (3/4) := by
        apply Eq.symm (Real.sqrt_sq (by linarith))
        nlinarith
      -- This implies that $b = \sqrt{3/4} - 1/2 = \sqrt{5/4} - 1/2 = 1$.
      have : b = 1 := by
        calc
          b = (b + 1/2) - 1/2 := by ring
          _ = Real.sqrt (3/4) - 1/2 := by rw [this]
          _ = Real.sqrt (5/4) - Real.sqrt (4/4) := by rw [Real.sqrt_div (by norm_num), Real.sqrt_div (by norm_num)]
          _ = Real.sqrt (5/4) - Real.sqrt 1 := by norm_num
          _ = Real.sqrt (5/4) - 1 := by rw [Real.sqrt_one]
          _ = (Real.sqrt 5 - 2) / (2:ℝ) := by
            rw [Real.sqrt_eq_iff_sq_eq] <;> norm_num
            <;> ring_nf <;> norm_num
          _ = (Real.sqrt 5 - 1) / 2 := by ring
      exact this
  -- Now we have $b=1$.
  -- But now $a=b=1$ which is a contradiction.
  absurd h₁
  rw [ha1, hb1]

```