rcases' le_total 0 (a - b) with h | h
  · -- If $a \leq b$, then $a - b \leq 0$.
    -- So $a - 1 / a = 1$ and $b - 1 / b = -1$.
    have h₄ : a - 1 / a = 1 := by
      rw [abs_of_nonpos (by linarith only [h])]
      linarith only [h₂]
    have h₅ : b - 1 / b = -1 := by
      rw [abs_of_nonpos (by linarith only [h])]
      linarith only [h₃]
    -- Solve the two equations.
    have h₆ : a ^ 2 - a - 1 = 0 := by
      field_simp at h₄
      linarith only [h₄]
    have h₇ : b ^ 2 - b + 1 = 0 := by
      field_simp at h₅
      linarith only [h₅]
    -- No such real number $b$ exists.
    have : b ^ 2 - b + 1 > 0 := by
      calc
        b ^ 2 - b + 1 = (b - 1/2) ^ 2 + 3/4 := by ring_nf
        _ ≥ 3/4 := by simp [sq_nonneg]
        _ > 0 := by norm_num
    linarith only [this, h₇]
  · -- If $a > b$, then $a - b > 0$.
    -- So $a - 1 / a = -1$ and $b - 1 / b = 1$.
    have h₄ : a - 1 / a = -1 := by
      rw [abs_of_pos (by linarith only [h])]
      linarith only [h₂]
    have h₅ : b - 1 / b = 1 := by
      rw [abs_of_pos (by linarith only [h])]
      linarith only [h₃]
    -- Solve the two equations.
    have h₆ : a ^ 2 + a - 1 = 0 := by
      field_simp at h₄
      linarith only [h₄]
    have h₇ : b ^ 2 - b - 1 = 0 := by
      field_simp at h₅
      linarith only [h₅]
    -- Note that $a > 0$ and $b > 0$.
    have h₈ : a > 0 := by linarith only [h₀.left]
    have h₉ : b > 0 := by linarith only [h₀.right]
    -- So $a = \sqrt 5 / 2 + 1/2$ and $b = \sqrt 5 / 2 - 1/2$.
    have h₁₀ : a = Real.sqrt 5 / 2 + 1 / 2 := by
      have : a ^ 2 + a - 1 = 0 := by assumption
      have : (2 * a - 1) ^ 2 = Real.sqrt 5 ^ 2 := by
        calc
          (2 * a - 1) ^ 2 = 4 * (a ^ 2 + a - 1) := by ring
          _ = 0 := by rw [this]; norm_num
          _ = Real.sqrt 5 ^ 2 := by norm_num
      have : 2 * a - 1 = Real.sqrt 5 := by
        rw [sq_eq_sq_iff_eq_or_eq_neg] at this
        cases' this with h h <;> linarith only [h₈]
      linarith
    have h₁₁ : b = Real.sqrt 5 / 2 - 1 / 2 := by
      have : b ^ 2 - b - 1 = 0 := by assumption
      have : (2 * b + 1) ^ 2 = Real.sqrt 5 ^ 2 := by
        calc
          (2 * b + 1) ^ 2 = 4 * (b ^ 2 - b - 1) := by ring
          _ = 0 := by rw [this]; norm_num
          _ = Real.sqrt 5 ^ 2 := by norm_num
      have : 2 * b + 1 = Real.sqrt 5 := by
        rw [sq_eq_sq_iff_eq_or_eq_neg] at this
        cases' this with h h <;> linarith only [h₉]
      linarith
    -- So $a + b = \sqrt{5}$.
    rw [h₁₀, h₁₁]
    ring
```