have h₂ : n ≠ 1 := by
    intro hn
    rw [hn] at h₁
    norm_num at h₁
  -- We need to show that if n is not prime, then 2^n - 1 is not prime.
  -- We use the fact that if n is not prime, then it can be factored into two integers greater than 1.
  -- We then show that 2^n - 1 can be factored into two integers greater than 1, contradicting the primality of 2^n - 1.
  have h₃ : n.Prime := by
    by_contra hn
    -- If n is not prime, then it can be factored into two integers greater than 1.
    have h₄ : n = 0 ∨ n = 1 ∨ ∃ x y : ℕ, x ≥ 2 ∧ y ≥ 2 ∧ n = x * y := by
      by_cases h : n = 0 <;> by_cases h' : n = 1 <;> simp_all [Nat.prime_def_lt', Nat.not_lt_zero]
      <;> aesop
    rcases h₄ with (h₄ | h₄ | ⟨x, y, hx, hy, rfl⟩) <;> norm_num at h₁ <;>
    (try simp_all [Nat.Prime, Nat.succ_le_iff, Nat.le_of_lt]) <;>
    (try omega) <;>
    (try {
      -- We use the fact that 2^ab - 1 can be factored into (2^a - 1) and (1 + 2^a + 2^2a +... + 2^(b-1)a).
      have h₅ : 2 ^ (x * y) - 1 = (2 ^ x - 1) * ∑ i in Finset.range y, 2 ^ (x * i) := by
        rw [← Nat.mod_add_div (2 ^ (x * y)) x]
        simp [Finset.sum_range_succ', pow_add, pow_mul, Nat.mul_sub_left_distrib, Nat.mul_sub_right_distrib, Nat.pow_mod]
        <;> ring_nf <;> omega
      rw [h₅] at h₁
      exact absurd h₁ (by
        apply Nat.not_prime_mul
        <;>
        (try omega) <;>
        (try simp_all [Finset.sum_range_succ', Nat.succ_le_iff, Nat.le_of_lt]) <;>
        (try omega) <;>
        (try nlinarith)
      )
    }) <;>
    (try omega) <;>
    (try nlinarith)
  exact h₃

theorem numbertheory_2pownm1prime_nprime_alt (n : ℕ) (h₀ : 0 < n) (h₁ : Nat.Prime (2 ^ n - 1)) : Nat.Prime n := by
  have h₂ : n ≠ 1 := by
    intro hn
    rw [hn] at h₁
    norm_num at h₁
  -- We need to show that if n is not prime, then 2^n - 1 is not prime.
  -- We use the fact that if n is not prime, then it can be factored into two integers greater than 1.
  -- We then show that 2^n - 1 can be factored into two integers greater than 1, contradicting the primality of 2^n - 1.
  have h₃ : n.Prime := by
    by_contra hn
    -- If n is not prime, then it can be factored into two integers greater than 1.
    have h₄ : n = 0 ∨ n = 1 ∨ ∃ x y : ℕ, x ≥ 2 ∧ y ≥ 2 ∧ n = x * y := by
      by_cases h : n = 0 <;> by_cases h' : n = 1 <;> simp_all [Nat.prime_def_lt', Nat.not_lt_zero]
      <;