-- It suffices to show that the set of the roots of the equation $x^2 + 18x + 30 = 2 \sqrt{x^2 + 18x + 45}$ is {5, -6, -10}.
  suffices (f ⁻¹' {0}).toFinset = {5, -6, -10} by simp [this]

  apply Set.eq_of_subset_of_subset
  · intro x hx
    simp at hx
    -- Show that $x^2 + 18x + 30 \geq 0$.
    have h₀ : x ^ 2 + (18 * x + 30) ≥ 0 := by
      calc
        x ^ 2 + (18 * x + 30) = (x ^ 2 + (18 * x + 30) - 2 * Real.sqrt (x ^ 2 + (18 * x + 45))) + 2 * Real.sqrt (x ^ 2 + (18 * x + 45)) := by ring
        _ ≥ 0 + 2 * Real.sqrt (x ^ 2 + (18 * x + 45)) := by linarith only [h₀ x, Real.sqrt_nonneg (x ^ 2 + (18 * x + 45))]
        _ = 2 * Real.sqrt (x ^ 2 + (18 * x + 45)) := by ring
        _ ≥ 0 := by linarith only [Real.sqrt_nonneg (x ^ 2 + (18 * x + 45))]
    -- Show that $x^2 + 18x + 30 \leq 0$.
    have h₁ : x ^ 2 + (18 * x + 30) ≤ 0 := by
      calc
        x ^ 2 + (18 * x + 30) = (x ^ 2 + (18 * x + 30) - 2 * Real.sqrt (x ^ 2 + (18 * x + 45))) + 2 * Real.sqrt (x ^ 2 + (18 * x + 45)) := by ring
        _ = 2 * Real.sqrt (x ^ 2 + (18 * x + 45)) := by rw [h₀ x]
        _ ≤ 2 * 15 := by linarith only [Real.sqrt_le_iff (by linarith only [h₁]) (by norm_num)]
        _ = 30 := by norm_num
        _ ≤ 0 + 30 := by linarith only [h₁]
        _ = x ^ 2 + (18 * x + 30) := by ring
    -- So $x^2 + 18x + 30 = 0$.
    have h₂ : x ^ 2 + (18 * x + 30) = 0 := by linarith only [h₀, h₁]
    -- Simplify the expression.
    simp [show x ^ 2 + (18 * x + 30) = (x - 5) * (x + 6) * (x + 10) by ring] at h₂
    -- Show that $x = 5$ or $x = -6$ or $x = -10$.
    have h₃ : x = 5 ∨ x = -6 ∨ x = -10 := by
      rcases h₂ with (h₂ | h₂ | h₂)
      · left
        linarith only [h₂]
      · right
        left
        linarith only [h₂]
      · right
        right
        linarith only [h₂]
    -- Hence, we have shown that the set of the roots of the equation $x^2 + 18x + 30 = 2 \sqrt{x^2 + 18x + 45}$ is {5, -6, -10}.
    simp [h₃]

  · intro x hx
    simp at hx
    -- Show that $x^2 + 18x + 30 \geq 0$.
    have h₀ : x ^ 2 + (18 * x + 30) ≥ 0 := by
      calc
        x ^ 2 + (18 * x + 30) = (x ^ 2 + (18 * x + 30) - 2 * Real.sqrt (x ^ 2 + (18 * x + 45))) + 2 * Real.sqrt (x ^ 2 + (18 * x + 45)) := by ring
        _ ≥ 0 + 2 * Real.sqrt (x ^ 2 + (18 * x + 45)) := by linarith only [h₀ x, Real.sqrt_nonneg (x ^ 2 + (18 * x + 45))]
        _ = 2 * Real.sqrt (x ^ 2 + (18 * x + 45)) := by ring
        _ ≥ 0 := by linarith only [Real.sqrt_nonneg (x ^ 2 + (18 * x + 45))]
    -- Show that $x^2 + 18x + 30 \leq 0$.
    have h₁ : x ^ 2 + (18 * x + 30) ≤ 0 := by
      calc
        x ^ 2 + (18 * x + 30) = (x ^ 2 + (18 * x + 30) - 2 * Real.sqrt (x ^ 2 + (18 * x + 45))) + 2 * Real.sqrt (x ^ 2 + (18 * x + 45)) := by ring
        _ = 2 * Real.sqrt (x ^ 2 + (18 * x + 45)) := by rw [h₀ x]
        _ ≤ 2 * 15 := by linarith only [Real.sqrt_le_iff (by linarith only [h₁]) (by norm_num)]
        _ = 30 := by norm_num
        _ ≤ 0 + 30 := by linarith only [h₁]
        _ = x ^ 2 + (18 * x + 30) := by ring
    -- So $x^2 + 18x + 30 = 0$.
    have h₂ : x ^ 2 + (18 * x + 30) = 0 := by linarith only [h₀, h₁]
    -- Simplify the expression.
    simp [show x ^ 2 + (18 * x + 30) = (x - 5) * (x + 6) * (x + 10) by ring] at h₂
    -- Show that $x = 5$ or $x = -6$ or $x = -10$.
    have h₃ : x = 5 ∨ x = -6 ∨ x = -10 := by
      rcases h₂ with (h₂ | h₂ | h₂)
      · left
        linarith only [h₂]
      · right
        left
        linarith only [h₂]
      · right
        right
        linarith only [h₂]
    -- Hence, we have shown that the set of the roots of the equation $x^2 + 18x + 30 = 2 \sqrt{x^2 + 18x + 45}$ is {5, -6, -10}.
    simp [h₃]
```