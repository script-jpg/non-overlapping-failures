-- Some auxiliary lemmas.

  -- If $n$ is even, then $n^2 \equiv 0 \pmod{4}$.
  have h₀ (n : ℕ) (h₀ : Even n) : (↑n) ^ 2 ≡ 0 [ZMOD 4] := by
    obtain ⟨m, h₀⟩ := h₀
    rw [h₀]
    simp
    ring_nf
    rw [show 4 * m ^ 2 = (2 * m) ^ 2 by ring_nf]
    exact pow_two_mod_eq_one (2 * m) 4

  -- If $n$ is even, then $n^2 \equiv 0 \pmod{8}$.
  have h₀' (n : ℕ) (h₀ : Even n) : (↑n) ^ 2 ≡ 0 [ZMOD 8] := by
    obtain ⟨m, h₀⟩ := h₀
    rw [h₀]
    simp
    ring_nf
    rw [show 8 * m ^ 2 = (2 * (2 * m)) ^ 2 by ring_nf]
    exact pow_two_mod_eq_one (2 * (2 * m)) 8

  -- If $n$ is even, then $n^2 \equiv 1 \pmod{8}$.
  have h₁ (n : ℕ) (h₀ : Even (n + 2)) : (↑n) ^ 2 ≡ 1 [ZMOD 8] := by
    obtain ⟨m, h₁⟩ := h₀
    rw [h₁]
    simp
    ring_nf
    rw [show (8 * m + 4) ^ 2 = 16 * (m + 1) ^ 2 by ring_nf]
    exact pow_two_mod_eq_one (4 * (m + 1)) 8

  -- If $n$ is even, then $n^2 \equiv 4 \pmod{8}$.
  have h₂ (n : ℕ) (h₀ : Even (n + 1)) : (↑n) ^ 2 ≡ 4 [ZMOD 8] := by
    obtain ⟨m, h₀⟩ := h₀
    rw [h₀]
    simp
    ring_nf
    rw [show (8 * m + 6) ^ 2 = 16 * (2 * m + 3) ^ 2 by ring_nf]
    exact pow_two_mod_eq_one (6 * (2 * m + 3)) 8

  -- If $n$ is even, then $n^2 \equiv 9 \pmod{8}$.
  have h₂ (n : ℕ) (h₀ : Even (n - 1)) : (↑n) ^ 2 ≡ 1 [ZMOD 8] := by
    obtain ⟨m, h₀⟩ := h₀
    rw [h₀]
    simp
    ring_nf
    rw [show (8 * m - 4) ^ 2 = 16 * (m - 1) ^ 2 by ring_nf]
    exact pow_two_mod_eq_one (4 * (m - 1)) 8

  -- If $n$ is even, then $n^2 \equiv 9 \pmod{8}$.
  have h₃ (n : ℕ) (h₀ : Even (n + 3)) : (↑n) ^ 2 ≡ 1 [ZMOD 8] := by
    obtain ⟨m, h₀⟩ := h₀
    rw [h₀]
    simp
    ring_nf
    rw [show (8 * m + 10) ^ 2 = 16 * (2 * m + 5) ^ 2 by ring_nf]
    exact pow_two_mod_eq_one (10 * (2 * m + 5)) 8

  -- If $n$ is even, then $n^2 \equiv 4 \pmod{8}$.
  have h₃ (n : ℕ) (h₀ : Even (n - 3)) : (↑n) ^ 2 ≡ 1 [ZMOD 8] := by
    obtain ⟨m, h₀⟩ := h₀
    rw [h₀]
    simp
    ring_nf
    rw [show (8 * m - 10) ^ 2 = 16 * (m - 2) ^ 2 by ring_nf]
    exact pow_two_mod_eq_one (10 * (m - 2)) 8

  -- To begin, we need to show that $n \geq 20$.
  have h₄ : n ≥ 20 := by
    -- We show that $n^2 \geq 495$.
    have h₄ : (↑n) ^ 2 ≥ (495 : ℤ) := by
      -- Notice that $495 = 20^2 - 5\sqrt{12296/5}$.
      suffices 495 ≤ (↑n) ^ 2 - 2 * 20 * (↑n) by omega
      calc
        495 = 12296 - 2 * 20 * (↑n) + (↑n) ^ 2 - 12296 + 2 * 20 * (↑n) := by omega
        _ = 20^2 - 5 * √(12296 / 5) - 2 * 20 * (↑n) + (↑n) ^ 2 - 12296 + 2 * 20 * (↑n) := by congr!; rify; rw [← Real.sqrt_eq_iff_eq_sq]; norm_num; norm_num; norm_num
        _ = (20 - √(12296 / 5)) * (20 + √(12296 / 5)) - 12296 + 2 * 20 * (↑n) + (↑n) ^ 2 - 2 * 20 * (↑n) := by ring_nf
        _ = (20 - √(12296 / 5)) * (20 + √(12296 / 5)) + ((↑n) ^ 2 - 2 * 20 * (↑n) + 20^2) - 12296 + 2 * 20 * (↑n) := by ring_nf
        _ = (20 - √(12296 / 5)) * (20 + √(12296 / 5)) + (20 - (↑n)) * (20 + (↑n)) - 12296 + 2 * 20 * (↑n) := by ring_nf
        _ = (20 - √(12296 / 5)) * (20 + √(12296 / 5)) + (400 - (↑n) ^ 2) - 12296 + 2 * 20 * (↑n) := by ring_nf
        _ = (20 - √(12296 / 5)) * (20 + √(12296 / 5)) - 8296 + 2 * 20 * (↑n) := by ring_nf
        _ = (20 - √(12296 / 5)) * (20 + √(12296 / 5)) + (400 - 8296) + 2 * 20 * (↑n) := by ring_nf
        _ = (20 - √(12296 / 5)) * (20 + √(12296 / 5)) + 2 * 20 * (↑n) - 7896 := by ring_nf
        _ = (20 - √(12296 / 5)) * (20 + √(12296 / 5)) + 2 * 20 * (↑n - 20) - 7896 + 400 := by ring_nf
        _ = (20 - √(12296 / 5)) * (20 + √(12296 / 5)) + 2 * 20 * (↑n - 20) - 7496 := by ring_nf

      -- Therefore, we have $(20 - n)^2 \geq 495$ as well.
      have h₅ : (20 - ↑n) ^ 2 ≥ (495 : ℤ) := by
        calc
          (20 - ↑n) ^ 2 = (↑n - 20) ^ 2 := by ring_nf
          _ = (20 - ↑n) * (20 + ↑n) - 400 + (↑n) ^ 2 := by ring_nf
          _ = (20 - ↑n) * (20 + ↑n) + (↑n) ^ 2 - 400 := by ring_nf
          _ = (20 - (↑n - 20)) * (20 + (↑n - 20)) + ((↑n - 20) ^ 2 + 400) - 400 := by ring_nf
          _ = (20 - (↑n - 20)) * (20 + (↑n - 20)) + (↑n - 20) ^ 2 := by ring_nf
          _ ≥ 495 := by linarith only [h₄]

      -- We now show that $20 - n \geq 23$.
      have h₆ : 20 - ↑n ≥ 23 := by
        -- We have $(20 - n)^2 \equiv 1 \pmod{8}$, so is $n$ even, then $n^2 \equiv 4 \pmod{8}$.
        have h₆ : (20 - ↑n) ^ 2 ≡ 1 [ZMOD 8] := by
          calc
            (20 - ↑n) ^ 2 = (20 - (2 * m)) ^ 2 := by rw [h₀]; ring_nf
            _ = 4 * (10 - m) ^ 2 := by ring_nf
            _ ≡ 0 * (10 - m) ^ 2 [ZMOD 8] := by simp; rfl
            _ ≡ 0 + 1 * (10 - m) ^ 2 [ZMOD 8] := by simp; rfl
            _ ≡ (0 + 1) * (10 - m) ^ 2 [ZMOD 8] := by simp; rfl
            _ = 1 * (10 - m) ^ 2 := by ring_nf
            _ ≡ 1 * (10 - m) ^ 2 [ZMOD 8] := by rfl
            _ = 1 [ZMOD 8] := by simp [Int.ModEq, pow_two, Int.reduceMod, h₀']

        -- A contradiction is derived from the fact that $(20 - n)^2 \equiv 1 \pmod{8}$, but $(20 - n)^2 \geq 495$.
        by_contra!
        have h₇ : 20 - ↑n ≤ 22 := by omega
        have h₈ : (20 - ↑n) ^ 2 ≤ 22 ^ 2 := by nlinarith only [h₇]
        have h₈ : (20 - ↑n) ^ 2 ≡ 4 [ZMOD 8] := by
          calc
            (20 - ↑n) ^ 2 ≡ 1 [ZMOD 8] := h₆
            _ ≡ 4 [ZMOD 8] := by simp [Int.ModEq]; rfl

        -- Now we derive a contradiction from the two facts that $(20 - n)^2 \equiv 1 \pmod{8}$ and $(20 - n)^2 \equiv 4 \pmod{8}$.
        simp [Int.ModEq] at h₇ h₈
        omega

    -- Now we have $n \geq 20$.
    by_contra!
    have h₅ : n ^ 2 ≤ 19 ^ 2 := by omega
    omega

  -- We need to show that $n \neq 20$.
  have h₅ : n ≠ 20 := by
    -- Assume on the contrary that $n = 20$.
    by_contra!
    -- A direct substitution of $n=20$ into the original equation gives a contradiction.
    simp [this] at h₁
    omega

  -- We now show that $n \neq 21$.
  have h₆ : n ≠ 21 := by
    -- Assume on the contrary that $n = 21$.
    by_contra!
    -- A direct substitution of $n=21$ into the original equation gives a contradiction.
    simp [this] at h₁
    omega

  -- We now show that $n \neq 22$.
  have h₇ : n ≠ 22 := by
    -- Assume on the contrary that $n = 22$.
    by_contra!
    -- A direct substitution of $n=22$ into the original equation gives a contradiction.
    simp [this] at h₁
    omega

  -- We now show that $n \neq 23$.
  have h₈ : n ≠ 23 := by
    -- Assume on the contrary that $n = 23$.
    by_contra!
    -- A direct substitution of $n=23$ into the original equation gives a contradiction.
    simp [this] at h₁
    omega

  -- We now show that $n \neq 24$.
  have h₉ : n ≠ 24 := by
    -- Assume on the contrary that $n = 24$.
    by_contra!
    -- A direct substitution of $n=24$ into the original equation gives a contradiction.
    simp [this] at h₁
    omega

  -- We now show that $n \neq 25$.
  have h₁₀ : n ≠ 25 := by
    -- Assume on the contrary that $n = 25$.
    by_contra!
    -- A direct substitution of $n=25$ into the original equation gives a contradiction.
    simp [this] at h₁
    omega

  -- We now show that $n \neq 26$.
  have h₁₁ : n ≠ 26 := by
    -- Assume on the contrary that $n = 26$.
    by_contra!
    -- A direct substitution of $n=26$ into the original equation gives a contradiction.
    simp [this] at h₁
    omega

  -- We now show that $n \neq 27$.
  have h₁₂ : n ≠ 27 := by
    -- Assume on the contrary that $n = 27$.
    by_contra!
    -- A direct substitution of $n=27$ into the original equation gives a contradiction.
    simp [this] at h₁
    omega

  -- We now show that $n \neq 28$.
  have h₁₃ : n ≠ 28 := by
    -- Assume on the contrary that $n = 28$.
    by_contra!
    -- A direct substitution of $n=28$ into the original equation gives a contradiction.
    simp [this] at h₁
    omega

  -- We now show that $n \neq 29$.
  have h₁₄ : n ≠ 29 := by
    -- Assume on the contrary that $n = 29$.
    by_contra!
    -- A direct substitution of $n=29$ into the original equation gives a contradiction.
    simp [this] at h₁
    omega

  -- We now show that $n \neq 30$.
  have h₁₅ : n ≠ 30 := by
    -- Assume on the contrary that $n = 30$.
    by_contra!
    -- A direct substitution of $n=30$ into the original equation gives a contradiction.
    simp [this] at h₁
    omega

  -- We now show that $n \neq 31$.
  have h₁₆ : n ≠ 31 := by
    -- Assume on the contrary that $n = 31$.
    by_contra!
    -- A direct substitution of $n=31$ into the original equation gives a contradiction.
    simp [this] at h₁
    omega

  -- We now show that $n \neq 32$.
  have h₁₇ : n ≠ 32 := by
    -- Assume on the contrary that $n = 32$.
    by_contra!
    -- A direct substitution of $n=32$ into the original equation gives a contradiction.
    simp [this] at h₁
    omega

  -- We now show that $n \neq 33$.
  have h₁₈ : n ≠ 33 := by
    -- Assume on the contrary that $n = 33$.
    by_contra!
    -- A direct substitution of $n=33$ into the original equation gives a contradiction.
    simp [this] at h₁
    omega

  -- We now show that $n \neq 34$.
  have h₁₉ : n ≠ 34 := by
    -- Assume on the contrary that $n = 34$.
    by_contra!
    -- A direct substitution of $n=34$ into the original equation gives a contradiction.
    simp [this] at h₁
    omega

  -- We now show that $n \neq 35$.
  have h₁₁₀ : n ≠ 35 := by
    -- Assume on the contrary that $n = 35