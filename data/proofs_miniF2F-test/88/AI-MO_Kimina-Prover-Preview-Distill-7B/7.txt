-- https://artofproblemsolving.com/wiki/index.php/2007_AIME_I_Problems/Problem_3

  have h2 : (6 * (↑n ^ 2) + 8) / 24 = 512 := by omega

  have h3 : (↑n - 2) * ↑n * (↑n + 2) / 8 = 8 * ((6 * (↑n ^ 2) + 8) / 24) - 24 := by
    zify
    rw [Nat.cast_sub (by omega), Nat.cast_sub (by omega), Nat.cast_add (by omega)]
    ring
    omega

  rw [h3, h2]
```