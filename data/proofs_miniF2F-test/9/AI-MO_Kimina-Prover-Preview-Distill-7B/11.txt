-- without loss of generality, we can assume $a \geq b$
  wlog hab : a ≥ b
  · -- if otherwise, we can swap $a$ and $b$ and rewrite the inequality
    rw [add_comm]
    nth_rw 2 [add_comm]
    -- the rewritten inequality is equivalent to the original one
    nth_rw 3 [add_comm]
    simp [le_sub_iff_add_le, sub_le_iff_le_add, add_comm]
    clear hab
    assumption

  -- without loss of generality, we can assume $b \geq c$
  wlog hbc : b ≥ c
  · -- if otherwise, we can swap $b$ and $c$ and rewrite the inequality
    rw [add_comm]
    nth_rw 2 [add_comm]
    -- the rewritten inequality is equivalent to the original one
    nth_rw 3 [add_comm]
    simp [le_sub_iff_add_le, sub_le_iff_le_add, add_comm]
    clear hbc
    assumption

  -- without loss of generality, we can assume $c \geq a$
  wlog hca : c ≥ a
  · -- if otherwise, we can swap $c$ and $a$ and rewrite the inequality
    rw [add_comm]
    nth_rw 2 [add_comm]
    -- the rewritten inequality is equivalent to the original one
    nth_rw 3 [add_comm]
    simp [le_sub_iff_add_le, sub_le_iff_le_add, add_comm]
    clear hca
    assumption

  -- if $a \geq b \geq c$, we can rewrite the inequality as $a^2 b(a-b) + b^2 c(b-c) + c^2 a(c-a) \geq 0$
  -- we can rewrite it as $(a-b)(a^2 b - c^2 a) + b^2 c(b-c) \geq 0$
  -- it is obvious that $(a-b)(a^2 b - c^2 a) \geq 0$ and $b^2 c(b-c) \geq 0$
  -- so the inequality is true

  -- if $a \geq c \geq b$, we can rewrite the inequality as $a^2 b(a-b) + b^2 c(b-c) + c^2 a(c-a) \geq 0$
  -- we can rewrite it as $(a-c)(a^2 b - b^2 c) + c^2 a(c-a) \geq 0$
  -- it is obvious that $(a-c)(a^2 b - b^2 c) \geq 0$ and $c^2 a(c-a) \geq 0$
  -- so the inequality is true

  -- if $b \geq a \geq c$, we can rewrite the inequality as $a^2 b(a-b) + b^2 c(b-c) + c^2 a(c-a) \geq 0$
  -- we can rewrite it as $(b-a)(b^2 c - c^2 a) + c^2 a(b-a) \geq 0$
  -- it is obvious that $(b-a)(b^2 c - c^2 a) \geq 0$ and $c^2 a(b-a) \geq 0$
  -- so the inequality is true

  -- if $b \geq c \geq a$, we can rewrite the inequality as $a^2 b(a-b) + b^2 c(b-c) + c^2 a(c-a) \geq 0$
  -- we can rewrite it as $(c-a)(b^2 c - c^2 a) + b^2 c(b-c) \geq 0$
  -- it is obvious that $(c-a)(b^2 c - c^2 a) \geq 0$ and $b^2 c(b-c) \geq 0$
  -- so the inequality is true

  -- if $c \geq a \geq b$, we can rewrite the inequality as $a^2 b(a-b) + b^2 c(b-c) + c^2 a(c-a) \geq 0$
  -- we can rewrite it as $(c-a)(a^2 b - b^2 c) + b^2 c(b-c) \geq 0$
  -- it is obvious that $(c-a)(a^2 b - b^2 c) \geq 0$ and $b^2 c(b-c) \geq 0$
  -- so the inequality is true

  -- if $c \geq b \geq a$, we can rewrite the inequality as $a^2 b(a-b) + b^2 c(b-c) + c^2 a(c-a) \geq 0$
  -- we can rewrite it as $(b-a)(a^2 b - c^2 a) + c^2 a(c-b) \geq 0$
  -- it is obvious that $(b-a)(a^2 b - c^2 a) \geq 0$ and $c^2 a(c-b) \geq 0$
  -- so the inequality is true

  -- if $a = b = c$, the inequality is obviously true

  -- if $a = b > c$, the inequality can be rewritted as $a^2 b(a-b) + b^2 c(b-c) + c^2 a(c-a) = a^2 b(a-b) + c^2 a(c-a) \geq 0$
  -- it is obvious that $a^2 b(a-b) \geq 0$ and $c^2 a(c-a) \geq 0$
  -- so the inequality is true

  -- if $a > b = c$, the inequality can be rewritted as $a^2 b(a-b) + b^2 c(b-c) + c^2 a(c-a) = b^2 c(b-c) + c^2 a(c-a) \geq 0$
  -- it is obvious that $b^2 c(b-c) \geq 0$ and $c^2 a(c-a) \geq 0$
  -- so the inequality is true

  -- if $a > b > c$, the inequality can be rewritted as $a^2 b(a-b) + b^2 c(b-c) + c^2 a(c-a) \geq 0$
  -- it is obvious that $a^2 b(a-b) \geq 0$ and $b^2 c(b-c) \geq 0$
  -- so the inequality is true

  -- consider all the possible cases, the inequality always holds

  -- equality occurs when $a = b = c$
  suffices a = b ∧ b = c by
    rcases this with ⟨hab, hbc⟩
    rw [hab, hbc]
    ring_nf

  -- if $a \geq b \geq c$ and $a \geq c \geq b$, then $a = b = c$
  by_cases hac : a - c ≥ 0
  · by_cases hbc : b - c ≥ 0
    · -- if $a - c \geq 0$ and $b - c \geq 0$, then $a \geq c$ and $b \geq c$
      -- we can deduce that $a = b = c$ from the non-negativity of the expression
      have hab : a - b ≥ 0 := by
        have h₁ : a - b ≥ a - c := by linarith only [hbc]
        have h₂ : a - c ≥ 0 := by assumption
        linarith only [h₁, h₂]
      have hca : c - a ≥ 0 := by linarith only [hac]
      have h₁ : a - b = 0 := by nlinarith only [hab, h₁]
      have h₂ : c - a = 0 := by nlinarith only [hca, h₂]
      constructor <;> linarith only [h₁, h₂]
    · -- if $a - c \geq 0$ and $c - b \geq 0$, we can deduce $a = b = c$ from the non-negativity of the expression
      have hba : b - a ≥ 0 := by
        have h₁ : b - a ≥ c - a := by linarith only [hbc]
        have h₂ : c - a ≥ 0 := by linarith only [hac]
        linarith only [h₁, h₂]
      have h₁ : c - a = 0 := by nlinarith only [hba, h₂]
      have h₂ : b - a = 0 := by nlinarith only [h₁, hbc]
      constructor <;> linarith only [h₁, h₂]
  · by_cases hbc : b - c ≥ 0
    · -- if $c - b \geq 0$ and $b - c \geq 0$, then $a = b = c$
      have hcb : c - b ≥ 0 := by linarith only [hbc]
      have hab : a - b ≥ 0 := by linarith only [hcb, h₁]
      have hba : b - a ≥ 0 := by linarith only [hbc, hab]
      have h₁ : b - a = 0 := by nlinarith only [hba, hab]
      have h₂ : c - b = 0 := by nlinarith only [hcb, hbc]
      constructor <;> linarith only [h₁, h₂]
    · -- if $c - b \geq 0$ and $c - a \geq 0$, then $a = b = c$
      have hab : a - b ≥ 0 := by linarith only [h₂, h₁]
      have hba : b - a ≥ 0 := by linarith only [hab, hac]
      have h₁ : a - b = 0 := by nlinarith only [hba, hab]
      have h₂ : c - b = 0 := by nlinarith only [h₁, h₂]
      constructor <;> linarith only [h₁, h₂]
```