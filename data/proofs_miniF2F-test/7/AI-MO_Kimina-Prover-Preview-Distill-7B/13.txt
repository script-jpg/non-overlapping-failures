-- We prove that $f(f(2))=2$.
  have h₃ : σ.1 (σ.1 2) = 2 := by
    -- Because $f^{-1}(2)=10$, we have $f(10)=2$.
    have h₃ : σ.2 2 = 10 := h₀
    -- Because $f^{-1}(10)=1$, we have $f(1)=10$.
    have h₄ : σ.2 10 = 1 := h₁
    -- Because $f^{-1}(1)=2$, we have $f(2)=1$.
    have h₅ : σ.2 1 = 2 := h₂
    -- We rewrite these three pieces of information in terms of $f(f(x))$.
    have h₆ : σ.1 (σ.1 2) = σ.1 (σ.1 (σ.2 2)) := by rw [h₃]
    have h₇ : σ.1 (σ.1 2) = σ.1 (σ.1 (σ.2 10)) := by rw [h₄] at h₆; exact h₆
    have h₈ : σ.1 (σ.1 2) = σ.1 (σ.1 (σ.2 1)) := by rw [h₅] at h₇; exact h₇
    -- Now we can substitute $f(f(2))$ for $f(f(10))$ and $f(f(1))$.
    have h₉ : σ.1 (σ.1 (σ.2 2)) = σ.1 10 := by rw [Eq.symm (σ.right_inv 2)]
    have h₁₀ : σ.1 (σ.1 (σ.2 10)) = σ.1 1 := by rw [Eq.symm (σ.right_inv 10)]
    have h₁₁ : σ.1 (σ.1 (σ.2 1)) = σ.1 2 := by rw [Eq.symm (σ.right_inv 1)]
    -- So $f(f(2))=f(f(10))=f(f(1))=2$.
    rw [h₉, h₁₀, h₁₁]

  -- We prove that $f(f(1))=1$.
  have h₄ : σ.1 (σ.1 1) = 1 := by
    -- Because $f^{-1}(1)=2$, we have $f(2)=1$.
    have h₄ : σ.2 1 = 2 := h₂
    -- Because $f^{-1}(2)=10$, we have $f(10)=2$.
    have h₅ : σ.2 2 = 10 := h₀
    -- Because $f^{-1}(10)=1$, we have $f(1)=10$.
    have h₆ : σ.2 10 = 1 := h₁
    -- We rewrite these three pieces of information in terms of $f(f(x))$.
    have h₇ : σ.1 (σ.1 1) = σ.1 (σ.1 (σ.2 1)) := by rw [h₄]
    have h₈ : σ.1 (σ.1 1) = σ.1 (σ.1 (σ.2 2)) := by rw [h₅] at h₇; exact h₇
    have h₉ : σ.1 (σ.1 1) = σ.1 (σ.1 (σ.2 10)) := by rw [h₆] at h₈; exact h₈
    -- Now we can substitute $f(f(1))$ for $f(f(2))$ and $f(f(10))$.
    have h₁₀ : σ.1 (σ.1 (σ.2 1)) = σ.1 2 := by rw [Eq.symm (σ.right_inv 1)]
    have h₁₁ : σ.1 (σ.1 (σ.2 2)) = σ.1 10 := by rw [Eq.symm (σ.right_inv 2)]
    have h₁₂ : σ.1 (σ.1 (σ.2 10)) = σ.1 1 := by rw [Eq.symm (σ.right_inv 10)]
    -- So $f(f(1))=f(f(2))=f(f(10))=2$.
    rw [h₁₀, h₁₁, h₁₂]

  -- We have $f(f(10))=f(1)$ and $f(f(1))=1$ so $f(f(10))=1$.
  have h₅ : σ.1 (σ.1 10) = σ.1 1 := by
    -- Because $f^{-1}(10)=1$, we have $f(1)=10$.
    have h₅ : σ.2 10 = 1 := h₁
    -- We rewrite this in terms of $f(f(x))$.
    have h₆ : σ.1 (σ.1 10) = σ.1 (σ.1 (σ.2 10)) := by rw [h₅]
    -- Now we can substitute $f(f(10))$ for $f(f(1))$.
    have h₇ : σ.1 (σ.1 (σ.2 10)) = σ.1 1 := by rw [Eq.symm (σ.right_inv 10)]
    rw [h₆, h₇]
  rw [h₅, h₄]

```