-- Define the function f(t) = (2^t - 3t)t/4^t.
  let f := fun t : ℝ => (2 ^ t - 3 * t) * t / 4 ^ t

  -- Show that f(t) is equal to (t/4^t)(2^t - 3t).
  have hf : ∀ t : ℝ, f t = t / 4 ^ t * (2 ^ t - 3 * t) := by intro t; simp [f]; ac_rfl

  -- Show that f(t) is less than or equal to 1/12.
  have h : ∀ t : ℝ, f t ≤ 1 / 12 := by
    intro t
    rw [hf]
    -- Substitute x = t/4^t and y = 2^t - 3t.
    set x := t / 4 ^ t with hx
    set y := 2 ^ t - 3 * t with hy

    -- Show that x^2 + y^2 is greater than or equal to (x + y)^2 = (x + y)^2.
    have h₀ : x ^ 2 + y ^ 2 ≥ (x + y) ^ 2 := by
      linarith only [sq_nonneg (x - y)]

    -- Show that x + y = 1/2 * (t/4^t + (2^t - 3t)) is less than or equal to 1/2 * (1/6 + 1/2) = 1/6.
    have h₁ : x + y ≤ 1 / 6 := by
      have : x + y = 1 / 2 * (t / 4 ^ t + (2 ^ t - 3 * t)) := by ring
      rw [this]
      -- Show that 1/2 * (t/4^t + (2^t - 3t)) is less than or equal to 1/2 * (1/6 + 1/2) = 1/6.
      have h₁ : t / 4 ^ t ≤ 1 / 6 := by
        -- Consider the function f(t) = t/4^t. Show that it is decreasing.
        have h₁ : StrictAntiOn (fun t : ℝ => t / 4 ^ t) (Set.Icc 0 (1 / 2)) := by
          intro t ht s hs hts
          simp at ht hs
          simp [hts]
          -- Show that t/4^t is decreasing on (0, 1/2).
          have h₁ : t / 4 ^ t > s / 4 ^ s := by
            -- Use the fact that g(t) = t * 4^t is increasing on (0, 1/2).
            let g := fun t : ℝ => t * 4 ^ t
            have hg : StrictMonoOn (fun t : ℝ => t * 4 ^ t) (Set.Icc 0 (1 / 2)) := by
              intro t ht s hs hts
              simp at ht hs
              simp [hts]
              -- Show that t * 4^t is increasing on (0, 1/2).
              apply mul_lt_mul_of_pos_of_nonneg <;> linarith
            have hg₁ : t * 4 ^ t > s * 4 ^ s := by exact hg ht hs hts
            -- Show that t/4^t < s/4^s.
            have h₂ : t / 4 ^ t < s / 4 ^ s := by
              apply (div_lt_div_iff_of_pos_right (by positivity)).mpr
              linarith
            exact h₂
          exact h₁
        -- Consider the function f(t) = t/4^t. Show that it is decreasing on (1/2, 1).
        have h₂ : StrictAntiOn (fun t : ℝ => t / 4 ^ t) (Set.Icc (1 / 2) 1) := by
          intro t ht s hs hts
          simp at ht hs
          simp [hts]
          -- Show that t/4^t is decreasing on (1/2, 1).
          have h₂ : t / 4 ^ t > s / 4 ^ s := by
            -- Use the fact that g(t) = t * 4^t is increasing on (1/2, 1).
            let g := fun t : ℝ => t * 4 ^ t
            have hg : StrictMonoOn (fun t : ℝ => t * 4 ^ t) (Set.Icc (1 / 2) 1) := by
              intro t ht s hs hts
              simp at ht hs
              simp [hts]
              -- Show that t * 4^t is increasing on (1/2, 1).
              apply mul_lt_mul_of_pos_of_nonneg <;> linarith
            have hg₁ : t * 4 ^ t > s * 4 ^ s := by exact hg ht hs hts
            -- Show that t/4^t > s/4^s.
            have h₃ : t / 4 ^ t > s / 4 ^ s := by
              apply (div_lt_div_iff_of_pos_right (by positivity)).mpr
              linarith
            exact h₃
          exact h₂
        -- Consider the function f(t) = t/4^t. Show that it is decreasing on (1, ∞).
        have h₃ : StrictAntiOn (fun t : ℝ => t / 4 ^ t) (Set.Icc 1 (Real.pi * 4)) := by
          intro t ht s hs hts
          simp at ht hs
          simp [hts]
          -- Show that t/4^t is decreasing on (1, ∞).
          have h₃ : t / 4 ^ t > s / 4 ^ s := by
            -- Use the fact that g(t) = t * 4^t is increasing on (1, ∞).
            let g := fun t : ℝ => t * 4 ^ t
            have hg : StrictMonoOn (fun t : ℝ => t * 4 ^ t) (Set.Icc 1 (Real.pi * 4)) := by
              intro t ht s hs hts
              simp at ht hs
              simp [hts]
              -- Show that t * 4^t is increasing on (1, ∞).
              apply mul_lt_mul_of_pos_of_nonneg <;> linarith
            have hg₁ : t * 4 ^ t > s * 4 ^ s := by exact hg ht hs hts
            -- Show that t/4^t > s/4^s.
            have h₄ : t / 4 ^ t > s / 4 ^ s := by
              apply (div_lt_div_iff_of_pos_right (by positivity)).mpr
              linarith
            exact h₄
          exact h₃
        -- Consider the function f(t) = t/4^t. Show that it is decreasing on (Real.pi * 4, ∞).
        have h₄ : StrictAntiOn (fun t : ℝ => t / 4 ^ t) (Set.Icc (Real.pi * 4) (Real.pi * 4 + 1)) := by
          intro t ht s hs hts
          simp at ht hs
          simp [hts]
          -- Show that t/4^t is decreasing on (Real.pi * 4, ∞).
          have h₄ : t / 4 ^ t > s / 4 ^ s := by
            -- Use the fact that g(t) = t * 4^t is increasing on (Real.pi * 4, ∞).
            let g := fun t : ℝ => t * 4 ^ t
            have hg : StrictMonoOn (fun t : ℝ => t * 4 ^ t) (Set.Icc (Real.pi * 4) (Real.pi * 4 + 1)) := by
              intro t ht s hs hts
              simp at ht hs
              simp [hts]
              -- Show that t * 4^t is increasing on (Real.pi * 4, ∞).
              apply mul_lt_mul_of_pos_of_nonneg <;> linarith
            have hg₁ : t * 4 ^ t > s * 4 ^ s := by exact hg ht hs hts
            -- Show that t/4^t > s/4^s.
            have h₅ : t / 4 ^ t > s / 4 ^ s := by
              apply (div_lt_div_iff_of_pos_right (by positivity)).mpr
              linarith
            exact h₅
          exact h₄
        -- Consider the function f(t) = t/4^t. Show that it is decreasing on (Real.pi * 4 + 1, ∞).
        have h₅ : StrictAntiOn (fun t : ℝ => t / 4 ^ t) (Set.Icc (Real.pi * 4 + 1) (Real.pi * 4 + 1 + 1)) := by
          intro t ht s hs hts
          simp at ht hs
          simp [hts]
          -- Show that t/4^t is decreasing on (Real.pi * 4 + 1, ∞).
          have h₅ : t / 4 ^ t > s / 4 ^ s := by
            -- Use the fact that g(t) = t * 4^t is increasing on (Real.pi * 4 + 1, ∞).
            let g := fun t : ℝ => t * 4 ^ t
            have hg : StrictMonoOn (fun t : ℝ => t * 4 ^ t) (Set.Icc (Real.pi * 4 + 1) (Real.pi * 4 + 1 + 1)) := by
              intro t ht s hs hts
              simp at ht hs
              simp [hts]
              -- Show that t * 4^t is increasing on (Real.pi * 4 + 1, ∞).
              apply mul_lt_mul_of_pos_of_nonneg <;> linarith
            have hg₁ : t * 4 ^ t > s * 4 ^ s := by exact hg ht hs hts
            -- Show that t/4^t > s/4^s.
            have h₆ : t / 4 ^ t > s / 4 ^ s := by
              apply (div_lt_div_iff_of_pos_right (by positivity)).mpr
              linarith
            exact h₆
          exact h₅
        -- Now consider the function f(t) = t/4^t. Show that it is decreasing on (Real.pi * 4 + 1 + 1, ∞).
        have h₆ : StrictAntiOn (fun t : ℝ => t / 4 ^ t) (Set.Icc (Real.pi * 4 + 1 + 1) (Real.pi * 4 + 1 + 1 + 1)) := by
          intro t ht s hs hts
          simp at ht hs
          simp [hts]
          -- Show that t/4^t is decreasing on (Real.pi * 4 + 1 + 1, ∞).
          have h₆ : t / 4 ^ t > s / 4 ^ s := by
            -- Use the fact that g(t) = t * 4^t is increasing on (Real.pi * 4 + 1 + 1, ∞).
            let g := fun t : ℝ => t * 4 ^ t
            have hg : StrictMonoOn (fun t : ℝ => t * 4 ^ t) (Set.Icc (Real.pi * 4 + 1 + 1) (Real.pi * 4 + 1 + 1 + 1)) := by
              intro t ht s hs hts
              simp at ht hs
              simp [hts]
              -- Show that t * 4^t is increasing on (Real.pi * 4 + 1 + 1, ∞).
              apply mul_lt_mul_of_pos_of_nonneg <;> linarith
            have hg₁ : t * 4 ^ t > s * 4 ^ s := by exact hg ht hs hts
            -- Show that t/4^t > s/4^s.
            have h₇ : t / 4 ^ t > s / 4 ^ s := by
              apply (div_lt_div_iff_of_pos_right (by positivity)).mpr
              linarith
            exact h₇
          exact h₆
        -- Now we need to consider the case when t ≥ Real.pi * 4 + 1 + 1.
        by_cases h₇ : t ≥ Real.pi * 4 + 1 + 1
        -- If t ≥ Real.pi * 4 + 1 + 1, then t/4^t ≤ (Real.pi * 4 + 1 + 1)/4^(Real.pi * 4 + 1 + 1) ≤ 1/6.
        · have : t / 4 ^ t ≤ (Real.pi * 4 + 1 + 1) / 4 ^ (Real.pi * 4 + 1 + 1) := by
            -- Use the fact that the function t/4^t is decreasing on (Real.pi * 4 + 1 + 1, ∞).
            apply (StrictAntiOn.le_iff_le (h₆ (by linarith) (by linarith) (by linarith)).mp
          -- Show that (Real.pi * 4 + 1 + 1)/4^(Real.pi * 4 + 1 + 1) ≤ 1/6.
          have h₈ : (Real.pi * 4 + 1 + 1) / 4 ^ (Real.pi * 4 + 1 + 1) ≤ 1 / 6 := by
            -- We have 4^4 = 256 and 4^5 = 1024.
            have h₈ : 4 ^ (Real.pi * 4 + 1 + 1) ≥ 4 ^ (4 + 1 + 1) := by
              -- Show that Real.pi * 4 + 1 + 1 ≥ 4 + 1 + 1.
              have h₈ : Real.pi * 4 + 1 + 1 ≥ 4 + 1 + 1 := by
                linarith only [Real.pi_gt_three]
              exact (Nat.add_le_add_iff_right (1 + 1)).mpr h₈
            -- Show that (Real.pi * 4 + 1 + 1)/4^(Real.pi * 4 + 1 + 1) ≤ 5/1024.
            have h₉ : (Real.pi * 4 + 1 + 1) / 4 ^ (Real.pi * 4 + 1 + 1) ≤ 5 / 1024 := by
              -- Show that Real.pi * 4 + 1 + 1 ≤ 5.
              have h₁₀ : Real.pi * 4 + 1 + 1 ≤ (5 : ℝ) := by
                linarith only [Real.pi_lt_315]
              rw [div_le_div_iff_of_pos_right (by positivity)]
              apply Nat.le_of_add_le_add_left (by linarith)
            -- Show that 5/1024 ≤ 1/6.
            have h₁₀ : (5 : ℝ) / 1024 ≤ 1 / 6 := by
              norm_num
            rw [frac_le_frac (by positivity) (by positivity)]
            linarith
          linarith
        · -- If t < Real.pi * 4 + 1 + 1, then t/4^t ≤ (Real.pi * 4 + 1 + 1)/4^(Real.pi * 4 + 1 + 1) ≤ 1/6.
          clear h₇
          have h₈ : t / 4 ^ t ≤ (Real.pi * 4 + 1 + 1) / 4 ^ (Real.pi * 4 + 1 + 1) := by
            -- Use the fact that the function t/4^t is decreasing on (1, ∞).
            apply (StrictAntiOn.le_iff_le (h₃ (by linarith) (by linarith) (by linarith)).mp
          -- Show that (Real.pi * 4 + 1 + 1)/4^(Real.pi * 4 + 1 + 1) ≤ 1/6.
          have h₉ : (Real.pi * 4 + 1 + 1) / 4 ^ (Real.pi * 4 + 1 + 1) ≤ 1 / 6 := by
            -- We have 4^4 = 256 and 4^5 = 1024.
            have h₁₀ : 4 ^ (Real.pi * 4 + 1 + 1) ≥ 4 ^ (4 + 1 + 1) := by
              -- Show that Real.pi * 4 + 1 + 1 ≥ 4 + 1 + 1.
              have h₁₀ : Real.pi * 4 + 1 + 1 ≥ 4 + 1 + 1 := by
                linarith only [Real.pi_gt_three]
              exact (Nat.add_le_add_iff_right (1 + 1)).mpr h₁₀
            -- Show that (Real.pi * 4 + 1 + 1)/4^(Real.pi * 4 + 1 + 1) ≤ 5/1024.
            have h₁₁ : (Real.pi * 4 + 1 + 1) / 4 ^ (Real.pi * 4 + 1 + 1) ≤ 5 / 1024 := by
              -- Show that Real.pi * 4 + 1 + 1 ≤ 5.
              have h₁₂ : Real.pi * 4 + 1 + 1 ≤ (5 : ℝ) := by
                linarith only [Real.pi_lt_315]
              rw [div_le_div_iff_of_pos_right (by positivity)]
              apply Nat.le_of_add_le_add_left (by linarith)
            -- Show that 5/1024 ≤ 1/6.
            have h₁₃ : (5 : ℝ) / 1024 ≤ 1 / 6 := by
              norm_num
            rw [frac_le_frac (by positivity) (by positivity)]
            linarith
          linarith

    -- Show that (x