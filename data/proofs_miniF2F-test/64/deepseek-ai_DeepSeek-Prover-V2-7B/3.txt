have h₄ : (∑ k in (Set.range h).toFinset, k) = 12 := by
    have h₅ : (Set.range h).toFinset = {1, 12} := by
      ext x
      simp only [Set.mem_range, Set.mem_insert_iff, Set.mem_singleton_iff,
        Set.mem_toFinset]
      constructor
      · intro hx
        have h₆ := hx
        rcases h₆ with ⟨x, rfl⟩
        have h₇ : h x = Nat.gcd (f x) (g x) := h₂ x
        rw [h₇]
        have h₈ : f x = 12 * x + 7 := h₀ x
        have h₉ : g x = 5 * x + 2 := h₁ x
        have h₁₀ : Nat.gcd (12 * x + 7) (5 * x + 2) = 1 ∨ Nat.gcd (12 * x + 7) (5 * x + 2) = 12 := by
          have h₁₁ : Nat.gcd (12 * x + 7) (5 * x + 2) = 1 ∨ Nat.gcd (12 * x + 7) (5 * x + 2) = 12 := by
            have h₁₂ : 12 * x + 7 = 2 * (5 * x + 2) + (x + 3) := by omega
            have h₁₃ : 5 * x + 2 = 5 * x + 2 := by rfl
            have h₁₄ : Nat.gcd (12 * x + 7) (5 * x + 2) = Nat.gcd (5 * x + 2) (x + 3) := by
              rw [h₁₂]
              simp [Nat.gcd_comm]
            have h₁₅ : Nat.gcd (5 * x + 2) (x + 3) = Nat.gcd (x + 3) 2 := by
              have h₁₆ : 5 * x + 2 = 5 * (x + 3) - 13 := by omega
              rw [h₁₆]
              simp [Nat.gcd_comm]
              <;> omega
            have h₁₇ : Nat.gcd (x + 3) 2 = 1 ∨ Nat.gcd (x + 3) 2 = 1 := by
              have h₁₈ : x + 3 > 0 := by
                exact Nat.succ_pos x
              have h₁₉ : Nat.gcd (x + 3) 2 = 1 ∨ Nat.gcd (x + 3) 2 = 1 := by
                have h₂₀ : x % 2 = 0 ∨ x % 2 = 1 := by omega
                rcases h₂₀ with (h₂₀ | h₂₀) <;> simp [h₂₀, Nat.gcd_eq_right, Nat.gcd_eq_left, Nat.mod_eq_of_lt]
                <;> omega
              exact h₁₉
            rcases h₁₇ with (h₁₇ | h₁₇) <;> simp_all [h₁₄, h₁₅]
              <;> omega
          exact h₁₁
        rcases h₁₀ with (h₁₀ | h₁₀) <;> simp_all
        <;> omega
      · intro hx
        rcases hx with (rfl | rfl)
        · use 0
          simp [h₀, h₁, h₂]
          <;> norm_num
        · use 4
          simp [h₀, h₁, h₂]
          <;> norm_num
    rw [h₅]
    simp
    <;> norm_num
  exact h₄