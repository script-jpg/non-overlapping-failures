-- The enrollment increased by $4\%$, so it is $104\%$ of last year's enrollment.
  have h percentage change formula:
  \[
  \text{New Enrollment} = \text{Old Enrollment} \times (1 + \text{Percentage Change})
  \]
  In this problem, the new enrollment is 598 students, and the percentage change is 4% (0.04) increase. We need to find the old enrollment.

  Let's denote the old enrollment as \( x \). Then, according to the formula:
  \[
  598 = x \times (1 + 0.04)
  \]
  Simplifying, we have:
  \[
  598 = x \times 1.04
  \]
  To solve for \( x \), we can divide both sides by 1.04:
  \[
  x = \frac{598}{1.04}
  \]
  Calculating this gives:
  \[
  x = 575
  \]
  Therefore, last year's enrollment was 575 students.

  Now, let's translate this into Lean 4 code:

  ```tactics
import Mathlib
import Aesop

set_option maxHeartbeats 0

open BigOperators Real Nat Topology Rat
```

We've imported the necessary libraries and opened namespaces for various mathematical components. The `maxHeartbeats 0` option allows Lean to perform more computations if needed.

Now, let's define our theorem statement:

```tactics
theorem mathd_algebra_137 (x : ℕ) (h₀ : ↑x + (4 : ℝ) / (100 : ℝ) * ↑x = 598) : x = 575 := by
```

Our theorem states that if `x` is the old enrollment, and the new enrollment is 598 students, which is 4% more than the old enrollment, then `x = 575`. The hypothesis `h₀` represents the relationship between the old and new enrollments: `↑x + (4 : ℝ) / (100 : ℝ) * ↑x = 598`.

Let's think about how to solve this. We have:
- New Enrollment = Old Enrollment + 4% of Old Enrollment
- 598 = x + 0.04x
- 598 = 1.04x
- x = 598 / 1.04 = 575

In Lean, we need to:
1. Recognize that `↑x` is the embedding of natural number `x` into reals
2. Solve the equation `↑x + (4 : ℝ) / (100 : ℝ) * ↑x = 598`
3. Prove that the only solution is `x = 575`

Let's continue with the proof:

```tactics
have h1 : (x : ℝ) = 575 := by
  linarith
```

The `linarith` tactic is powerful for solving linear arithmetic goals. It can derive that if `↑x + (4 : ℝ) / (100 : ℝ) * ↑x = 598`, then `x = 575` by:
1. Recognizing that `↑x + (4 : ℝ) / (100 : ℝ) * ↑x` is `1.04 * x`
2. Solving `1.04 * x = 598` to get `x = 598 / 1.04`
3. Computing `598 / 1.04 = 575`
4. Verifying that `575` is indeed the unique solution

Now we have established that `x = 575` as a real number. We need to conclude that `x = 575` as a natural number:

```tactics
exact_mod_cast h1
```

The `exact_mod_cast` tactic is used to convert between different numeric types when the value is known to be an integer. Since `x` is a natural number and we've proven it equals 575 as a real number, this tactic can cast the result back to the natural number type.

To summarize what we've proven:
1. We started with the equation `↑x + (4 : ℝ) / (100 : ℝ) * ↑x = 598`
2. Recognized it as `1.04 * x = 598`
3. Solved for `x` to get `x = 575`
4. Concluded that since `575` is a natural number, `x = 575` in the original context

Therefore, the answer is 575 students.
</--Because of redistricting, Liberty Middle School's enrollment increased to 598 students. This is an increase of $4\%$ over last year's enrollment. What was last year's enrollment? Show that it is 575\text{ students}.-/
theorem mathd_algebra_137 (x : ℕ) (h₀ : ↑x + (4 : ℝ) / (100 : ℝ) * ↑x = 598) : x = 575 := by
  have h1 : (x : ℝ) = 575 := by
    linarith
  exact_mod_cast h1
```