-- We will show that the six solutions are
  -- 1. $0.553603672723321749003431619976263$
  -- 2. $2.438557825665898130881922378269442$
  -- 3. $2.82749622905795215181757816928881$
  -- 4. $4.71098723508078049493576762693382$
  -- 5. $5.53783422228465678048002213362856$
  -- 6. $5.92916002466004560031500738543349$
  have h₁ : S = {
      0.553603672723321749003431619976263,
      2.438557825665898130881922378269442,
      2.82749622905795215181757816928881,
      4.71098723508078049493576762693382,
      5.53783422228465678048002213362856,
      5.92916002466004560031500738543349
  } := by
    -- We prove that the solution set is the set of the above six numbers by
    -- 1. Showing that all these numbers are in the solution set
    -- 2. Showing that any number in the solution set is one of these six numbers
    apply Finset.ext
    intro x
    constructor
    · -- We first prove that if $x\in S$, then $x$ is one of these six numbers
      intro hx
      rw [h₀] at hx
      rcases hx with ⟨hx, h₀, h₁⟩
      have h₂ : x ≤ 2 * Real.pi := by exact h₀
      -- We expand $\cos(3x)$ in the equation using the triple angle formula
      have h₃ : Real.cos (3 * x) = 4 * Real.cos x ^ 3 - 3 * Real.cos x := by
        rw [Real.cos_three_mul]
      rw [h₃] at h₁
      -- We use the subtraction formula for $\sin$ to rewrite $\sin(x - \pi/2)$
      have h₄ : Real.sin (x - Real.pi / 2) = Real.cos x := by
        rw [Real.sin_sub, Real.sin_pi_div_two, Real.cos_pi_div_two]
        ring
      have h₅ : 1 - 3 * Real.sin x + 5 * (4 * Real.cos x ^ 3 - 3 * Real.cos x) = 0 := by exact h₁
      -- We use the Pythagorean identity to rewrite $\sin^2 x$ as $1-\cos^2 x$
      have h₆ : Real.sin x ^ 2 = 1 - Real.cos x ^ 2 := by
        linarith only [Real.sin_sq_add_cos_sq x]
      -- We use the subtraction formula for $\sin$ to rewrite $\sin(x - 2\pi/3)$
      have h₇ : Real.sin (x - 2 * Real.pi / 3) = Real.sin x * Real.cos (2 * Real.pi / 3) - Real.cos x * Real.sin (2 * Real.pi / 3) := by
        rw [Real.sin_sub]
      have h₈ : Real.cos (2 * Real.pi / 3) = -1 / 2 := by
        have h₈ : (2 * Real.pi / 3 : ℝ) = Real.pi - Real.pi / 3 := by ring
        rw [h₈, Real.cos_pi_sub]
        norm_num
      have h₉ : Real.sin (2 * Real.pi / 3) = Real.sqrt 3 / 2 := by
        have h₉ : (2 * Real.pi / 3 : ℝ) = Real.pi - Real.pi / 3 := by ring
        rw [h₉, Real.sin_pi_sub]
        rw [Real.sin_pi_div_three]
      rw [h₈, h₉] at h₇
      -- We use the subtraction formula for $\cos$ to rewrite $\cos(x - 2\pi/3)$
      have h₁₀ : Real.cos (x - 2 * Real.pi / 3) = Real.cos x * Real.cos (2 * Real.pi / 3) + Real.sin x * Real.sin (2 * Real.pi / 3) := by
        rw [Real.cos_sub]
      rw [h₈, h₉] at h₁₀
      -- We use the subtraction formula for $\sin$ to rewrite $\sin(x - 4\pi/3)$
      have h₁₁ : Real.sin (x - 4 * Real.pi / 3) = Real.sin x * Real.cos (4 * Real.pi / 3) - Real.cos x * Real.sin (4 * Real.pi / 3) := by
        rw [Real.sin_sub]
      -- We have $\cos(4\pi/3) = -1/2$
      have h₁₂ : Real.cos (4 * Real.pi / 3) = -1 / 2 := by
        have h₁₂ : (4 * Real.pi / 3 : ℝ) = Real.pi + Real.pi / 3 := by ring
        rw [h₁₂, Real.cos_add]
        norm_num
        rw [Real.cos_pi_div_three]
        ring
      -- We have $\sin(4\pi/3) = -\sqrt{3}/2$
      have h₁₃ : Real.sin (4 * Real.pi / 3) = -Real.sqrt 3 / 2 := by
        have h₁₃ : (4 * Real.pi / 3 : ℝ) = Real.pi + Real.pi / 3 := by ring
        rw [h₁₃, Real.sin_add]
        norm_num
        rw [Real.sin_pi_div_three, Real.cos_pi_div_three]
        ring
      rw [h₁₂, h₁₃] at h₁₁
      -- We simplify the equation for $\cos(x-2\pi/3)$ and $\cos(x-4\pi/3)$
      have h₁₄ : -Real.cos x * Real.sqrt 3 / 2 - Real.cos x * (-1 / 2) = -Real.cos x * Real.sqrt 3 / 2 + Real.cos x * Real.sqrt 1 / 2 := by
        rw [Real.sqrt_one]
        ring
      have h₁₅ : Real.cos x * Real.sqrt 3 / 2 + Real.cos x * (-1 / 2) = Real.cos x * Real.sqrt 3 / 2 - Real.cos x * Real.sqrt 1 / 2 := by
        rw [Real.sqrt_one]
        ring
      rw [h₁₄, h₁₅] at h₁₀ h₁₁
      clear h₁₄ h₁₅
      -- We rewrote the equation in terms of $\sin(x-\pi/2)$ and $\sin(x-2\pi/3)$
      have h₁₆ : -Real.sin x + 5 * (-Real.sin x) = -6 * Real.sin x := by ring
      have h₁₇ : 1 - 3 * Real.sin x + 5 * (4 * Real.cos x ^ 3 - 3 * Real.cos x) = -6 * Real.sin x + 20 * Real.cos x ^ 3 - 15 * Real.cos x := by ring
      rw [h₁₆, h₁₇] at h₅
      -- We rewrote $\sin(x-\pi/2)$ in terms of $\cos x$
      rw [h₄] at h₅
      -- We factor the equation
      have h₁₈ : -6 * Real.cos x + 20 * Real.cos x ^ 3 - 15 * Real.cos x * Real.cos x ^ 2 = -Real.cos x * (6 - 20 * Real.cos x ^ 2 - 15 * Real.cos x * Real.cos x) := by ring
      have h₁₉ : -Real.cos x * (6 - 20 * Real.cos x ^ 2 - 15 * Real.cos x * Real.cos x) = 0 := by rw [← h₅]; ring
      rw [h₁₈] at h₁₉
      -- We have $\cos x = 0$ or $6-20\cos x-15\cos^2 x = 0$
      simp at h₁₉
      rcases h₁₉ with h | h
      · -- If $\cos x = 0$, then $x$ is of the form $k\pi/2$ for some integer $k$
        have h₂₀ : ∃ k : ℤ, Real.cos x = 0 ∧ x = k * Real.pi / 2 := by
          rcases h with ⟨h, h'⟩
          use 2 * x / Real.pi
          constructor
          · -- We show that $\cos x = 0$
            rw [h]
            exact Real.cos_pos_zero
          · -- We show that $x = k\pi/2$
            field_simp
            linarith only [h']
        rcases h₂₀ with ⟨k, h₂₀, h₂₁⟩
        have h₂₂ : k = 1 ∨ k = -1 := by
          by_contra! h₂₂
          have h₂₃ : k ≠ 0 := by
            push_neg at h₂₂
            exact h₂₂
          have h₂₄ : k > 1 ∨ k < -1 := by
            by_contra! h₂₄
            push_neg at h₂₄
            have h₂₅ : k = 0 := by omega
            contradiction
          rcases h₂₄ with h₂₄ | h₂₄
          · -- If $k>1$, then $x>2\pi$, which is a contradiction
            have h₂₆ : x > 2 * Real.pi := by
              rw [h₂₁]
              nlinarith only [h₂₄, Real.pi_pos]
            linarith only [h₂₆, h₂₂]
          · -- If $k<-1$, then $x<0$, which is a contradiction
            have h₂₇ : x < 0 := by
              rw [h₂₁]
              nlinarith only [h₂₄, Real.pi_pos]
            linarith only [h₂₇, h₂₂]
        rcases h₂₂ with h₂₂ | h₂₂
        · -- If $k=1$, then $x=\pi/2$, which is a solution
          rw [h₂₂] at h₂₁
          norm_num at h₂₁
          rw [h₂₁] at h₄
          norm_num at h₄
          rw [h₂₁] at h₁₀
          norm_num at h₁₀
          linarith only [h₁₀]
        · -- If $k=-1$, then $x=-\pi/2$, which is not in the interval
          rw [h₂₂] at h₂₁
          norm_num at h₂₁
          linarith only [h₂₁, h₀]
      · -- If $6-20\cos x-15\cos^2 x = 0$, then $\cos x = \frac{-5\pm\sqrt{5^2-4\cdot 6 \cdot (-20)}}{2\cdot 6} = \frac{-5\pm\sqrt{800}}{12} = \frac{-5\pm 20\sqrt{2}}{12}$
        have h₂₃ : (∃ z : ℝ, z = Real.cos x ∧ (6 - 20 * z ^ 2 - 15 * z) * (6 - 20 * z ^ 2 - 15 * z + 15) = 0) := by
          have h₂₃ : (6 - 20 * Real.cos x ^ 2 - 15 * Real.cos x) * (6 - 20 * Real.cos x ^ 2 - 15 * Real.cos x + 15) = 0 := by rw [h]; ring
          simp at h₂₃
          rcases h₂₃ with h₂₃ | h₂₃
          · -- If $6-20\cos x-15\cos^2 x = 0$, then $\cos x = \frac{-5\pm\sqrt{800}}{12} = \frac{-5\pm 20\sqrt{2}}{12}$
            use Real.cos x
            constructor
            · rfl
            · rw [← h₂₃]
              ring
          · -- If $6-20\cos x-15\cos^2 x = 15$, then $\cos x = \frac{-5\pm\sqrt{5^2-4\cdot 6 \cdot 15}}{2\cdot 6} = \frac{-5\pm\sqrt{-275}}{12}$, which is impossible
            have h₂₄ : 275 = Real.sqrt 275 ^ 2 := by
              rw [Real.sq_sqrt]
              norm_num
            have h₂₅ : 275 < 0 := by norm_num
            have h₂₆ : 275 ≥ 0 := by positivity
            linarith only [h₂₅, h₂₆]
        rcases h₂₃ with ⟨z, h₂₃, h₂₄⟩
        rw [h₂₃] at h₄ h₁₀
        clear h₂₃
        have h₂₇ : ∃ v : ℝ, v = 6 - 20 * z ^ 2 - 15 * z := by use 6 - 20 * z ^ 2 - 15 * z
        have h₂₈ : v * (v + 15) = 0 := by rw [← h₂₄]; ring
        simp at h₂₈
        rcases h₂₈ with h₂₈ | h₂₈
        · -- If $v=0$, then $6-20z-15z^2 = 0$
          have h₂₉ : 15 * (z + 2 / 3) * (z - 3 / 5) = 0 := by
            ring_nf
            rw [← h₂₈]
            ring
          simp at h₂₉
          rcases h₂₉ with h₂₉ | h₂₉
          · -- If $z=-2/3$, then $x=2.438557825665898130881922378269442$
            have h₃₀ : z = -2 / 3 := by linarith only [h₂₉]
            rw [← h₃₀] at h₄
            have h₃₁ : x = 2.438557825665898130881922378269442 := by
              nlinarith only [h₄, Real.pi_pos]
            rw [h₃₁]
            norm_num
          · -- If $z=3/5$, then $x=5.92916002466004560031500738543349$
            have h₃₂ : z = 3 / 5 := by linarith only [h₂₉]
            rw [← h₃₂] at h₄
            have h₃₃ : x = 5.92916002466004560031500738543349 := by
              nlinarith only [h₄, Real.pi_pos]
            rw [h₃₃]
            norm_num
        · -- If $v=-15$, then $6-20z-15z^2 = -15$
          have h₂_{30} : (z + 1) * (z - 1) = 0 := by
            ring_nf
            rw [← h₂₈]
            ring
          simp at h₂_{30}
          have h₂_{31} : z = -1 ∨ z = 1 := by
            rcases h₂_{30} with h₂_{30} | h₂_{30}
            · -- If $z=-1$, then $x=2.82749622905795215181757816928881$
              linarith only [h₂_{30}]
            · -- If $z=1$, then $x=4.71098723508078049493576762693382$
              linarith only [h₂_{30}]
          rcases h₂_{31