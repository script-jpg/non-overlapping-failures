have h₂ : a ^ 2 % 8 = 1 := by
    -- By assumption, $a$ is odd. So $a \equiv 1, 3, 5, 7 \mod 8$.
    obtain ⟨k, hk⟩ := h₀
    have : a % 8 = 1 ∨ a % 8 = 3 ∨ a % 8 = 5 ∨ a % 8 = 7 := by omega
    rcases this with (h | h | h | h) <;> (rw [pow_two, Int.mul_emod, h]; omega)

  -- Since $4 \mid b$, we have $b \equiv 0 \mod 4$.
  obtain ⟨c, hc⟩ := h₁
  have h₃ : b % 8 = 0 ∨ b % 8 = 4 := by omega

  -- If $b \equiv 0 \mod 8$, then $b^2 \equiv 0 \mod 8$.
  have h₄ : b ^ 2 % 8 = 0 ∨ b ^ 2 % 8 = 0 := by
    rcases h₃ with (h | h) <;> (rw [pow_two, Int.mul_emod, h]; omega)

  -- If $b \equiv 4 \mod 8$, then $b^2 \equiv 16 \equiv 0 \mod 8$.
  have h₅ : b ^ 2 % 8 = 0 := by
    rcases h₃ with (h | h) <;> (rw [pow_two, Int.mul_emod, h]; omega)

  -- In any case, $a^2 + b^2 \equiv 1 \mod 8$.
  omega
```