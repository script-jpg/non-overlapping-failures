have h₂ : a ^ 2 % 8 = 1 := by
    -- 4 ∣ b => b = 4k for some k
    rcases h₁ with ⟨k, hk⟩
    rw [hk]
    -- We have (2b)^2 = 4b^2
    have : (2 * k) ^ 2 = 4 * b ^ 2 := by ring
    rw [this]
    -- 8 ∣ 4b^2 => 8 ∣ (2b)^2
    have : 8 ∣ (2 * k) ^ 2 := by
      rw [show (2 * k) ^ 2 = 4 * k ^ 2 by ring]
      -- 8 ∣ 4k^2 since 8 ∣ 4
      omega
    -- a^2 ≡ 1 mod 8
    exact Int.sq_mod_eq_one_of_dvd (show 8 ∣ a ^ 2 - 1 by omega) a

  have h₃ : b ^ 2 % 8 = 0 := by
    -- 4 ∣ b => b = 4k for some k
    rcases h₁ with ⟨k, hk⟩
    rw [hk]
    -- We have (2k)^2 = 4k^2
    have : (2 * k) ^ 2 = 4 * k ^ 2 := by ring
    rw [this]
    -- 8 ∣ 4k^2
    have : 8 ∣ (2 * k) ^ 2 := by
      rw [show (2 * k) ^ 2 = 4 * k ^ 2 by ring]
      -- 8 ∣ 4k^2
      omega
    -- b^2 ≡ 0 mod 8
    exact pow_succ_mod_eq_zero_iff_dvd 2 (show 8 ∣ (2 * k) ^ 2 by omega) (by omega)

  -- a^2 + b^2 ≡ 1 + 0 ≡ 1 mod 8
  omega
```