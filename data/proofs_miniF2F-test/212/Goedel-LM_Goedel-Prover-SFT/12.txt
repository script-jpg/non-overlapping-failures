/-
  Given an odd integer \( a \) and a natural number \( b \) such that \( 4 \mid b \), we need to show that \( a^2 + b^2 \equiv 1 \mod 8 \).
  1. Since \( a \) is odd, we can write \( a = 2k + 1 \) for some integer \( k \).
  2. We need to consider the possible values of \( a^2 \mod 8 \).
  3. Since \( a \) is odd, \( a^2 \mod 8 \) can be 1, 9, or 25 modulo 8.
  4. Simplifying these values, we find that \( a^2 \mod 8 \) can only be 1 or 9 modulo 8.
  5. Since \( 9 \equiv 1 \mod 8 \), we have \( a^2 \mod 8 = 1 \).
  6. Similarly, for \( b \), since \( 4 \mid b \), \( b^2 \mod 8 \) can be 0, 16, or 256 modulo 8.
  7. Simplifying these values, we find that \( b^2 \mod 8 \) can only be 0 or 16 modulo 8.
  8. Since \( 16 \equiv 0 \mod 8 \), we have \( b^2 \mod 8 = 0 \).
  9. Adding these results, we get \( a^2 + b^2 \mod 8 = 1 + 0 = 1 \).
  Thus, \( a^2 + b^2 \equiv 1 \mod 8 \).
  -/
  -- Since a is odd, a^2 modulo 8 can only be 1 or 9 modulo 8.
  have h₂ : a ^ 2 % 8 = 1 := by
    have h₂₁ : a % 8 = 1 ∨ a % 8 = 3 ∨ a % 8 = 5 ∨ a % 8 = 7 := by
      cases' h₀ with k hk
      omega
    rcases h₂₁ with (h₂₁ | h₂₁ | h₂₁ | h₂₁) <;>
    simp [h₂₁, pow_two, Int.mul_emod, Int.add_emod]
  -- Since 4 divides b, b^2 modulo 8 can only be 0 or 16 modulo 8.
  have h₃ : b ^ 2 % 8 = 0 := by
    have h₃₁ : b % 8 = 0 ∨ b % 8 = 4 ∨ b % 8 = 8 ∨ b % 8 = 12 := by
      omega
    rcases h₃₁ with (h₃₁ | h₃₁ | h₃₁ | h₃₁) <;>
    simp [h₃₁, pow_two, Int.mul_emod, Int.add_emod]
  -- Adding the results, we get a^2 + b^2 modulo 8 = 1 + 0 = 1.
  omega
```