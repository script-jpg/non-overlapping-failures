/-
  Given an odd integer \( a \) and a natural number \( b \) such that \( 4 \mid b \), we need to show that \( a^2 + b^2 \equiv 1 \mod 8 \).
  1. Since \( a \) is an odd integer, we can write \( a \) as \( 2k + 1 \) for some integer \( k \).
  2. Given \( 4 \mid b \), we can write \( b \) as \( 4m \) for some integer \( m \).
  3. We need to compute \( a^2 + b^2 \mod 8 \).
  4. Substituting \( a = 2k + 1 \) and \( b = 4m \) into \( a^2 + b^2 \), we get:
     \[
     a^2 + b^2 = (2k + 1)^2 + (4m)^2 = (4k^2 + 4k + 1) + 16m^2 = 4k^2 + 4k + 16m^2 + 1
     \]
  5. Since \( 4k^2 + 4k \) is a multiple of 8, it is congruent to 0 modulo 8.
  6. Therefore, \( a^2 + b^2 \equiv 1 \mod 8 \).
  -/
  -- Since a is odd, we can write a as 2k + 1 for some integer k.
  have h : a % 8 = 1 ∨ a % 8 = 3 ∨ a % 8 = 5 ∨ a % 8 = 7 := by
    cases' h₀ with k hk
    omega
  -- Given 4 divides b, we can write b as 4m for some integer m.
  have h' : b % 8 = 0 ∨ b % 8 = 4 := by
    cases' h₁ with m hm
    omega
  -- We need to compute a^2 + b^2 modulo 8.
  rcases h with (h | h | h | h) <;> rcases h' with (h' | h') <;> simp [h, h', pow_two, Int.add_emod, Int.mul_emod]
  <;> omega
```