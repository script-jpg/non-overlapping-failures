/-
  Given an odd integer \( a \) and a natural number \( b \) such that \( 4 \mid b \), we need to show that \( a^2 + b^2 \equiv 1 \mod 8 \).
  1. Since \( a \) is an odd integer, \( a \) can be written as \( 2k + 1 \) for some integer \( k \).
  2. Given \( 4 \mid b \), \( b \) can be written as \( 4m \) for some integer \( m \).
  3. We need to compute \( a^2 + b^2 \mod 8 \).
  4. Substitute \( a = 2k + 1 \) and \( b = 4m \) into \( a^2 + b^2 \).
  5. Calculate \( a^2 \) and \( b^2 \):
     \[
     a^2 = (2k + 1)^2 = 4k^2 + 4k + 1
     \]
     \[
     b^2 = (4m)^2 = 16m^2
     \]
  6. Add these results:
     \[
     a^2 + b^2 = 4k^2 + 4k + 1 + 16m^2
     \]
  7. Since \( 4k^2 \) and \( 16m^2 \) are multiples of 8, they are congruent to 0 modulo 8.
  8. Therefore,
     \[
     a^2 + b^2 \equiv 0 + 0 \equiv 0 \mod 8
     \]
  9. However, we need to show that \( a^2 + b^2 \equiv 1 \mod 8 \). This is a contradiction, so we need to re-evaluate our approach.
  10. Instead, consider the possible values of \( a \) and \( b \) modulo 8. Since \( a \) is odd, \( a \equiv 1 \mod 8 \), \( a \equiv 3 \mod 8 \), \( a \equiv 5 \mod 8 \), or \( a \equiv 7 \mod 8 \).
  11. Since \( 4 \mid b \), \( b \equiv 0 \mod 8 \), \( b \equiv 4 \mod 8 \), or \( b \equiv 8 \mod 8 \).
  12. Calculate \( a^2 + b^2 \) for each combination:
      - \( a \equiv 1 \mod 8 \):
        \[
        a^2 + b^2 \equiv 1^2 + 4^2 \equiv 1 + 16 \equiv 17 \equiv 1 \mod 8
        \]
      - \( a \equiv 3 \mod 8 \):
        \[
        a^2 + b^2 \equiv 3^2 + 4^2 \equiv 9 + 16 \equiv 25 \equiv 1 \mod 8
        \]
      - \( a \equiv 5 \mod 8 \):
        \[
        a^2 + b^2 \equiv 5^2 + 4^2 \equiv 25 + 16 \equiv 41 \equiv 1 \mod 8
        \]
      - \( a \equiv 7 \mod 8 \):
        \[
        a^2 + b^2 \equiv 7^2 + 4^2 \equiv 49 + 16 \equiv 65 \equiv 1 \mod 8
        \]
  13. Therefore, \( a^2 + b^2 \equiv 1 \mod 8 \).
  -/
  cases' h₀ with k hk
  cases' h₁ with m hm
  rw [hk, hm]
  -- Simplify the expression using the given values of a and b
  simp [pow_two, Int.add_emod, Int.mul_emod]
  -- Use the fact that a is odd and b is divisible by 4 to simplify the expression modulo 8
  have h : a % 8 = 1 ∨ a % 8 = 3 ∨ a % 8 = 5 ∨ a % 8 = 7 := by
    cases' h₀ with k hk
    omega
  have h' : b % 8 = 0 ∨ b % 8 = 4 ∨ b % 8 = 8 := by
    cases' h₁ with m hm
    omega
  rcases h with (h | h | h | h) <;> rcases h' with (h' | h' | h') <;> simp [h, h', Int.add_emod, Int.mul_emod]
  -- Use omega to conclude the proof
  <;> omega
```