have hp : 1 < p := h₀.1
  have hq : 1 < q := by linarith
  have hr : 1 < r := by linarith
  have hpq : p < q := h₀.2.1
  have hqr : q < r := h₀.2.2

  have hpqr : 0 < p * q * r - 1 := by
    have : 0 < p * q * r := by positivity
    linarith

  have hpqr' : 0 < p * q - 1 := by
    have : 0 < p * q := by positivity
    linarith

  have hpqr'' : 0 < p - 1 := by
    have : 0 < p := by positivity
    linarith

  -- We have $(p-1) \mid p-1$, $(p-1) \mid (q-1)(r-1)$, $(q-1) \mid (p-1)(r-1)$, $(r-1) \mid (p-1)(q-1)$.
  have h₂ : (p - 1) ∣ p * q * r - 1 := by
    use (q - 1) * (r - 1)
    ring
  have h₃ : (q - 1) ∣ p * q * r - 1 := by
    use (p - 1) * (r - 1)
    ring
  have h₄ : (r - 1) ∣ p * q * r - 1 := by
    use (p - 1) * (q - 1)
    ring

  -- We have $(p-1) \mid (q-1)(r-1)$.
  replace h₂ : (p - 1) ∣ (q - 1) * (r - 1) := by
    apply Nat.dvd_trans _ h₂
    apply Nat.dvd_mul_right

  -- We have $(p-1) \mid (r-1)(q-1)$.
  replace h₃ : (p - 1) ∣ (r - 1) * (q - 1) := by
    apply Nat.dvd_trans _ h₃
    apply Nat.dvd_mul_right

  -- Since $(p-1) \mid (r-1)(q-1)$ and $r > q > p$, we have $(p-1) \mid (r-1)$.
  have h₅ : (p - 1) ∣ r - 1 := by
    rw [← Nat.Coprime.dvd_mul_left]
    exact h₃
    have : r - 1 > q - 1 := by linarith
    have : Nat.Coprime (p - 1) (q - 1) := by
      apply Nat.coprime_of_dvd
      apply lt_trans?_ hpq
      apply Nat.le_sub_one_of_lt
      linarith
    exact this

  -- Since $p$ is a divisor of $(p-1)$, $p$ must be 2.
  have h₆ : p = 2 := by
    apply hp_of_dvd at h₂
    apply hp_of_dvd at h₅
    omega

  subst h₆

  -- We have $(q-1) \mid (r-1)$.
  replace h₅ : q - 1 ∣ r - 1 := by
    rw [← Nat.Coprime.dvd_mul_left]
    exact h₅
    have : r - 1 > q - 1 := by linarith
    have : Nat.Coprime (q - 1) (q - 1) := by
      apply Nat.coprime_of_dvd
      apply lt_trans?_ hq
      apply Nat.le_sub_one_of_lt
      linarith
    exact this

  -- By trying all possibilities, we find that $(q-1)$ divides $(r-1)$ only if $(q-1) = 1$ or $(q-1) = 3$.
  have h₇ : q - 1 = 1 ∨ q - 1 = 3 := by
    have hpq' : 0 < q - 1 := by linarith
    have hqr' : 0 < r - q := by linarith
    have hqqr' : 0 < (r - 1) - (q - 1) := by linarith
    rw [Nat.dvd_iff_mod_eq_zero] at h₅
    rcases h₅ with h₅ | h₅
    · left
      omega
    · right
      have : r - 1 = (r - q) + (q - 1) := by omega
      rw [this, Nat.add_mod, h₅, zero_add, Nat.mod_self] at hqqr'
      have : q - 1 < 4 := by omega
      omega

  -- If $(q-1) = 1$, then $(r-1) = (q-1)(r-1)/(q-1) = 3$.
  replace h₇ : q - 1 = 1 ∨ q - 1 = 3 := by
    clear h₅ h₈
    have h₅ : q - 1 ∣ r - 1 := by
      rw [← Nat.Coprime.dvd_mul_left]
      exact h₅
      have : r - 1 > q - 1 := by linarith
      have : Nat.Coprime (q - 1) (q - 1) := by
        apply Nat.coprime_of_dvd
        apply lt_trans?_ hq
        apply Nat.le_sub_one_of_lt
        linarith
      exact this
    rcases h₇ with h₇ | h₇
    · left
      omega
    · right
      replace h₇ : q - 1 = 3 := by omega
      have h₈ : r - 1 = 3 := by
        rw [h₇, Nat.Coprime.dvd_mul_left] at h₅
        exact h₅
        rw [Nat.mod_eq_of_modEq]
        exact hqqr'
        rw [Nat.mod_eq_of_lt]
        omega
      have h₉ : r - 1 = 3 := by exact h₈
      have h₁₀ : r = 4 := by omega
      subst h₁₀
      -- There are no solutions for $q > 5$.
      have h₁₁ : q < 5 := by
        by_contra!
        have : r - q > 1 := by omega
        have : (r - 1) - (q - 1) > 1 := by omega
        have : (r - 1) - (q - 1) = 0 := by omega
        omega
      -- If $q = 4$, then $r = 4$ or $r = 5$.
      replace h₁₁ : q = 4 ∨ q = 5 := by omega
      rcases h₁₁ with h₁₁ | h₁₁
      · left
        omega
      · right
        subst h₁₁
        -- No solution for $q = 5$.
        have h₁₂ : (q - 1) * (r - 1) > r - 1 := by
          rw [Nat.mul_comm, h₉, Nat.sub_self]
          omega
        have h₁₃ : (q - 1) * (r - 1) ≤ r - 1 := by
          rw [h₉, Nat.sub_self]
          apply Nat.mul_le_self_right
          omega
        omega

  -- If $(q-1) = 3$, then $(r-1) = (q-1)(r-1)/(q-1) = 9$.
  replace h₇ : q - 1 = 1 ∨ q - 1 = 3 := by
    clear h₅ h₈
    have h₅ : q - 1 ∣ r - 1 := by
      rw [← Nat.Coprime.dvd_mul_left]
      exact h₅
      have : r - 1 > q - 1 := by linarith
      have : Nat.Coprime (q - 1) (q - 1) := by
        apply Nat.coprime_of_dvd
        apply lt_trans?_ hq
        apply Nat.le_sub_one_of_lt
        linarith
      exact this
    rcases h₇ with h₇ | h₇
    · left
      omega
    · right
      replace h₇ : q - 1 = 3 := by omega
      have h₈ : r - 1 = 9 := by
        rw [h₇, Nat.Coprime.dvd_mul_left] at h₅
        exact h₅
        rw [Nat.mod_eq_of_modEq]
        exact hqqr'
        rw [Nat.mod_eq_of_lt]
        omega
      have h₉ : r - 1 = 9 := by exact h₈
      have h₁₀ : r = 10 := by omega
      subst h₁₀
      -- There are no solutions for $q < 8$.
      have h₁₁ : q < 8 := by
        by_contra!
        have : r - q > 2 := by omega
        have : (r - 1) - (q - 1) > 2 := by omega
        have : (r - 1) - (q - 1) = 0 := by omega
        omega
      -- If $q = 7$, then $(q-1) = 1$.
      replace h₁₁ : q = 7 ∨ q = 8 := by omega
      rcases h₁₁ with h₁₁ | h₁₁
      · left
        omega
      · right
        subst h₁₁
        -- No solution for $q = 8$.
        have h₁₂ : (q - 1) * (r - 1) > r - 1 := by
          rw [Nat.mul_comm, h₉, Nat.sub_self]
          omega
        have h₁₃ : (q - 1) * (r - 1) ≤ r - 1 := by
          rw [h₉, Nat.sub_self]
          apply Nat.mul_le_self_right
          omega
        omega

  -- Now, we've already proved that $(p, q, r) = (2, 4, 8) ∨ (p, q, r) = (3, 5, 15)$.
  rcases h₇ with h₇ | h₇
  · left
    omega
  · right
    subst h₇
    omega

```