have pgt1 : 1 < p := h₀.1
  have pqgtr : p < q < r := by
    exact h₀.2

  have hp : p - 1 ∣ p * q * r - 1 := by
    apply dvd_trans _ h₁
    apply dvd_mul_right

  have hq : q - 1 ∣ p * q * r - 1 := by
    apply dvd_trans _ h₁
    apply dvd_mul_right

  have hr : r - 1 ∣ p * q * r - 1 := by
    apply dvd_trans _ h₁
    apply dvd_mul_right

  have hpq : (p - 1) * (q - 1) ∣ p * q * r - 1 := by
    apply dvd_trans hp
    apply dvd_mul_right

  have hpr : (p - 1) * (r - 1) ∣ p * q * r - 1 := by
    apply dvd_trans hp
    apply dvd_mul_right

  have hqr : (q - 1) * (r - 1) ∣ p * q * r - 1 := by
    apply dvd_trans hq
    apply dvd_mul_right

  have hpqr : (p - 1) * (q - 1) * (r - 1) ∣ p * q * r - 1 := by
    exact h₁

  -- In fact, we can prove that $p$, $q$ and $r$ are prime numbers.
  have pqr_prime : IsPrime p ∧ IsPrime q ∧ IsPrime r := by
    refine ⟨?_,?_,?_⟩
    · rw [Int.isPrime_iff_natAbs_prime]
      norm_cast
      apply Nat.Prime.symm
      rw [←Int.natAbs_sub_one_dvd_iff]
      exact hp
    · rw [Int.isPrime_iff_natAbs_prime]
      norm_cast
      apply Nat.Prime.symm
      rw [←Int.natAbs_sub_one_dvd_iff]
      exact hq
    · rw [Int.isPrime_iff_natAbs_prime]
      norm_cast
      apply Nat.Prime.symm
      rw [←Int.natAbs_sub_one_dvd_iff]
      exact hr

  -- Because $p$, $q$ and $r$ are prime numbers, we have $p \geq 2$, $q \geq 3$ and $r \geq 5$.
  have pge : p ≥ 2 := by
    exact Int.le_of_lt_add_one (pgt1)
  have qge : q ≥ 3 := by
    exact Int.le_of_lt_add_one (Nat.Prime.one_lt pqgtr.left)
  have rge : r ≥ 5 := by
    exact Int.le_of_lt_add_one (Nat.Prime.one_lt pqgtr.right)

  -- We have $p \leq 3$ because otherwise the left hand side of the divisibility condition would be too large.
  have ple : p ≤ 3 := by
    by_contra contra
    rw [not_le] at contra
    have : 4 ≤ p := by
      exact Int.le_of_lt_add_one contra
    have : 12 ≤ p * q * r := by
      calc
        12 = 4 * 3 * 2 := by norm_num
        _ ≤ p * q * r := by nlinarith
    have : (p - 1) * (q - 1) * (r - 1) > p * q * r - 1 := by
      calc
        (p - 1) * (q - 1) * (r - 1) ≥ 3 * 2 * 1 := by nlinarith
        _ > 12 := by norm_num
        _ ≤ p * q * r - 1 := by nlinarith
    linarith

  -- We have $q \leq 5$ because otherwise the left hand side of the divisibility condition would be too large.
  have qle : q ≤ 5 := by
    by_contra contra
    rw [not_le] at contra
    have : 6 ≤ q := by
      exact Int.le_of_lt_add_one contra
    have : 18 ≤ p * q * r := by
      calc
        18 = 3 * 6 * 1 := by norm_num
        _ ≤ p * q * r := by nlinarith
    have : (p - 1) * (q - 1) * (r - 1) > p * q * r - 1 := by
      calc
        (p - 1) * (q - 1) * (r - 1) ≥ 2 * 4 * 3 := by nlinarith
        _ > 18 := by norm_num
        _ ≤ p * q * r - 1 := by nlinarith
    linarith

  -- We have $r \leq 15$ because otherwise the left hand side of the divisibility condition would be too large.
  have rle : r ≤ 15 := by
    by_contra contra
    rw [not_le] at contra
    have : 7 ≤ r := by
      exact Int.le_of_lt_add_one contra
    have : 42 ≤ p * q * r := by
      calc
        42 = 2 * 3 * 7 := by norm_num
        _ ≤ p * q * r := by nlinarith
    have : (p - 1) * (q - 1) * (r - 1) > p * q * r - 1 := by
      calc
        (p - 1) * (q - 1) * (r - 1) ≥ 3 * 4 * 6 := by nlinarith
        _ > 42 := by norm_num
        _ ≤ p * q * r - 1 := by nlinarith
    linarith

  -- Because $p$, $q$ and $r$ are prime numbers and $p \leq 3$, $q \leq 5$, $r \leq 15$, we have $p = 2$, $q = 3$ and $r = 5$.
  have peq : p = 2 := by
    interval_cases p <;> norm_num at *
    <;> tauto
  have qeq : q = 3 := by
    interval_cases q <;> norm_num at *
    <;> tauto
  have req : r = 5 := by
    interval_cases r <;> norm_num at *
    <;> tauto

  -- But if $(p, q, r) = (2, 3, 5)$, then $(p - 1) (q - 1) (r - 1) = 1 * 2 * 4 = 8$ and $pqr - 1 = 2 * 3 * 5 - 1 = 29$, and $8$ does not divide $29$.
  have five_not_dvd : ¬ 5 ∣ 29 := by
    apply (Nat.Prime.coprime_iff_not_dvd (Nat.prime_five)).mp
    norm_num

  -- We have $p = 2$, $q = 4$ and $r = 8$.
  have peq' : p = 2 := by
    exact peq
  have qeq' : q = 4 := by
    calc
      q = q - 1 + 1 := by rw [Int.sub_add_cancel]; linarith
      _ = 3 + 1 := by rw [qeq]; norm_num
      _ = 4 := by norm_num
  have req' : r = 8 := by
    calc
      r = r - 1 + 1 := by rw [Int.sub_add_cancel]; linarith
      _ = 5 + 3 := by rw [req]; norm_num
      _ = 8 := by norm_num

  -- We have $(p, q, r) = (2, 4, 8)$.
  have eq₁ : (p, q, r) = (2, 4, 8) := by
    simp [peq', qeq', req']

  -- We have $p = 3$, $q = 5$ and $r = 15$.
  have peq'' : p = 3 := by
    exact peq
  have qeq'' : q = 5 := by
    exact qeq
  have req'' : r = 15 := by
    calc
      r = r - 1 + 1 := by rw [Int.sub_add_cancel]; linarith
      _ = 5 + 10 := by rw [req]; norm_num
      _ = 15 := by norm_num

  -- We have $(p, q, r) = (3, 5, 15)$.
  have eq₂ : (p, q, r) = (3, 5, 15) := by
    simp [peq'', qeq'', req'']

  -- In summary, $(p, q, r) = (2, 4, 8)$ or $(p, q, r) = (3, 5, 15)$.
  exact Or.inl eq₁

```