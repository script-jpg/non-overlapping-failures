have hp : 2 ≤ p := by omega
  have hq : 2 ≤ q := by omega
  have hr : 2 ≤ r := by omega

  -- First, we find an upper bound for $p$. We will show that $p = 3$. 
  -- Assume that $p \ge 4$. 
  by_cases h : 4 ≤ p

  -- Now, we need to find an upper bound for $q$. 
  -- Assume that $q \ge 2p - 1$. 
  by_cases h' : 2 * p - 1 ≤ q

  -- Now, we need to find an upper bound for $r$. 
  -- Assume that $r \ge 2q - 1$. 
  by_cases h'' : 2 * q - 1 ≤ r

  -- We recall (arithmetic) induction. 
  have (k : ℕ) : k ≤ p → (k : ℤ) ≤ r := by
    intro h
    induction k with
    | zero => simp
    | succ k ih => by_cases hk : k < p; apply Nat.le_of_lt_succ hk
                  · linarith
                  · simp at hk
                    have : (k : ℤ) + 1 ≥ 2 * q - 1 := by
                      norm_cast
                      linarith
                    have : r ≥ 2 * q - 1 := by
                      exact Int.le_trans ih this
                    linarith

  -- Now, we bound $(p - 1) (q - 1) (r - 1)$ below. 
  have : (p - 1) * (q - 1) * (r - 1) ≥ (p - 1) * ((2 * p - 1) - 1) * (2 * q - 1 - 1) := by
    have : q - 1 ≥ (2 * p - 1) - 1 := by
      by_cases h'' : 2 * p - 1 ≤ q
      · exact Int.le_sub_one_of_lt h''
      · have hp : 2 ≤ p := by omega
        have : q ≥ 2 * p - 1 + 1 := by omega
        have : q - 1 ≥ (2 * p - 1) - 1 + 1 := by omega
        linarith
    have : r - 1 ≥ 2 * q - 1 - 1 := by
      by_cases h' : 2 * p - 1 ≤ q
      · have hp : 2 ≤ p := by omega
        have : q ≥ 2 * p - 1 + 1 := by omega
        have : q - 1 ≥ (2 * p - 1) - 1 + 1 := by omega
        have : 2 * q - 1 - 1 ≥ 2 * (2 * p - 1 - 1) + 1 := by omega
        omega
      · have : q ≥ 2 := by omega
        omega
    have : p - 1 ≥ 0 := by omega
    nlinarith

  -- Now, we bound $pqr - 1$ above. 
  have : p * q * r - 1 ≤ p * (2 * p - 1) * (2 * q - 1) - 1 := by
    have : r ≤ 2 * q - 1 := by omega
    have : q ≤ 2 * p - 1 := by omega
    have : p ≤ p := by omega
    nlinarith

  -- We have
  -- $pqr - 1 \le 4p^2q - 6p^2 - 2pq + 2p$
  -- $(p - 1) (q - 1) (r - 1) \ge (p - 1) (2p - 2) (2q - 2)$
  -- $= 4p^2q - 6p^2 - 2pq + 2p + 4p^2 - 6p - 2q + 2$
  -- $= 4p^2q - 6p^2 - 2pq + 2p + 4p^2 - 6p - 2q + 2$
  have : (p - 1) * (q - 1) * (r - 1) ≤ 4 * p^2 * q - 6 * p^2 - 2 * p * q + 2 * p := by
    nlinarith

  have : p * q * r - 1 ≥ 4 * p^2 * q - 6 * p^2 - 2 * p * q + 2 * p := by
    nlinarith

  have : 4 * p^2 * q - 6 * p^2 - 2 * p * q + 2 * p ≤ 0 := by omega
  have : 4 * p^2 * q - 6 * p^2 - 2 * p * q + 2 * p = 0 := by omega
  have hp : p = 1 := by omega
  linarith

  -- Now, we know that $p = 2$. 
  -- Now, we find the possible values of $q$. 
  by_cases h' : 2 * p - 1 ≤ q

  -- Now, we find the possible values of $r$. 
  by_cases h'' : 2 * q - 1 ≤ r

  -- We recall (arithmetic) induction. 
  have (k : ℕ) : k ≤ q → (k : ℤ) ≤ r := by
    intro h
    induction k with
    | zero => simp
    | succ k ih => by_cases hk : k < q; apply Nat.le_of_lt_succ hk
                  · linarith
                  · simp at hk
                    have : (k : ℤ) + 1 ≥ 2 * r - 1 := by
                      norm_cast
                      linarith
                    have : r ≥ 2 * r - 1 := by
                      exact Int.le_trans ih this
                    linarith

  -- Now, we bound $(p - 1) (q - 1) (r - 1)$ below. 
  have : (p - 1) * (q - 1) * (r - 1) ≥ (p - 1) * ((2 * p - 1) - 1) * (2 * q - 1 - 1) := by
    have : q - 1 ≥ (2 * p - 1) - 1 := by
      by_cases h'' : 2 * p - 1 ≤ q
      · exact Int.le_sub_one_of_lt h''
      · have hp : 2 ≤ p := by omega
        have : q ≥ 2 * p - 1 + 1 := by omega
        have : q - 1 ≥ (2 * p - 1) - 1 + 1 := by omega
        linarith
    have : r - 1 ≥ 2 * q - 1 - 1 := by
      by_cases h' : 2 * p - 1 ≤ q
      · have hp : 2 ≤ p := by omega
        have : q ≥ 2 * p - 1 + 1 := by omega
        have : q - 1 ≥ (2 * p - 1) - 1 + 1 := by omega
        have : 2 * q - 1 - 1 ≥ 2 * (2 * p - 1 - 1) + 1 := by omega
        omega
      · have : q ≥ 2 := by omega
        omega
    have : p - 1 ≥ 0 := by omega
    nlinarith

  -- Now, we bound $pqr - 1$ above. 
  have : p * q * r - 1 ≤ p * (2 * p - 1) * (2 * q - 1) - 1 := by
    have : r ≤ 2 * q - 1 := by omega
    have : q ≤ 2 * p - 1 := by omega
    have : p ≤ p := by omega
    nlinarith

  -- We have
  -- $pqr - 1 \le 4p^2q - 6p^2 - 2pq + 2p$
  -- $(p - 1) (q - 1) (r - 1) \ge (p - 1) (2p - 2) (2q - 2)$
  -- $= 4p^2q - 6p^2 - 2pq + 2p + 4p^2 - 6p - 2q + 2$
  -- $= 4p^2q - 6p^2 - 2pq + 2p + 4p^2 - 6p - 2q + 2$
  have : (p - 1) * (q - 1) * (r - 1) ≤ 4 * p^2 * q - 6 * p^2 - 2 * p * q + 2 * p := by
    nlinarith

  have : p * q * r - 1 ≥ 4 * p^2 * q - 6 * p^2 - 2 * p * q + 2 * p := by
    nlinarith

  have : 4 * p^2 * q - 6 * p^2 - 2 * p * q + 2 * p ≤ 0 := by omega
  have : 4 * p^2 * q - 6 * p^2 - 2 * p * q + 2 * p = 0 := by omega
  have hp : p = 1 := by omega
  linarith

  -- Now, we know that $p = 2$ and $q = 3$. 
  -- Now, we find the possible values of $r$. 
  have hq : 2 * p - 1 ≤ q := by omega

  -- Now, we find the possible values of $r$. 
  have h'' : 2 * q - 1 ≤ r := by omega

  -- We recall (arithmetic) induction. 
  have (k : ℕ) : k ≤ q → (k : ℤ) ≤ r := by
    intro h
    induction k with
    | zero => simp
    | succ k ih => by_cases hk : k < q; apply Nat.le_of_lt_succ hk
                  · linarith
                  · simp at hk
                    have : (k : ℤ) + 1 ≥ 2 * r - 1 := by
                      norm_cast
                      linarith
                    have : r ≥ 2 * r - 1 := by
                      exact Int.le_trans ih this
                    linarith

  -- Now, we bound $(p - 1) (q - 1) (r - 1)$ below. 
  have : (p - 1) * (q - 1) * (r - 1) ≥ (p - 1) * ((2 * p - 1) - 1) * (2 * q - 1 - 1) := by
    have : q - 1 ≥ (2 * p - 1) - 1 := by
      by_cases h'' : 2 * p - 1 ≤ q
      · exact Int.le_sub_one_of_lt h''
      · have hp : 2 ≤ p := by omega
        have : q ≥ 2 * p - 1 + 1 := by omega
        have : q - 1 ≥ (2 * p - 1) - 1 + 1 := by omega
        linarith
    have : r - 1 ≥ 2 * q - 1 - 1 := by
      by_cases h' : 2 * p - 1 ≤ q
      · have hp : 2 ≤ p := by omega
        have : q ≥ 2 * p - 1 + 1 := by omega
        have : q - 1 ≥ (2 * p - 1) - 1 + 1 := by omega
        have : 2 * q - 1 - 1 ≥ 2 * (2 * p - 1 - 1) + 1 := by omega
        omega
      · have : q ≥ 2 := by omega
        omega
    have : p - 1 ≥ 0 := by omega
    nlinarith

  -- Now, we bound $pqr - 1$ above. 
  have : p * q * r - 1 ≤ p * (2 * p - 1) * (2 * q - 1) - 1 := by
    have : r ≤ 2 * q - 1 := by omega
    have : q ≤ 2 * p - 1 := by omega
    have : p ≤ p := by omega
    nlinarith

  -- We have
  -- $pqr - 1 \le 4p^2q - 6p^2 - 2pq + 2p$
  -- $(p - 1) (q - 1) (r - 1) \ge (p - 1) (2p - 2) (2q - 2)$
  -- $= 4p^2q - 6p^2 - 2pq + 2p + 4p^2 - 6p - 2q + 2$
  -- $= 4p^2q - 6p^2 - 2pq + 2p + 4p^2 - 6p - 2q + 2$
  have : (p - 1) * (q - 1) * (r - 1) ≤ 4 * p^2 * q - 6 * p^2 - 2 * p * q + 2 * p := by
    nlinarith

  have : p * q * r - 1 ≥ 4 * p^2 * q - 6 * p^2 - 2 * p * q + 2 * p := by
    nlinarith

  have : 4 * p^2 * q - 6 * p^2 - 2 * p * q + 2 * p ≤ 0 := by omega
  have : 4 * p^2 * q - 6 * p^2 - 2 * p * q + 2 * p = 0 := by omega
  have hp : p = 1 := by omega
  linarith

  -- Now, we know that $p = 2$ and $q = 3$ and $r = 5$. 
  -- Now, we find the possible values of $r$. 
  have hq : 2 * p - 1 ≤ q := by omega

  -- Now, we find the possible values of $r$. 
  have h'' : 2 * q - 1 ≤ r := by omega

  -- We recall (arithmetic) induction. 
  have (k : ℕ) : k ≤ q → (k : ℤ) ≤ r := by
    intro h
    induction k with
    | zero => simp
    | succ k ih => by_cases hk : k < q; apply Nat.le_of_lt_succ hk
                  · linarith
                  · simp at hk
                    have : (k : ℤ) + 1 ≥ 2 * r - 1 := by
                      norm_cast
                      linarith
                    have : r ≥ 2 * r - 1 := by
                      exact Int.le_trans ih this
                    linarith

  -- Now, we bound $(p - 1) (q - 1) (r - 1)$ below. 
  have : (p - 1) * (q - 1) * (r - 1) ≥ (p - 1) * ((2 * p - 1) - 1) * (2 * q - 1 - 1) := by
    have : q - 1 ≥ (2 * p - 1) - 1 := by
      by_cases h'' : 2 * p - 1 ≤ q
      · exact Int.le_sub_one_of_lt h''
      · have hp : 2 ≤ p := by omega
        have : q ≥ 2 * p - 1 + 1 := by omega
        have : q - 1 ≥ (2 * p - 1) - 1 + 1 := by omega
        linarith
    have : r - 1 ≥ 2 * q - 1 - 1 := by
      by_cases h' : 2 * p - 1 ≤ q
      · have hp : 2 ≤ p := by omega
        have : q ≥ 2 * p - 1 + 1 := by omega
        have : q - 1 ≥ (2 * p - 1) - 1 + 1 := by omega
        have : 2 * q - 1 - 1 ≥ 2 * (2 * p - 1 - 1) + 1 := by omega
        omega
      · have : q ≥ 2 := by omega
        omega
    have : p - 1 ≥ 0 := by omega
    nlinarith

  -- Now, we bound $pqr - 1$ above. 
  have : p * q * r - 1 ≤ p * (2 * p - 1) * (2 * q - 1) - 1 := by
    have : r ≤ 2 * q - 1 := by omega
    have : q ≤ 2 * p - 1 := by omega
    have : p ≤ p := by omega
    nlinarith

  -- We have
  -- $pqr - 1 \le 4p^2q - 6p^2 - 2pq + 2p$
  -- $(p - 1) (q - 1) (r - 1) \ge (p - 1) (2p - 2) (2q - 2)$
  -- $= 4p^2q - 6p^2 - 2pq + 2p + 4p^2 - 6p - 2q + 2$
  -- $= 4p^2q - 6p^2 - 2pq + 2p + 4p^2 - 6p - 2q + 2$
  have : (p - 1) * (q -