have : 374 * 10 + n = 3740 + n := by linarith
  rw [this] at h₁


  -- The four-digit number $\underline{374n}$ is divisible by 18. Find the units digit $n$. Show that it is 4.-/
  have : n = 4 := by
    -- 18 = 2 * 3^2
    have h2 : 2 ∣ 3740 + n := by
      have : 18 ∣ 3740 + n := h₁
      exact Nat.dvd_of_dvd_mul_right_of_gcd_one this rfl
    have h3 : 9 ∣ 3740 + n := by
      have : 18 ∣ 3740 + n := h₁
      exact Nat.dvd_of_dvd_mul_left (Nat.gcd 18 9) this
    -- 3740 + n is even
    have h4 : 2 ∣ 3740 := by decide
    have h5 : 2 ∣ n := by
      have : 2 ∣ 3740 + n := h2
      have : 2 ∣ 3740 := h4
      rw [Nat.dvd_add_iff_left] at this
      exact this
    -- 3740 + n is divisible by 9
    have h6 : 9 ∣ 3740 := by decide
    have h7 : 9 ∣ n := by
      have : 9 ∣ 3740 + n := h3
      have : 9 ∣ 3740 := h6
      rw [Nat.dvd_add_iff_right] at this
      exact this
    -- As $n$ is a digit, it must be 4
    interval_cases n <;> norm_num at *
    -- n = 0: Not possible
    -- n = 1: Not possible
    -- n = 2: Not possible
    -- n = 3: Not possible
    -- n = 4: Possible
    -- n = 5: Not possible
    -- n = 6: Not possible
    -- n = 7: Not possible
    -- n = 8: Not possible
    -- n = 9: Not possible
  assumption
```