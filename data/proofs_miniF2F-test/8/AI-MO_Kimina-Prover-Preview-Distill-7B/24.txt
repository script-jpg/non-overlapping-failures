have test : 18 ∣ 374 * 10 + 4 := by norm_num

  -- The number $374n$ is divisible by $18$, so $374n$ is divisible by $9$ and $2$.
  have h2 : 9 ∣ 374 * 10 + n := by
    omega
  have h3 : 2 ∣ 374 * 10 + n := by
    omega

  -- $374n$ is divisible by $9$ so the sum of its digits is divisible by $9$.
  have h4 : 9 ∣ 3 + 7 + 4 + n := by
    apply Nat.nine_dvd_iff.mp
    apply Nat.dvd_add
    rw [Nat.dvd_add_iff_left h2, test]
    rfl

  -- $374n$ is divisible by $2$ so the last digit is even.
  have h5 : 2 ∣ n := by
    apply Nat.dvd_iff_mod_eq_zero.mp at h3
    rw [Nat.add_mod] at h3
    apply Nat.ModEq.add_left at h3
    apply Nat.ModEq.trans h3
    norm_num
  rw [Nat.dvd_iff_mod_eq_zero] at h5

  -- The last digit is even and the sum of the digits is divisible by $9$ so $n = 4$.
  have h6 : n = 4 := by
    omega

  exact h6
```