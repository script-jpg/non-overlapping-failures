have : 374 * 10 + n = 3740 + n := by omega
  rw [this] at h₁

  -- The four-digit number $\underline{374n}$ is divisible by 18. Find the units digit $n$. Show that it is 4.-/
  -- 18 = 2 * 3^2
  apply Nat.Prime.dvd_mul.mp at h₁
  -- Since 3740 + n is divisible by 2, it must be that n is even.
  have h₂ : 2 ∣ 3740 + n := by
    apply Nat.dvd_trans _ h₁
    norm_num
  have h₃ := Nat.dvd_add.mp h₂
  have h₄ : 2 ∣ 3740 := by omega
  have h₅ := Nat.dvd_add.mp h₄
  -- Since 3740 + n is divisible by 3, it must be that n is divisible by 3.
  have h₆ := h₃ h₅
  -- Since 3740 + n is divisible by 9, it must be that n is divisible by 9.
  have h₇ := h₆ h₅

  -- Since n is even and divisible by 3 and 9, it must be that n is divisible by 18.
  have h₈ : 9 ∣ 3740 + n := by
    apply Nat.dvd_trans _ h₇
    norm_num
  have h₉ := Nat.dvd_add.mp h₈
  have h₁₀ : 3 ∣ 3740 + n := by
    apply Nat.dvd_trans _ h₉
    norm_num
  have h₁₁ := Nat.dvd_add.mp h₁₀
  have h₁₂ : 3 ∣ 3740 := by omega
  have h₁₃ := Nat.dvd_add.mp h₁₂
  -- Since 3740 + n is divisible by 6, it must be that n is divisible by 6.
  have h₁₄ := h₁₃ h₁₁
  have h₁₅ : 6 ∣ 3740 + n := by
    apply Nat.dvd_trans _ h₁₄
    norm_num
  have h₁₆ := Nat.dvd_add.mp h₁₅

  -- Since 3740 + n is divisible by 6, it must be that n is divisible by 3 and 2.
  have h₁₇ := h₁₆ h₁₁
  have h₁₈ : 2 ∣ n := by
    apply Nat.dvd_of_dvd_add at h₂
    apply Nat.dvd_trans _ h₂
    omega
  have h₁₉ : 3 ∣ n := by
    apply Nat.dvd_of_dvd_add at h₆
    apply Nat.dvd_trans _ h₆
    omega
  have h₂₀ := Nat.dvd_gcd h₁₈ h₁₉

  -- Since n is divisible by 6, it must be that n is divisible by 18.
  have h₂₁ : n = 4 := by
    omega
  exact h₂₁
```