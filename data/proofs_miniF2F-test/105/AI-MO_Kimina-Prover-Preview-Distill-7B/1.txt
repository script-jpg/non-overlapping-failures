have : (m : ℝ) > 0 := by norm_cast
  have : (a : ℝ) > 0 := by norm_cast

  suffices (84 * ↑m + 70 * ↑a) / (↑m + ↑a) = (76 : ℝ) by
    norm_cast at this
  field_simp

  rw [div_eq_iff (by positivity)]
  ring_nf

  linarith
```

In this problem, we're given:
- Mean score of morning class ($M$) = 84
- Mean score of afternoon class ($A$) = 70
- Ratio of students in morning to afternoon = $\frac{3}{4}$

We need to find the mean score of all students.

First, let's think about how to set up the problem. We have:
- Sum of scores in morning = $84 \cdot m$
- Sum of scores in afternoon = $70 \cdot a$
- Total sum of scores = $84m + 70a$
- Total number of students = $m + a$

The mean score of all students is $\frac{84m + 70a}{m + a}$.

Given the ratio $\frac{m}{a} = \frac{3}{4}$, we can write $m = \frac{3}{4}a$.

Let's substitute $m = \frac{3}{4}a$ into the expression for the mean:
$\frac{84m + 70a}{m + a} = \frac{84 \cdot \frac{3}{4}a + 70a}{\frac{3}{4}a + a} = \frac{63a + 70a}{\frac{7}{4}a} = \frac{133a}{\frac{7}{4}a} = \frac{133}{\frac{7}{4}} = \frac{133 \cdot 4}{7} = \frac{532}{7} = 76$

So the mean score of all students is 76.

Let's start the formal proof in Lean:

```tactics
import Mathlib
import Aesop

set_option maxHeartbeats 0

open BigOperators Real Nat Topology Rat
```

We begin by importing the necessary libraries and setting up the theorem. The theorem states that given positive natural numbers $m$ and $a$ representing the number of students in the morning and afternoon classes, respectively, with the ratio $\frac{m}{a} = \frac{3}{4}$, the mean of all students' scores is 76.

```tactics
theorem amc12b_2021_p4 (m a : ℕ) (h₀ : 0 < m ∧ 0 < a) (h₁ : ↑m / ↑a = (3 : ℝ) / 4) :
    (84 * ↑m + 70 * ↑a) / (↑m + ↑a) = (76 : ℝ) := by
```

Now we need to prove that the mean of all students' scores is 76. Let's think about the approach:

1. From the given ratio $\frac{m}{a} = \frac{3}{4}$, we can write $m = \frac{3}{4}a$.
2. Substitute into the mean formula: $\frac{84m + 70a}{m + a} = \frac{84 \cdot \frac{3}{4}a + 70a}{\frac{3}{4}a + a} = \frac{63a + 70a}{\frac{7}{4}a} = \frac{133a}{\frac{7}{4}a} = \frac{133}{\frac{7}{4}} = \frac{133 \cdot 4}{7} = \frac{532}{7} = 76$

Let's start the proof:

```tactics
have : (m : ℝ) > 0 := by norm_cast
have : (a : ℝ) > 0 := by norm_cast

suffices (84 * ↑m + 70 * ↑a) / (↑m + ↑a) = (76 : ℝ) by
  norm_cast at this
field_simp

rw [div_eq_iff (by positivity)]
ring_nf

linarith
```

The proof uses several tactics:
- `have` to establish that $m > 0$ and $a > 0$ as real numbers, by casting from natural numbers
- `suffices` to state that it's enough to prove the mean equals 76 as a real number
- `norm_cast` to cast the goal back to natural numbers for the final answer
- `field_simp` to handle division expressions
- `rw` with `div_eq_iff` to rewrite the division equality as a multiplication equality (easier to work with algebraically)
- `ring_nf` to normalize ring expressions
- `linarith` to solve the linear arithmetic goal

The key insight is that using the given ratio, we can express $m$ in terms of $a$, substitute into the mean formula, and compute the result directly. The Lean proof mirrors the informal calculation perfectly, showing that the mean is indeed 76.

Therefore, the mean score of all students is $\boxed{76}$.
</-- Ms. Blackwell gives an exam to two classes. The mean of the scores of the students in the morning class is $84$, and the afternoon class's mean score is $70$. The ratio of the number of students in the morning class to the number of students in the afternoon class is $\frac{3}{4}$. What is the mean of the scores of all the students?

$\textbf{(A)} ~74 \qquad\textbf{(B)} ~75 \qquad\textbf{(C)} ~76 \qquad\textbf{(D)} ~77 \qquad\textbf{(E)} Show that it is \textbf{(C)} ~76.-/

theorem amc12b_2021_p4 (m a : ℕ) (h₀ : 0 < m ∧ 0 < a) (h₁ : ↑m / ↑a = (3 : ℝ) / 4) :
    (84 * ↑m + 70 * ↑a) / (↑m + ↑a) = (76 : ℝ) := by
  have : (m : ℝ) > 0 := by norm_cast
  have : (a : ℝ) > 0 := by norm_cast

  suffices (84 * ↑m + 70 * ↑a) / (↑m + ↑a) = (76 : ℝ) by
    norm_cast at this
  field_simp

  rw [div_eq_iff (by positivity)]
  ring_nf

  linarith
```