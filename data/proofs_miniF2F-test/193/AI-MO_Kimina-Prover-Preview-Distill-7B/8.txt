-- The condition ensures that $f(1)$ exists.
  have h₁ : f 1 = 1 / (1 + 2) := h₀ 1 (by norm_num)
  -- Also, $f(f(1))$ exists.
  have h₂ : f (f 1) = 1 / (f 1 + 2) := h₀ (f 1) (by rw [h₁]; norm_num)

  -- Now we can calculate the result.
  rw [h₂, h₁]
  norm_num
```