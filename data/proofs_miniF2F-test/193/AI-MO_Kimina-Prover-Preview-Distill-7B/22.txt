-- The condition ensures that $f(1)$ is well-defined, as the only possible issue is division by
  -- zero, which would happen only if $x = -2$.
  have h₁ : f 1 = 1 / (1 + 2) := h₀ 1 (by norm_num)
  rw [h₁]
  -- It also ensures that $f(f(1))$ is well-defined, as it was already ensured by the condition
  -- that $f(1) \neq -2$.
  have h₂ : f (1 / (1 + 2)) = 1 / (1 / (1 + 2) + 2) := h₀ (1 / (1 + 2)) (by norm_num)
  rw [h₂]
  norm_num
```