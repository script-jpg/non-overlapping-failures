induction n with
  | zero =>
    simp
  | succ n ih =>
    cases n with
    | zero =>
      simp_all [Finset.prod_range_one, Finset.sum_range_one]
      <;> norm_num
      <;> nlinarith
    | succ n =>
      have h₁ := h₀
      simp [Finset.sum_range_succ, Finset.prod_range_succ] at h₁ ⊢
      have h₂ : a n.succ ≤ 1 := by
        have h₃ : ∑ x in Finset.range n.succ, a x = n.succ := by simp_all
        have h₄ : a n.succ ≤ 1 := by
          calc
            a n.succ ≤ ∑ x in Finset.range n.succ, a x := by
              exact Finset.single_le_sum (fun i _ => by exact zero_le (a i)) (by simp)
            _ = n.succ := by simp_all
            _ = n.succ := by simp
            _ ≥ 1 := by simp
            _ ≥ 1 := by simp
        exact h₄
      calc
        (∏ x in Finset.range n.succ, a x) = (∏ x in Finset.range n.succ, a x) := rfl
        _ = (∏ x in Finset.range n, a x) * a n.succ := by
          simp [Finset.prod_range_succ]
        _ ≤ (∏ x in Finset.range n, a x) * 1 := by
          exact mul_le_mul_of_nonneg_left h₂ (by
            apply Finset.prod_nonneg
            intro i _
            exact zero_le (a i))
        _ = ∏ x in Finset.range n, a x := by simp
        _ ≤ 1 := ih (by simp_all)
        _ ≤ 1 := by simp
      <;> simp_all
      <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all