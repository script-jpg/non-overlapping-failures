eta_reduce at *
  clear!
  induction' n with n ih
  · simp
  simp_all [Finset.prod_range_succ, Finset.sum_range_succ, le_refl]
  have h₁ : a n ≤ 1 := by
    have h₁ : ∑ x in Finset.range n, a x ≤ n := by
      have h₁ : ∑ x in Finset.range n, a x ≤ ∑ x in Finset.range n, 1 := by
        apply Finset.sum_le_sum
        intro x _
        have h₂ : a x ≤ 1 := by
          have h₂ : a x ≤ ∑ i in Finset.range n, a i := by
            apply Finset.single_le_sum
            · intro i _
              exact zero_le (a i)
            · simp_all
          have h₃ : ∑ i in Finset.range n, a i ≤ n := by simp_all
          simp_all [Finset.sum_range_succ]
          <;> omega
        simp_all
      simp_all
    have h₂ : a n ≤ 1 := by
      have h₂ : a n ≤ ∑ i in Finset.range n, a i := by
        apply Finset.single_le_sum
        · intro i _
          exact zero_le (a i)
        · simp_all
      have h₃ : ∑ i in Finset.range n, a i ≤ n := by simp_all
      simp_all [Finset.sum_range_succ]
      <;> omega
    simp_all
  have h₂ : ∏ x in Finset.range n, a x ≤ 1 := by
    apply ih
    simp_all
  calc
    ∏ x in Finset.range n.succ, a x = a n * ∏ x in Finset.range n, a x := by
      simp_all [Finset.prod_range_succ]
    _ ≤ 1 * 1 := by
      gcongr
      <;> simp_all
    _ = 1 := by simp

  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all
  <;> nlinarith
  <;> simp_all