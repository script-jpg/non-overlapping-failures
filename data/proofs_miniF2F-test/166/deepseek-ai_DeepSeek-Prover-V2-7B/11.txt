have h₁ : ∀ x ∈ Finset.range n, a x ≤ 1 := by
    intro x hx
    have h₂ : ∑ i in Finset.range n, a i = n := h₀
    have h₃ : a x ≤ ∑ i in Finset.range n, a i := by
      apply Finset.single_le_sum (fun i _ => by exact zero_le (a i)) hx
    simp at h₃
    exact mod_cast h₃
  have h₂ : (∏ x in Finset.range n, a x) ≤ 1 := by
    apply Finset.prod_le_one
    · intro i hi
      exact zero_le (a i)
    · intro i hi
      exact h₁ i hi
  exact h₂

theorem algebra_amgm_sum1toneqn_prod1tonleq1' (a : ℕ → NNReal) (n : ℕ)
    (h₀ : (∑ x in Finset.range n, a x) = n) : (∏ x in Finset.range n, a x) ≤ 1 := by
  have h₁ : ∀ x ∈ Finset.range n, a x ≤ 1 := by
    intro x hx
    have h₂ : ∑ i in Finset.range n, a i = n := h₀
    have h₃ : a x ≤ ∑ i in Finset.range n, a i := by
      apply Finset.single_le_sum (fun i _ => by exact zero_le (a i)) hx
    simp at h₃
    exact mod_cast h₃
  have h₂ : (∏ x in Finset.range n, a x) ≤ 1 := by
    apply Finset.prod_le_one
    · intro i hi
      exact zero_le (a i)
    · intro i hi
      exact h₁ i hi
  exact h₂

theorem algebra_amgm_sum1toneqn_prod1tonleq1'' (a : ℕ → NNReal) (n : ℕ)
    (h₀ : (∑ x in Finset.range n, a x) = n) : (∏ x in Finset.range n, a x) ≤ 1 := by
  have h₁ : ∀ x ∈ Finset.range n, a x ≤ 1 := by
    intro x hx
    have h₂ : ∑ i in Finset.range n, a i = n := h₀
    have h₃ : a x ≤ ∑ i in Finset.range n, a i := by
      apply Finset.single_le_sum (fun i _ => by exact zero_le (a i)) hx
    simp at h₃
    exact mod_cast h₃
  have h₂ : (∏ x in Finset.range n, a x) ≤ 1 := by
    apply Finset.prod_le_one
    · intro i hi
      exact zero_le (a i)
    · intro i hi
      exact h₁ i hi
  exact h₂

theorem algebra_amgm_sum1toneqn_prod1tonleq1''' (a : ℕ → NNReal) (n : ℕ)
    (h₀ : (∑ x in Finset.range n, a x) = n) : (∏ x in Finset.range n, a x) ≤ 1 := by
  have h₁ : ∀ x ∈ Finset.range n, a x ≤ 1 := by
    intro x hx
    have h₂ : ∑ i in Finset.range n, a i = n := h₀
    have h₃ : a x ≤ ∑ i in Finset.range n, a i := by
      apply Finset.single_le_sum (fun i _ => by exact zero_le (a i)) hx
    simp at h₃
    exact mod_cast h₃
  have h₂ : (∏ x in Finset.range n, a x) ≤ 1 := by
    apply Finset.prod_le_one
    · intro i hi
      exact zero_le (a i)
    · intro i hi