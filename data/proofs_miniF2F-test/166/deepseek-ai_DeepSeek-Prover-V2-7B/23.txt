induction' n with n ih
  · simp_all
  · simp_all [Finset.prod_range_succ', Finset.sum_range_succ, Nat.cast_add, Nat.cast_one, Nat.cast_zero, Nat.cast_succ]
    have h₁ : a n ≤ 1 := by
      by_contra h
      have h₂ : a n > 1 := by
        exact lt_of_not_le h
      have h₃ : ∑ x in Finset.range n, a x ≥ n := by
        have h₄ : ∑ x in Finset.range n, a x ≥ n := by
          have h₅ : ∑ x in Finset.range n, a x ≥ n := by
            exact
              calc
                (∑ x in Finset.range n, a x) ≥ ∑ x in Finset.range n, (1 : NNReal) := by
                  exact Finset.sum_le_sum fun x hx => by
                    have h₆ : a x ≥ 1 := by
                      have h₇ : a x ≥ 1 := by
                        linarith [h₂]
                      exact h₇
                    simp_all
                _ = n := by simp
          exact h₅
        exact h₄
      have h₄ : a n ≤ ∑ x in Finset.range n, a x := by
        exact Finset.single_le_sum (fun i _ => by simp_all) (Finset.mem_range.mpr (Nat.lt_succ_self n))
      have h₅ : a n ≤ n := by
        linarith
      have h₆ : a n > 1 := by
        exact h₂
      have h₇ : (1 : NNReal) < a n := by
        exact h₆
      have h₈ : (1 : NNReal) < a n := by
        exact h₇
      have h₉ : a n ≤ n := by
        exact h₅
      have h₁₀ : (n : NNReal) < n + 1 := by
        simp
      have h₁₁ : a n ≤ n := by
        exact h₅
      have h₁₂ : (n : NNReal) < n + 1 := by
        simp
      nlinarith
    have h₂ : (∏ x in Finset.range n, a x) ≤ 1 := by
      exact ih (by simp_all)
    have h₃ : a n * (∏ x in Finset.range n, a x) ≤ 1 * 1 := by
      calc
        a n * (∏ x in Finset.range n, a x) ≤ 1 * (∏ x in Finset.range n, a x) := by
          exact mul_le_mul_right' h₁ _
        _ = 1 * (∏ x in Finset.range n, a x) := by rfl
        _ ≤ 1 * 1 := by
          simp_all [mul_comm]
          <;>
          nlinarith
    simp_all [Finset.prod_range_succ', Finset.sum_range_succ, Nat.cast_add, Nat.cast_one, Nat.cast_zero, Nat.cast_succ]
    <;> nlinarith
```