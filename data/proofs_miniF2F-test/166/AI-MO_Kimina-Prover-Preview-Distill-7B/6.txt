-- show that $a_i \geq 0$ for all $i$
  have h₁ : ∀ i ∈ Finset.range n, 0 ≤ a i := by
    intro i _
    exact NNReal.zero_le (a i)

  -- show that $a_i \leq n$ for all $i$
  have h₂ : ∀ i ∈ Finset.range n, a i ≤ n := by
    intro i _
    have : a i ≤ ∑ x in Finset.range n, a x := by
      refine Finset.le_sum_of_eq?_?_
      · intro j _
        apply h₁
      · simp [h₀]
    rw [h₀] at this
    exact this

  -- show that $\prod_{i=1}^n a_i \leq 1$
  have h₃ : (∏ x in Finset.range n, a x) ≤ 1 := by
    -- by induction
    induction n with
    | zero => simp [h₀]
    | succ n ih =>
      -- if $\sum_{i=1}^n a_i = n$ and $a_i \leq n$ for all $i$, then $\prod_{i=1}^n a_i \leq 1$
      by_cases h : n = 0
      · simp [h, h₀]
      · have : ∏ x ∈ Finset.range (n + 1), a x = (∏ x ∈ Finset.range n, a x) * a n := by
          rw [Finset.prod_range_succ]
        rw [this]
        have : a n ≤ n := h₂ n (Finset.mem_range_succ_self n)
        have : (∏ x ∈ Finset.range n, a x) ≤ 1 := ih (sum_eq_of_le_of_le h₀ h₁ h₂)
        nlinarith
  exact h₃

```