have step₁ : (∀ a b, f (2 * a) + 2 * f b = f (f (a + b))) → ∀ z, f z = 0 ∨ ∃ c, ∀ z, f z = 2 * z + c := by
    intro hf
    have h1 := hf 0 0
    have h2 := hf 0 (f 0)
    have h3 := hf (f 0) 0
    have h4 := hf (f 0) (f 0)
    have h5 := hf 1 0
    have h6 := hf 0 1
    have h7 := hf 1 1
    have h8 := hf (-1) 1
    have h9 := hf 1 (-1)
    have h10 := hf (-1) (-1)
    have h11 := hf 0 (-1)
    have h12 := hf (-1) 0
    have h13 := hf 1 (-2)
    have h14 := hf (-2) 1
    have h15 := hf 2 0
    have h16 := hf 0 2
    have h17 := hf 2 1
    have h18 := hf 1 2
    have h19 := hf 2 (-1)
    have h20 := hf (-1) 2
    have h21 := hf 3 0
    have h22 := hf 0 3
    have h23 := hf 3 1
    have h24 := hf 1 3
    have h25 := hf 3 (-1)
    have h26 := hf (-1) 3
    have h27 := hf 2 2
    have h28 := hf (-2) (-2)
    norm_num at *
    have h29 : ∀ z, f z = 0 ∨ ∃ c, ∀ z, f z = 2 * z + c := by
      intro z
      by_contra! h
      have h30 := hf z 0
      have h31 := hf 0 z
      have h32 := hf z z
      have h33 := hf (-z) z
      have h34 := hf z (-z)
      have h35 := hf (-z) (-z)
      ring_nf at *
      norm_num at *
      <;> omega
    exact h29
  
  have step₂ : (∀ z, f z = 0 ∨ ∃ c, ∀ z, f z = 2 * z + c) → (∀ a b, f (2 * a) + 2 * f b = f (f (a + b))) := by
    intro h
    intro a b
    have h1 : ∀ z, f z = 0 ∨ ∃ c, ∀ z, f z = 2 * z + c := h
    have h2 : ∀ z, f z = 0 ∨ ∃ c, ∀ z, f z = 2 * z + c := h1
    rcases h2 (a + b) with (h3 | ⟨c, h3⟩) <;> rcases h2 a with (h4 | ⟨c1, h4⟩) <;> rcases h2 b with (h5 | ⟨c2, h5⟩) <;>
      rcases h2 (2 * a) with (h6 | ⟨c3, h6⟩) <;>
      rcases h2 (f (a + b)) with (h7 | ⟨c4, h7⟩) <;>
      simp_all [mul_add, add_mul, mul_comm, mul_left_comm, mul_assoc] <;>
      (try omega) <;>
      (try {
        have h8 := hf 0 0
        have h9 := hf 0 1
        have h10 := hf 1 0
        have h11 := hf 1 1