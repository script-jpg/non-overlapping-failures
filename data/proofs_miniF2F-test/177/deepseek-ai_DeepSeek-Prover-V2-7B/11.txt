have step₁ : (∀ a b, f (2 * a) + 2 * f b = f (f (a + b))) → ∀ z, f z = 0 ∨ ∃ c, ∀ z, f z = 2 * z + c := by
    intro h1 z
    have h2 := h1 0 0
    have h3 := h1 0 z
    have h4 := h1 z 0
    have h5 := h1 z z
    have h6 := h1 1 0
    have h7 := h1 0 1
    have h8 := h1 1 1
    have h9 := h1 (-1) 0
    have h10 := h1 0 (-1)
    have h11 := h1 1 (-1)
    have h12 := h1 (-1) (-1)
    have h13 := h1 1 z
    have h14 := h1 z 1
    have h15 := h1 (-1) z
    have h16 := h1 z (-1)
    have h17 := h1 (z + 1) 0
    have h18 := h1 0 (z + 1)
    have h19 := h1 (z + 1) (z + 1)
    have h20 := h1 (-z) 0
    have h21 := h1 0 (-z)
    have h22 := h1 (-z) (-z)
    have h23 := h1 (z + 1) (-1)
    have h24 := h1 (-1) (z + 1)
    have h25 := h1 z 2
    have h26 := h1 2 z
    have h27 := h1 (z + 2) 0
    have h28 := h1 0 (z + 2)
    have h29 := h1 (z + 2) (z + 2)
    have h30 := h1 (-z) 1
    have h31 := h1 1 (-z)
    have h32 := h1 z (-2)
    have h33 := h1 (-2) z
    have h34 := h1 (z + 2) (-2)
    have h35 := h1 (-2) (z + 2)
    ring_nf at *
    -- Use the above equations to deduce properties about f
    by_cases h : f 0 = 0
    · have h36 : ∀ z, f z = 0 := by
        intro z
        have h37 := h1 z 0
        have h38 := h1 0 z
        have h39 := h1 z z
        simp [h] at *
        <;> ring_nf at * <;> nlinarith
      exact Or.inl (by simp_all)
    · have h36 : f 0 = 1 ∨ f 0 = -1 := by
        apply or_iff_not_imp_left.mpr
        intro h37
        apply mul_left_cancel₀ (sub_ne_zero.mpr h37)
        nlinarith
      cases h36 with
      | inl h36 =>
        have h37 : ∀ z, f z = 2 * z + 1 := by
          intro z
          have h38 := h1 z 0
          have h39 := h1 0 z
          have h40 := h1 z z
          have h41 := h1 1 0
          have h42 := h1 0 1
          have h43 := h1 1 1
          have h44 := h1 (-1) 0
          have h45 := h1 0 (-1)
          have h46 := h1 1 (-1)
          have h47 := h1 (-1) (-1)
          have h48 := h1 z 1
          have h49 := h1 1 z
          have h50 := h1 (-1) z
          have h51 := h1 z (-1)
          have h52 := h1 (z + 1) 0
          have h53 := h1 0 (z +