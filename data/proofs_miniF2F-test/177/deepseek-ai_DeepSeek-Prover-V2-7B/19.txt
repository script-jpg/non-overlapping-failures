have step₁ : (∀ a b, f (2 * a) + 2 * f b = f (f (a + b))) → ∀ z, f z = 0 ∨ ∃ c, ∀ z, f z = 2 * z + c := by
    intro hf z
    have h1 := hf 0 0
    have h2 := hf 0 z
    have h3 := hf z 0
    have h4 := hf z z
    have h5 := hf 1 0
    have h6 := hf 0 1
    have h7 := hf 1 1
    have h8 := hf (-1) 1
    have h9 := hf 1 (-1)
    have h10 := hf (-1) (-1)
    have h11 := hf 0 (z + z)
    have h12 := hf (z + z) 0
    have h13 := hf z (z + z)
    have h14 := hf (z + z) z
    have h15 := hf z (-z)
    have h16 := hf (-z) z
    have h17 := hf z 0
    have h18 := hf 0 z
    have h19 := hf z z
    have h20 := hf (-z) (-z)
    have h21 := hf z (-z)
    have h22 := hf (-z) z
    -- Normalize the expressions to simplify
    ring_nf at *
    -- Use the simplified equations to solve for f(z)
    by_cases h : f z = 0
    · exact Or.inl h
    · right
      use (f z - 2 * z)
      intro z'
      have h23 := hf z' z'
      have h24 := hf (z' + z') (z' + z')
      have h25 := hf z' 0
      have h26 := hf 0 z'
      have h27 := hf (z' + z') 0
      have h28 := hf 0 (z' + z')
      have h29 := hf z' (-z')
      have h30 := hf (-z') z'
      have h31 := hf z' z
      have h32 := hf z (-z)
      have h33 := hf (-z) z
      have h34 := hf z' (-z)
      have h35 := hf (-z) z'
      ring_nf at *
      omega
  
  have step₂ : (∀ z, f z = 0 ∨ ∃ c, ∀ z, f z = 2 * z + c) → ∀ a b, f (2 * a) + 2 * f b = f (f (a + b)) := by
    intro h a b
    have h₁ := h 0
    have h₂ := h 1
    have h₃ := h (-1)
    have h₄ := h 2
    have h₅ := h (-2)
    rcases h₁ with (h₁ | ⟨c₁, h₁⟩) <;> rcases h₂ with (h₂ | ⟨c₂, h₂⟩) <;> rcases h₃ with (h₃ | ⟨c₃, h₃⟩) <;> rcases h₄ with (h₄ | ⟨c₄, h₄⟩) <;> rcases h₅ with (h₅ | ⟨c₅, h₅⟩) <;> simp_all [mul_add, mul_comm, mul_left_comm, mul_assoc] <;>
    (try omega) <;>
    (try {
      have h₆ := h 0
      have h₇ := h 1
      have h₈ := h (-1)
      have h₉ := h 2
      have h₁₀ := h (-2)
      simp_all [mul_add, mul_comm, mul_left_comm, mul_assoc] <;> omega
    }) <;>
    (