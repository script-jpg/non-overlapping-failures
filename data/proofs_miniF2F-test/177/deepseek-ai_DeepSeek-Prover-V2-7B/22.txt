have step₁ : (∀ a b, f (2 * a) + 2 * f b = f (f (a + b))) → ∀ z, f z = 0 ∨ ∃ c, ∀ z, f z = 2 * z + c := by
    intro h
    have h₁ := h 0 0
    have h₂ := h 0 (f 0)
    have h₃ := h (f 0) 0
    have h₄ := h (f 0) (f 0)
    have h₅ := h 1 0
    have h₆ := h 0 1
    have h₇ := h 1 1
    have h₈ := h (-1) 0
    have h₉ := h 0 (-1)
    have h₁₀ := h 1 (-1)
    have h₁₁ := h (-1) (-1)
    have h₁₂ := h 0 2
    have h₁₃ := h 2 0
    have h₁₄ := h 2 1
    have h₁₅ := h 1 2
    have h₁₆ := h 2 (-1)
    have h₁₇ := h (-1) 2
    have h₁₈ := h 2 2
    have h₁₉ := h (-2) (-2)
    have h₂₀ := h (-2) 2
    have h₂₁ := h 2 (-2)
    have h₂₂ := h (-2) (-1)
    have h₂₃ := h (-1) (-2)
    have h₂₄ := h (-2) 1
    have h₂₅ := h 1 (-2)
    have h₂₆ := h (-1) 1
    have h₂₇ := h 1 (-1)
    have h₂₈ := h (-1) 2
    have h₂₉ := h 2 (-2)
    have h₃₀ := h (-2) (-1)
    have h₃₁ := h (-1) (-2)
    norm_num at *
    have h₃₂ : ∀ z, f z = 0 ∨ ∃ c, ∀ z, f z = 2 * z + c := by
      intro z
      by_cases hz : f z = 0
      · exact Or.inl hz
      · right
        use (f z - 2 * z)
        intro z'
        have h₃₃ := h z' z
        have h₃₄ := h z z'
        have h₃₅ := h (z + z') z
        have h₃₆ := h z (z + z')
        have h₃₇ := h (z + z') 0
        have h₃₈ := h 0 (z + z')
        have h₃₉ := h (z + z') (-z)
        have h₄₀ := h (-z) (z + z')
        have h₄₁ := h (z + z') (-z')
        have h₄₂ := h (-z') (z + z')
        have h₄₃ := h (-z) (-z')
        have h₄₄ := h (-z') (-z)
        ring_nf at *
        omega
    exact h₃₂
  
  have step₂ : (∀ z, f z = 0 ∨ ∃ c, ∀ z, f z = 2 * z + c) → (∀ a b, f (2 * a) + 2 * f b = f (f (a + b))) := by
    rintro h
    intro a b
    have h1 := h 0
    have h2 := h 1
    have h3 := h (-1)
    have h4 := h 2
    have h5 := h (-2)
    rcases h1 with (h1 | ⟨c, hc⟩) <;>
    rcases h2 with (h2 | ⟨c', hc'⟩) <;>
    rcases h3 with (h3 | ⟨c'', hc''⟩) <;>
    rcases h4 with (h4 | ⟨c''', h