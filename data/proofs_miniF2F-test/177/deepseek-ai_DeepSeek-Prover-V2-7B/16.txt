have h₁ : (∀ a b, f (2 * a) + 2 * f b = f (f (a + b))) ↔ ∀ z, f z = 0 ∨ ∃ c, ∀ z, f z = 2 * z + c := by
    constructor
    · intro h
      have h₁ : ∀ z, f z = 0 ∨ ∃ c, ∀ z, f z = 2 * z + c := by
        intro z
        have h₂ := h 0 0
        have h₃ := h z 0
        have h₄ := h 0 z
        have h₅ := h z z
        have h₆ := h 1 0
        have h₇ := h 0 1
        have h₈ := h 1 1
        have h₉ := h (-1) 0
        have h₁₀ := h 0 (-1)
        have h₁₁ := h 1 (-1)
        have h₁₂ := h (-1) 1
        have h₁₃ := h z 1
        have h₁₄ := h z (-1)
        have h₁₅ := h (2 * z) 0
        have h₁₆ := h 0 (2 * z)
        have h₁₇ := h (2 * z) (2 * z)
        have h₁₈ := h (2 * z) (-z)
        have h₁₉ := h (-z) (2 * z)
        have h₂₀ := h (-z) (-z)
        have h₂₁ := h (z + 1) 0
        have h₂₂ := h 0 (z + 1)
        have h₂₃ := h (z + 1) (z + 1)
        have h₂₄ := h (z + 1) (-z)
        have h₂₅ := h (-z) (z + 1)
        have h₂₆ := h (-z) (-z + 1)
        norm_num at *
        by_cases h₂₇ : f z = 0
        · exact Or.inl h₂₇
        · right
          use (f z - 2 * z) / 2
          intro z'
          have h₂₈ := h z' z
          have h₂₉ := h z' 0
          have h₃₀ := h 0 z'
          have h₃₁ := h z' (-z)
          have h₃₂ := h (-z) z'
          have h₃₃ := h z' (2 * z)
          have h₃₄ := h (2 * z) z'
          have h₃₅ := h z' (-2 * z)
          have h₃₆ := h (-2 * z) z'
          ring_nf at *
          omega
      exact h₁
    · intro h
      rintro a b
      rcases h 0 with (h₀ | ⟨c, h₀⟩) <;> rcases h 1 with (h₁ | ⟨c', h₁⟩) <;>
        rcases h (-1) with (h₂ | ⟨c'', h₂⟩) <;>
        rcases h (2 : ℤ) with (h₃ | ⟨c''', h₃⟩) <;>
        rcases h (-2 : ℤ) with (h₄ | ⟨c'''', h₄⟩) <;>
        try { omega } <;>
        (try {
          have h₅ := h₀ 0
          have h₆ := h₀ 1
          have h₇ := h₀ (-1)
          have h₈ := h₀ 2
          have h₉ := h₀ (-2)
          have h₁₀ := h₁ 0
          have h₁₁ := h₁ 1
          have h₁₂ := h₁ (-1)
          have h₁₃ := h₁ 2
          have h₁₄ := h₁ (-2)
          have h₁₅ := h₂ 0
          have h₁₆ := h₂