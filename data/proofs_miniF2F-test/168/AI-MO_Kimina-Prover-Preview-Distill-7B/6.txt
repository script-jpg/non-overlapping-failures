-- We have $a^3 - 8 = 0$ and $b^3 - 8b^2 - 8b + 64 = 0.$
  -- We want to show that $|a - b| \leq 2\sqrt{21}.$
  -- Factorize the equations
  have h₂ : (a - 2) * (a ^ 2 + 2 * a + 4) = 0 := by
    calc _ = a ^ 3 - 8 := by ring
         _ = 0 := by rw [h₀]
  have h₃ : (b - 2) * (b ^ 2 - 6 * b + 32) = 0 := by
    calc _ = b ^ 3 - 8 * b ^ 2 - 8 * b + 64 := by ring
         _ = 0 := by rw [h₁]

  -- We have $a - 2 = 0$ or $a ^ 2 + 2 a + 4 = 0$.
  -- We have $b - 2 = 0$ or $b ^ 2 - 6 b + 32 = 0$.
  rw [mul_eq_zero] at h₂ h₃
  rcases h₂ with ha1 | ha2
  rcases h₃ with hb1 | hb2

  -- If $a - 2 = 0$ and $b - 2 = 0$, then $|a - b| = 0 \leq 2\sqrt{21}.$
  · rw [sub_eq_zero] at ha1 hb1
    rw [ha1, hb1]
    simp

  -- If $a - 2 = 0$ and $b ^ 2 - 6 b + 32 = 0$, then $|a - b| \leq 2\sqrt{21}.$
  · rw [sub_eq_zero] at ha1
    have hb1' : (b - 8) * (b + 4) = 0 := by
      calc _ = b ^ 2 - 6 * b + 32 := by ring
           _ = 0 := by rw [hb2]
    rw [mul_eq_zero] at hb1'
    rcases hb1' with hb8 | hb4
    · rw [hb8]
      rw [ha1]
      simp [Complex.abs, Complex.normSq]
      norm_num
    · rw [sub_eq_zero] at hb4
      rw [ha1, hb4]
      simp [Complex.abs, Complex.normSq]
      norm_num

  -- If $a ^ 2 + 2 a + 4 = 0$ and $b - 2 = 0$, then $|a - b| \leq 2\sqrt{21}.$
  · have ha2' : (a - (-1 + Real.sqrt 3)) * (a - (-1 - Real.sqrt 3)) = 0 := by
      calc _ = a ^ 2 + 2 * a + 4 := by ring
           _ = 0 := by rw [ha2]
    rw [mul_eq_zero] at ha2'
    rcases ha2' with ha1 | ha2
    · rw [sub_eq_zero] at hb1
      rw [ha1, hb1]
      simp [Complex.abs, Complex.normSq]
      ring_nf
      have : 1 + Real.sqrt 3 * (8 - Real.sqrt 3) + (Real.sqrt 3) ^ 2 = 18 + 8 * Real.sqrt 3 := by
        ring_nf
        rw [Real.sq_sqrt (by norm_num)]
        ring
      rw [this]
      have : (18 + 8 * Real.sqrt 3) ^ 2 ≤ 4 ^ 2 * 21 := by
        ring_nf
        rw [Real.sq_sqrt (by norm_num)]
        linarith [show 8 * Real.sqrt 3 ≤ 14 by apply le_of_lt; apply lt_trans?_ <;> norm_num]
      rw [abs_sq, abs_of_nonneg (show 0 ≤ 2 * Real.sqrt 21 by apply mul_nonneg (norm_num) <;> apply Real.sqrt_nonneg)] at this
      exact this
    · rw [sub_eq_zero] at hb4
      rw [ha2, hb4]
      simp [Complex.abs, Complex.normSq]
      ring_nf
      have : 1 - Real.sqrt 3 * (8 - Real.sqrt 3) + (Real.sqrt 3) ^ 2 = 18 - 8 * Real.sqrt 3 := by
        ring_nf
        rw [Real.sq_sqrt (by norm_num)]
        ring
      rw [this]
      have : (18 - 8 * Real.sqrt 3) ^ 2 ≤ 4 ^ 2 * 21 := by
        ring_nf
        rw [Real.sq_sqrt (by norm_num)]
        linarith [show 8 * Real.sqrt 3 ≤ 14 by apply le_of_lt; apply lt_trans?_ <;> norm_num]
      rw [abs_sq, abs_of_nonneg (show 0 ≤ 2 * Real.sqrt 21 by apply mul_nonneg (norm_num) <;> apply Real.sqrt_nonneg)] at this
      exact this

  -- If $a ^ 2 + 2 a + 4 = 0$ and $b ^ 2 - 6 b + 32 = 0$, then $|a - b| \leq 2\sqrt{21}.$
  · have ha2' : (a - (-1 + Real.sqrt 3)) * (a - (-1 - Real.sqrt 3)) = 0 := by
      calc _ = a ^ 2 + 2 * a + 4 := by ring
           _ = 0 := by rw [ha2]
    rw [mul_eq_zero] at ha2'
    rcases ha2' with ha1 | ha2
    · have hb2' : (b - (4 + 2 * Real.sqrt 3)) * (b - (4 - 2 * Real.sqrt 3)) = 0 := by
        calc _ = b ^ 2 - 6 * b + 32 := by ring
             _ = 0 := by rw [hb2]
      rw [mul_eq_zero] at hb2'
      rcases hb2' with hb1 | hb2
      · rw [sub_eq_zero] at ha1
        rw [ha1]
        simp [Complex.abs, Complex.normSq]
        ring_nf
        rw [show 1 + Real.sqrt 3 * (1 - Real.sqrt 3) + (Real.sqrt 3) ^ 2 = 4 - 2 * Real.sqrt 3 by
          ring_nf
          rw [Real.sq_sqrt (by norm_num)]
          ring]
        rw [this]
        have : (4 - 2 * Real.sqrt 3) ^ 2 ≤ 4 ^ 2 * 21 := by
          ring_nf
          rw [Real.sq_sqrt (by norm_num)]
          linarith [show 2 * Real.sqrt 3 ≤ 8 by apply le_of_lt; apply lt_trans?_ <;> norm_num]
        rw [abs_sq, abs_of_nonneg (show 0 ≤ 2 * Real.sqrt 21 by apply mul_nonneg (norm_num) <;> apply Real.sqrt_nonneg)] at this
        exact this
      · rw [sub_eq_zero] at hb2
        rw [ha1, hb2]
        simp [Complex.abs, Complex.normSq]
        ring_nf
        rw [show 1 - Real.sqrt 3 * (1 + Real.sqrt 3) + (Real.sqrt 3) ^ 2 = 4 + 2 * Real.sqrt 3 by
          ring_nf
          rw [Real.sq_sqrt (by norm_num)]
          ring]
        rw [this]
        have : (4 + 2 * Real.sqrt 3) ^ 2 ≤ 4 ^ 2 * 21 := by
          ring_nf
          rw [Real.sq_sqrt (by norm_num)]
          linarith [show 2 * Real.sqrt 3 ≤ 8 by apply le_of_lt; apply lt_trans?_ <;> norm_num]
        rw [abs_sq, abs_of_nonneg (show 0 ≤ 2 * Real.sqrt 21 by apply mul_nonneg (norm_num) <;> apply Real.sqrt_nonneg)] at this
        exact this
    · have hb2' : (b - (4 + 2 * Real.sqrt 3)) * (b - (4 - 2 * Real.sqrt 3)) = 0 := by
        calc _ = b ^ 2 - 6 * b + 32 := by ring
             _ = 0 := by rw [hb2]
      rw [mul_eq_zero] at hb2'
      rcases hb2' with hb1 | hb2
      · rw [sub_eq_zero] at ha2
        rw [ha2, hb1]
        simp [Complex.abs, Complex.normSq]
        ring_nf
        rw [show 1 + Real.sqrt 3 * (1 - Real.sqrt 3) + (Real.sqrt 3) ^ 2 = 4 - 2 * Real.sqrt 3 by
          ring_nf
          rw [Real.sq_sqrt (by norm_num)]
          ring]
        rw [this]
        have : (4 - 2 * Real.sqrt 3) ^ 2 ≤ 4 ^ 2 * 21 := by
          ring_nf
          rw [Real.sq_sqrt (by norm_num)]
          linarith [show 2 * Real.sqrt 3 ≤ 8 by apply le_of_lt; apply lt_trans?_ <;> norm_num]
        rw [abs_sq, abs_of_nonneg (show 0 ≤ 2 * Real.sqrt 21 by apply mul_nonneg (norm_num) <;> apply Real.sqrt_nonneg)] at this
        exact this
      · rw [sub_eq_zero] at hb2
        rw [ha2, hb2]
        simp [Complex.abs, Complex.normSq]
        ring_nf
        rw [show 1 - Real.sqrt 3 * (1 + Real.sqrt 3) + (Real.sqrt 3) ^ 2 = 4 + 2 * Real.sqrt 3 by
          ring_nf
          rw [Real.sq_sqrt (by norm_num)]
          ring]
        rw [this]
        have : (4 + 2 * Real.sqrt 3) ^ 2 ≤ 4 ^ 2 * 21 := by
          ring_nf
          rw [Real.sq_sqrt (by norm_num)]
          linarith [show 2 * Real.sqrt 3 ≤ 8 by apply le_of_lt; apply lt_trans?_ <;> norm_num]
        rw [abs_sq, abs_of_nonneg (show 0 ≤ 2 * Real.sqrt 21 by apply mul_nonneg (norm_num) <;> apply Real.sqrt_nonneg)] at this
        exact this

```