have h₁ : (3 ^ 2 ^ n - 1) % 2 ^ (n + 3) = 2 ^ (n + 2) := by
    have h₁ : 3 ^ 2 ^ n - 1 = 2 ^ (n + 2) + 2 ^ (n + 3) * ((3 ^ 2 ^ n - 1) / 2 ^ (n + 3)) := by
      have h₂ : 3 ^ 2 ^ n > 0 := by positivity
      have h₃ : 2 ^ (n + 3) > 0 := by positivity
      have h₄ : 3 ^ 2 ^ n % 2 ^ (n + 3) = 1 := by
        have h₅ : ∀ n : ℕ, 0 < n → 3 ^ 2 ^ n % 2 ^ (n + 3) = 1 := by
          intro n hn
          induction' hn with n hn
          <;> simp_all [Nat.pow_succ, Nat.pow_mul, Nat.pow_one, Nat.mul_mod, Nat.pow_mod]
          <;> omega
        exact h₅ n h₀
      omega
    rw [h₁]
    simp [Nat.add_mod, Nat.mul_mod, Nat.pow_mod, Nat.mod_eq_of_lt]
    <;> induction n <;> simp_all [Nat.pow_succ, Nat.pow_mul, Nat.pow_one, Nat.mul_mod, Nat.pow_mod]
    <;> omega
  
  exact h₁
```