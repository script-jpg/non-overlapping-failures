have h : ∀ n : ℕ, 0 < n → (3 ^ 2 ^ n - 1) % 2 ^ (n + 3) = 2 ^ (n + 2) := by
    intro n hn
    have h1 : 3 ^ 2 ^ n % 2 ^ (n + 3) = 3 ^ 2 ^ n % 2 ^ (n + 3) := rfl
    have h2 : 3 ^ 2 ^ n % 2 ^ (n + 3) = 1 % 2 ^ (n + 3) := by
      have h3 : ∀ n : ℕ, 0 < n → 3 ^ 2 ^ n % 2 ^ (n + 3) = 1 % 2 ^ (n + 3) := by
        intro n hn
        induction' hn with n hn
        · norm_num
        · simp_all [pow_succ, pow_mul, Nat.mul_mod, Nat.pow_mod]
          <;> omega
      exact h3 n hn
    have h3 : (3 ^ 2 ^ n - 1) % 2 ^ (n + 3) = 2 ^ (n + 2) := by
      rw [← Nat.mod_add_div (3 ^ 2 ^ n) (2 ^ (n + 3))]
      simp [h2, Nat.pow_mod, Nat.add_mod, Nat.mul_mod, Nat.mod_mod]
      <;> induction n <;> simp_all [pow_succ, pow_mul, Nat.mul_mod, Nat.pow_mod, Nat.add_mod, Nat.mod_mod]
      <;> omega
    exact h3
  exact h n h₀
```