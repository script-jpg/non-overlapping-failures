have A (n : ℕ) : (3 ^ 2 ^ n - 1) % 2 ^ (n + 2) = 2 ^ n * 2 := by
    induction n with
    -- n = 0 is not possible as hypothesis states n > 0
    | zero => contradiction
    | succ n ih =>
      -- base case : n = 1
      induction n with
      | zero =>
        simp
      -- inductive step
      | succ n _ =>
        rw [show 2 ^ (n + 1 + 2) = 2 ^ (n + 2) * 2 by ring,
            show 3 ^ 2 ^ (n + 1) = 3 ^ 2 ^ n * 3 ^ 2 ^ n by rw [←Nat.pow_mul]]
        rw [Nat.sub_eq_iff_eq_add (by linarith [ih]) (by simp)]
        ring_nf
        rw [ih (by linarith)]
        ring
  -- now to conclude : show 3 ^ 2 ^ n - 1 ≡ 2 ^ (n + 2) mod 2 ^ (n + 3)
  rw [show 2 ^ (n + 2) = 2 ^ (n + 3) / 2 by rw [← Nat.mul_div_cancel (by linarith)]; ring,
      ← A n (by linarith)]
  rw [show 2 ^ (n + 3) = 2 ^ (n + 3) by rfl]
  rw [Nat.mul_mod_self_left]
```