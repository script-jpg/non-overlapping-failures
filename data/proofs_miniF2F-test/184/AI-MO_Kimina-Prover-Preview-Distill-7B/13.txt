have A (n : ℕ) : (3 ^ 2 ^ n - 1) % 2 ^ (n + 2) = 2 ^ n * 2 := by
    induction n with
    | zero => simp
    | succ n ih =>
      rw [pow_add]
      simp at ih
      rw [Nat.add_one_sub_one]
      have aux : 2 ^ (n + 2) * (2 ^ n * 2) = 2 ^ (n + 1) * 2 := by
        rw [mul_assoc, mul_assoc]
        rw [← pow_add, ← pow_add]
        norm_num
        ring
      rw [← aux]
      omega

  have B (n : ℕ) : 2 ^ n * 2 = 2 ^ (n + 1) := by
    rw [pow_succ]
    ring

  rw [A n, B n]
```