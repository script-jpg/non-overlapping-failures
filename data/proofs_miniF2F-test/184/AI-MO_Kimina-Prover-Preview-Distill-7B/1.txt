have h₁ : 2 ^ (n + 3) = 8 * 2 ^ n := by
    ring

  have h₂ : 2 ^ (n + 2) = 4 * 2 ^ n := by
    ring

  rw [h₁]

  have h₃ : 3 ≡ 1 \mod 2 := by
    exact rfl

  have h₄ : 3 ^ 2 ≡ 1 \mod 8 := by
    exact rfl

  calc
    (3 ^ 2 ^ n - 1) % 8 % 2 ^ n = (3 ^ 2 ^ n % 8 - 1 % 8) % 2 ^ n := by
      exact Nat.sub_mod_eq_mod_sub (3 ^ 2 ^ n) 1 (2 ^ n) 8
    _ = (1 - 1) % 2 ^ n := by
      congr
      exact Nat.ModEq.pow 2 h₄
    _ = 0 := by
      congr
      exact rfl

  rw [Nat.mod_eq_iff_lt]
  constructor
  · exact h₀
  · simp
    exact Nat.pow_pos (by omega) n

```