have h₁ : 2 ^ (n + 3) = 8 * 2 ^ n := by
    ring

  have h₂ : 2 ^ (n + 2) = 4 * 2 ^ n := by
    ring

  have h₃ : 2 ^ n > 0 := by
    exact Nat.pos_pow_of_pos n (by norm_num)

  have h₄ : 2 * 2 ^ n > 0 := by
    exact Nat.pos_of_ne_zero (left_add_ne_zero_iff.mpr h₃)

  -- Prove by induction, that $3 ^ {2 ^ n} = 8 ^ {2 ^ n} + 2 * 2 ^ n * 4 ^ {2 ^ n} + 1$.
  have claim (n : ℕ) : 3 ^ 2 ^ n = 8 ^ 2 ^ n + 2 * 2 ^ n * 4 ^ 2 ^ n + 1 := by
    induction n with
    | zero => norm_num
    | succ n ih =>
      calc
        3 ^ 2 ^ (n + 1) = 3 ^ (2 * 2 ^ n) := by congr 1; ring
        _ = (3 ^ 2) ^ 2 ^ n := by rw [Nat.pow_mul]
        _ = 9 ^ 2 ^ n := by norm_num
        _ = (8 + 1) ^ 2 ^ n := by norm_num
        _ = 8 ^ 2 ^ n + 2 * 8 ^ 2 ^ n * 1 + 1 := by rw [Nat.pow_add, Nat.mul_one, Nat.add_assoc]; congr 1; ring
        _ = 8 ^ 2 ^ n + 2 * 2 ^ n * 4 ^ 2 ^ n + 1 := by congr 2; rw [Nat.mul_comm (2 ^ n), <-Nat.pow_add_one, <-Nat.mul_comm, <-Nat.pow_add]; ring

  -- Apply this claim.
  apply Nat.ModEq.add_right_cancel' 1
  rw [claim n, add_assoc, add_assoc, add_assoc, add_assoc, add_assoc, add_assoc, add_assoc]
  norm_num
  rw [h₁, h₂]
  norm_num
  -- Now we need to show that 8 * 2 ^ n + 2 * 2 ^ n * 4 ^ 2 ^ n ≡ 0 mod 2 ^ n * 8.
  apply Nat.ModEq.add_right_cancel' (2 ^ n * 8)
  rw [h₁, h₂]
  apply Nat.modEq_zero_iff_dvd.mpr
  rw [<-Nat.add_mul, <-Nat.pow_add_one, <-Nat.mul_assoc, Nat.mul_add_right_comm, Nat.add_comm]
  apply Nat.dvd_mul_left

```