have A (n : ℕ) : (3 ^ 2 ^ n - 1) % 2 ^ (n + 2) = 2 ^ n * 2 := by
    induction n with
    | zero => simp
    | succ n ih =>
      rw [pow_add]
      rw [Nat.sub_add_eq]
      rw [pow_add]
      rw [pow_one]
      rw [Nat.mul_mod]
      rw [ih]
      rw [pow_succ]
      rw [Nat.mul_mod]
      simp
      rw [←Nat.add_mod]
      rw [Nat.mod_self]
      rw [Nat.mul_mod]
      simp
      apply Nat.mod_eq_of_lt
      constructor
      · apply Nat.one_le_pow
        norm_num
        exact Nat.zero_lt_of_lt h₀
      · apply Nat.pow_lt_pow_iff_right
        norm_num
        exact Nat.zero_lt_of_lt h₀
      · apply Nat.pow_le_pow_iff_right
        norm_num
        exact Nat.zero_lt_of_lt h₀
  rw [A n]
  rw [mul_comm]
  ring_nf

```