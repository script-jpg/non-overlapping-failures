have h₁ : S = Finset.filter (fun k => k > 0) (Finset.filter (fun k => k * k ∣ ∏ i in Finset.Icc 1 9, i!) (Finset.range 10000)) := by
    ext k
    simp only [h₀, Finset.mem_filter, Finset.mem_range, true_and_iff, and_true_iff]
    <;>
    by_cases h : k > 0 <;>
    by_cases h' : k * k ∣ ∏ i in Finset.Icc 1 9, i! <;>
    simp_all <;>
    (try norm_num) <;>
    (try nlinarith) <;>
    (try
      {
        have h₁ : k ≤ 9999 := by
          by_contra! h₁
          have h₂ : k ≥ 10000 := by nlinarith
          have h₃ : k * k ≥ 10000 * 10000 := by nlinarith
          have h₄ : ∏ i in Finset.Icc 1 9, i! ≤ 362880 := by
            decide
          have h₅ : k * k ∣ ∏ i in Finset.Icc 1 9, i! := by assumption
          have h₆ : k * k ≤ ∏ i in Finset.Icc 1 9, i! := by
            exact Nat.le_of_dvd (by positivity) h₅
          nlinarith
        interval_cases k <;> norm_num <;>
        decide }) <;>
    (try
      {
        norm_num at * <;>
        omega }) <;>
    (try
      {
        have h₁ : k ≤ 9999 := by
          by_contra! h₁
          have h₂ : k ≥ 10000 := by nlinarith
          have h₃ : k * k ≥ 10000 * 10000 := by nlinarith
          have h₄ : ∏ i in Finset.Icc 1 9, i! ≤ 362880 := by
            decide
          have h₅ : k * k ∣ ∏ i in Finset.Icc 1 9, i! := by assumption
          have h₆ : k * k ≤ ∏ i in Finset.Icc 1 9, i! := by
            exact Nat.le_of_dvd (by positivity) h₅
          nlinarith
        interval_cases k <;> norm_num <;>
        decide })
  rw [h₁]
  rfl
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide
  <;> decide