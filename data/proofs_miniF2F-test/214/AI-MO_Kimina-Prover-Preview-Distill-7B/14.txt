-- aux lemma, given that $a \leq 1,$ $b \leq 1,$ $a < b,$ we have $\sin (b \cdot \pi) - \sin (a \cdot \pi) = 2\cos ((a + b) \cdot \pi / 2) \sin ((b - a) \cdot \pi / 2) $
  have h₃ (a b : ℝ) (ha : a ≤ 1) (hb : b ≤ 1) (hab : a < b) : Real.sin (b * Real.pi) - Real.sin (a * Real.pi) = 2 * Real.cos ((a + b) * Real.pi / 2) * Real.sin ((b - a) * Real.pi / 2) := by
    rw [Real.sin_sub_sin] -- we have $\sin (b \cdot \pi) - \sin (a \cdot \pi) = 2\cos ((a + b) \cdot \pi / 2) \sin ((b - a) \cdot \pi / 2) $
    ring_nf
    -- wlog, we may assume that $a = k $ and $b = k + 1 $
    -- such that $(a + b) / 2 = k + 0.5$
    -- and $(b - a) / 2 = 0.5$
    -- and we have $\cos ((a + b) \cdot \pi / 2) = \cos ((k + 0.5) \cdot 2\pi) = \cos (2k\pi + \pi / 2) = \sin \pi / 2 = 1$
    -- and $\sin ((b - a) \cdot \pi / 2) = \sin (0.5\pi) = \sin \pi / 2 = 1$
    -- so $\sin (b \cdot \pi) - \sin (a \cdot \pi) = 2 \times 1 \times 1 = 2$
    -- this is enough to show that the equation is true for $a, b \in [0, 1] $ and $a < b $
    let k := (a + b) / 2
    let s := (b - a) / 2
    have h₄ : a = k - s := by ring
    have h₅ : b = k + s := by ring
    rw [h₄, h₅]
    rw [Real.cos_add]
    rw [mul_sub, mul_add]
    congr 1
    · rw [Real.cos_pi_div_two]
      rw [show s * 2 = b - a by ring]
      linarith
    · rw [Real.sin_pi_div_two]
      rw [show s * 2 = b - a by ring]
      linarith

  -- aux lemma, given that $a \leq 1,$ $b \leq 1,$ we have $\sin (a \cdot \pi) + \sin (b \cdot \pi) = 2\sin ((a + b) \cdot \pi / 2) \cos ((a - b) \cdot \pi / 2) $
  have h₆ (a b : ℝ) (ha : a ≤ 1) (hb : b ≤ 1) : Real.sin (a * Real.pi) + Real.sin (b * Real.pi) = 2 * Real.sin ((a + b) * Real.pi / 2) * Real.cos ((a - b) * Real.pi / 2) := by
    rw [Real.sin_add_sin] -- we have $\sin (a \cdot \pi) - \sin (b \cdot \pi) = 2\sin ((a + b) \cdot \pi / 2) \cos ((a - b) \cdot \pi / 2) $
    ring_nf
    -- wlog, we may assume that $a = k $ and $b = k + 1 $
    -- such that $(a + b) / 2 = k + 0.5$
    -- and $(b - a) / 2 = 0.5$
    -- so $\sin (a \cdot \pi) + \sin (b \cdot \pi) = 2\sin (k \cdot 2\pi + \pi / 2) \cos (0.5\pi) = 2\sin (2k\pi + \pi / 2) \cos (\pi / 2) = 2\sin (\pi / 2) \cos (\pi / 2) = 2 \times 1 \times 0 = 0$
    -- this is enough to show that the equation is true for $a, b \in [0, 1] $
    let k := (a + b) / 2
    let d := (a - b) / 2
    have h₇ : a = k - d := by ring
    have h₈ : b = k + d := by ring
    rw [h₇, h₈]
    rw [Real.sin_add]
    rw [mul_sub, mul_add]
    congr 1
    · rw [Real.sin_pi_div_two]
      rw [show d * 2 = a - b by ring]
      linarith
    · rw [Real.cos_pi_div_two]
      rw [show d * 2 = a - b by ring]
      linarith

  -- aux lemma, if $\alpha = \beta $ then $\sin \alpha - \sin \beta = 0 $
  have h₉ {α β : ℝ} (h : α = β) : Real.sin α - Real.sin β = 0 := by
    rw [h]
    linarith

  -- aux lemma, if $\alpha = \beta $ then $\sin \alpha + \sin \beta = 2\sin \alpha $
  have h₁₀ {α β : ℝ} (h : α = β) : Real.sin α + Real.sin β = 2 * Real.sin α := by
    rw [h]
    linarith

  -- We start by evaluating the sum $\sum_{k=1}^{35} \sin 5k $ by using the formula we derived in terms of $ \alpha $ and $ \beta $.
  have h₁₁ : 3 * Real.pi / 8 - Real.pi / 4 ≤ Real.pi / 2 := by
    linarith
  have h₁₃ : ∑ k in Finset.Icc (1 : ℕ) 35, Real.sin (5 * k * Real.pi / 180) = 7 * Real.tan (3 * Real.pi / 8) := by
    calc
      ∑ k in Finset.Icc (1 : ℕ) 35, Real.sin (5 * k * Real.pi / 180) = 2 * Real.sin (3 * Real.pi / 8) + 2 * Real.sin (Real.pi / 2) + ∑ k in Finset.Icc (3 : ℕ) 34, Real.sin (5 * k * Real.pi / 180) := by
        rw [Finset.sum_Icc_succ_top (by linarith)]
        rw [Finset.sum_Icc_succ_top (by linarith)]
        simp
        ring_nf
      _ = 2 * Real.sin (3 * Real.pi / 8) + 2 * Real.sin (Real.pi / 2) + 2 * Real.sin (3 * Real.pi / 8) + 2 * Real.sin (Real.pi / 4) + ∑ k in Finset.Icc (5 : ℕ) 33, Real.sin (5 * k * Real.pi / 180) := by
        rw [Finset.sum_Icc_succ_top (by linarith)]
        rw [Finset.sum_Icc_succ_top (by linarith)]
        simp
        ring_nf
      _ = 4 * Real.sin (3 * Real.pi / 8) + 2 * Real.sin (Real.pi / 2) + 2 * Real.sin (Real.pi / 4) + ∑ k in Finset.Icc (6 : ℕ) 33, Real.sin (5 * k * Real.pi / 180) := by
        rw [Finset.sum_Icc_succ_top (by linarith)]
        rw [Finset.sum_Icc_succ_top (by linarith)]
        simp
        ring_nf
      _ = 4 * Real.sin (3 * Real.pi / 8) + 2 * Real.sin (Real.pi / 2) + 2 * Real.sin (Real.pi / 4) + 2 * Real.sin (5 * Real.pi / 8) + 2 * Real.sin (3 * Real.pi / 4) + ∑ k in Finset.Icc (7 : ℕ) 32, Real.sin (5 * k * Real.pi / 180) := by
        rw [Finset.sum_Icc_succ_top (by linarith)]
        rw [Finset.sum_Icc_succ_top (by linarith)]
        simp
        ring_nf
      _ = 4 * Real.sin (3 * Real.pi / 8) + 2 * Real.sin (Real.pi / 2) + 2 * Real.sin (Real.pi / 4) + 2 * Real.sin (5 * Real.pi / 8) + 2 * Real.sin (3 * Real.pi / 4) + 2 * Real.sin (5 * Real.pi / 8) + 2 * Real.sin (7 * Real.pi / 8) + ∑ k in Finset.Icc (8 : ℕ) 32, Real.sin (5 * k * Real.pi / 180) := by
        rw [Finset.sum_Icc_succ_top (by linarith)]
        rw [Finset.sum_Icc_succ_top (by linarith)]
        simp
        ring_nf
      _ = 6 * Real.sin (3 * Real.pi / 8) + 2 * Real.sin (Real.pi / 2) + 2 * Real.sin (Real.pi / 4) + 2 * Real.sin (5 * Real.pi / 8) + 2 * Real.sin (3 * Real.pi / 4) + 2 * Real.sin (5 * Real.pi / 8) + 2 * Real.sin (7 * Real.pi / 8) := by
        rw [Finset.sum_Icc_succ_top (by linarith)]
        simp
        ring_nf
      _ = 6 * Real.sin (3 * Real.pi / 8) + 2 * Real.sin (Real.pi / 2) + 2 * Real.sin (Real.pi / 4) + 6 * Real.sin (5 * Real.pi / 8) := by
        rw [h₃ (3 * Real.pi / 8) (5 * Real.pi / 8) (by linarith [Real.pi_pos]), h₆ (Real.pi / 4) (3 * Real.pi / 4) (by linarith [Real.pi_pos])]
        ring_nf
        linarith [Real.pi_pos]
      _ = 8 * Real.sin (3 * Real.pi / 8) + 2 * Real.sin (Real.pi / 2) := by
        rw [h₃ (Real.pi / 2) (5 * Real.pi / 8) (by linarith [Real.pi_pos]), h₆ (Real.pi / 4) (Real.pi / 2) (by linarith [Real.pi_pos])]
        ring_nf
        linarith [Real.pi_pos]
      _ = 8 * Real.sin (3 * Real.pi / 8) + 2 * Real.sin (Real.pi / 2) := by rfl
      _ = 8 * Real.sin (3 * Real.pi / 8) + 2 := by
        rw [h₉ (by linarith)]
        ring_nf
      _ = 7 * Real.tan (3 * Real.pi / 8) := by
        rw [Real.tan_eq_sin_div_cos]
        field_simp
        rw [h₁₁, Real.sin_pi_div_two, Real.cos_pi_div_two]
        ring_nf
        linarith [Real.pi_pos]

  -- We find an expression for $\tan (3\pi / 8) $ in terms of radicals. We start by noticing that $3\pi / 8 = \pi / 4 + \pi / 8 $
  have h₁₄ : 3 * Real.pi / 8 = Real.pi / 4 + Real.pi / 8 := by ring
  have h₁₅ : Real.sin (3 * Real.pi / 8) = Real.sin (Real.pi / 4 + Real.pi / 8) := by rw [h₁₄]
  have h₁₆ : Real.cos (3 * Real.pi / 8) = Real.cos (Real.pi / 4 + Real.pi / 8) := by rw [h₁₄]
  have h₁₇ : Real.sin (Real.pi / 4 + Real.pi / 8) = Real.sin (Real.pi / 4) * Real.cos (Real.pi / 8) + Real.cos (Real.pi / 4) * Real.sin (Real.pi / 8) := by rw [Real.sin_add]
  have h₁₈ : Real.cos (Real.pi / 4 + Real.pi / 8) = Real.cos (Real.pi / 4) * Real.cos (Real.pi / 8) - Real.sin (Real.pi / 4) * Real.sin (Real.pi / 8) := by rw [Real.cos_add]
  have h₁₉ : Real.sin (Real.pi / 8) = √2 * (√2 - √2 * Real.cos (Real.pi / 8)) / 2 := by
    have h₅ : Real.sin (Real.pi / 8) = √2 * Real.sin (Real.pi / 4 / 2) := by
      rw [show Real.pi / 8 = Real.pi / 4 / 2 by ring]
      rw [Real.sin_div_two]
      ring
    rw [h₅]
    rw [Real.sin_pi_div_four]
    have h₃ : Real.cos (Real.pi / 8) ^ 2 = 1 - Real.sin (Real.pi / 8) ^ 2 := by rw [Real.cos_sq']
    have h₄ : Real.sin (Real.pi / 4) / 2 = √2 / 4 := by
      rw [show Real.sin (Real.pi / 4) = √2 / 2 by rw [Real.sin_pi_div_four]]
      ring
    have h₆ : (Real.sin (Real.pi / 4 / 2)) ^ 2 = (Real.sin (Real.pi / 8)) ^ 2 := by
      rw [show Real.pi / 4 / 2 = Real.pi / 8 by ring]
    have h₇ : Real.sin (Real.pi / 8) ^ 2 = 1 / (1 + (Real.cos (Real.pi / 8) ^ 2) / (Real.sin (Real.pi / 8) ^ 2)) := by
      have h₈ : Real.sin (Real.pi / 8) ^ 2 + Real.cos (Real.pi / 8) ^ 2 = 1 := by rw [Real.sin_sq_add_cos_sq]
      field_simp
      linarith
    rw [h₇]
    have h₈ : Real.cos (Real.pi / 8) ^ 2 / (Real.sin (Real.pi / 8) ^ 2) = (Real.cos (Real.pi / 8) ^ 2) / (1 - Real.cos (Real.pi / 8) ^ 2) := by
      rw [show Real.sin (Real.pi / 8) ^ 2 = 1 - Real.cos (Real.pi / 8) ^ 2 by linarith [h₃]]
    rw [h₈]
    have h₈ : 1 - Real.cos (Real.pi / 8) ^ 2 = 1 / (Real.cos (Real.pi / 8) ^ 2) * (Real.cos (Real.pi / 8) ^ 2 - 1) := by
      have h₉ : Real.cos (Real.pi / 8) ^ 2 ≠ 0 := by
        by_contra! h₁₀
        rw [h₁₀] at h₃
        norm_num at h₃
        linarith [Real.pi_pos]
      field_simp
      linarith
    rw [h₈]
    have h₉ : (Real.cos (Real.pi / 8) ^ 2 - 1) = - (Real.cos (Real.pi / 8) ^ 2) * (1 - Real.cos (Real.pi / 8) ^ 2) := by ring
    rw [h₉]
    rw [show (Real.cos (Real.pi / 8) ^ 2 - 1) / (Real.cos (Real.pi / 8) ^ 2) = (Real.cos (Real.pi / 8) ^ 2 - 1) * (1 / (Real.cos (Real.pi / 8) ^ 2)) by ring]
    rw [mul_comm, mul_div_assoc]
    have h₁₀ : Real.cos (Real.pi / 8) ^ 2 * (1 / (Real.cos (Real.pi / 8) ^ 2)) = 1 := by
      have h₁₁ : Real.cos (Real.pi / 8) ^ 2 ≠ 0 := by
        by_contra! h₁₂
        rw [h₁₂] at h₃
        norm_num at h₃
        linarith [Real.pi_pos]
      field_simp
    rw [h₁₀]
    ring
  have h₂₀ : Real.sin (Real.pi / 4) = √2 / 2 := by rw [Real.sin_pi_div_four]
  have h₂₁ : Real.cos (Real.pi / 4) = √2 / 2 := by rw [Real.cos_pi_div_four]
  rw [h₁₅, h₁₆, h₁₇, h₁₈, h₂₀, h₂₁, h₁₉, h₁₁]
  ring_nf
  have h₂₃ : √2 + √2 * (√2 - √2 * (√2 * (√2 + √2) / 2) / 2) / 2 = √2 * (√2 + √2) / 2 := by
    ring_nf
    rw [show √2 * √