-- aux lemma that for any $n$, we have $\sum_{k=0}^{n-1}\sin {k \pi \over n} = {1 \over 2} cot { \pi \over 2n }$
  have h_sum_sin (n : ℕ) : ∑ k in Finset.range n, Real.sin (k * Real.pi / n) = (1 / 2) * Real.cot (Real.pi / (2 * n)) := by
    have : ∑ k in Finset.range n, Real.sin (k * Real.pi / n) = (1 / 2) * Real.cot (Real.pi / (2 * n)) := by
      induction n with
      | zero => simp
      | succ n ih =>
        rw [Finset.sum_range_succ, ih]
        rw [add_div, add_comm, ← add_div, div_div, mul_comm, div_comm]
        rw [← mul_div_assoc, mul_div_mul_left, ← Real.cot_eq_cos_div_sin]
        rw [Real.sin_two_mul (k * Real.pi / n), Real.cos_two_mul (k * Real.pi / n)]
        rw [add_div, add_comm, ← add_div, div_div, mul_comm, div_comm]
        rw [← mul_div_assoc, mul_div_mul_left, ← Real.cot_eq_cos_div_sin]
        rw [Real.sin_two_mul (Real.pi / (2 * n)), Real.cos_two_mul (Real.pi / (2 * n))]
        have : 2 * (k * Real.pi / n) + Real.pi / (2 * n) = (2 * k + 1) * Real.pi / (2 * n) := by ring
        rw [this]
        have : Real.pi / (2 * n) ≠ 0 := by
          contrapose! Real.pi_eq_zero
          linarith [Real.pi_pos]
        field_simp
        left
        linear_combination Real.cos_pi_div_two
      assumption
    assumption

  -- aux lemma that for any $n$ and $x$, we have $\sum_{k=0}^{n-1} \sin (kx + \pi / 2) = {1 \over 2} \cot { x \over 2 }$
  have h_sum_sin_pi_div_two (n : ℕ) (x : ℝ) : ∑ k in Finset.range n, Real.sin (k * x + Real.pi / 2) = (1 / 2) * Real.cot (x / 2) := by
    have : ∑ k in Finset.range n, Real.sin (k * x + Real.pi / 2) = (1 / 2) * Real.cot (x / 2) := by
      induction n with
      | zero => simp
      | succ n ih =>
        rw [Finset.sum_range_succ, ih]
        rw [add_div, add_comm, ← add_div, div_div, mul_comm, div_comm]
        rw [← mul_div_assoc, mul_div_mul_left, ← Real.cot_eq_cos_div_sin]
        rw [Real.sin_two_mul (k * x / n), Real.cos_two_mul (k * x / n)]
        rw [add_div, add_comm, ← add_div, div_div, mul_comm, div_comm]
        rw [← mul_div_assoc, mul_div_mul_left, ← Real.cot_eq_cos_div_sin]
        rw [Real.sin_two_mul (x / 2), Real.cos_two_mul (x / 2)]
        have : k * x / n + x / 2 + Real.pi / 2 = (k * x / n + x) / 2 + Real.pi / 2 := by ring
        rw [this]
        have : x / 2 ≠ 0 := by
          contrapose! Real.pi_eq_zero
          linarith [Real.pi_pos]
        field_simp
        rw [Real.cot_eq_cos_div_sin]
        rw [Real.cos_add, Real.cos_pi_div_two, Real.sin_add, Real.sin_pi_div_two]
        rw [add_comm, mul_comm, mul_comm x]
        nth_rw 2 [add_comm]
        rw [mul_assoc, div_add_div_same]
        ring
      assumption
    assumption

  -- aux lemma that for any $n$ and $x$, we have $\sum_{k=0}^{n-1} \sin (kx + 3\pi / 2) = {1 \over 2} \cot { x \over 2 }$
  have h_sum_sin_three_pi_div_two (n : ℕ) (x : ℝ) : ∑ k in Finset.range n, Real.sin (k * x + 3 * Real.pi / 2) = (1 / 2) * Real.cot (x / 2) := by
    have : ∑ k in Finset.range n, Real.sin (k * x + 3 * Real.pi / 2) = (1 / 2) * Real.cot (x / 2) := by
      induction n with
      | zero => simp
      | succ n ih =>
        rw [Finset.sum_range_succ, ih]
        rw [add_div, add_comm, ← add_div, div_div, mul_comm, div_comm]
        rw [← mul_div_assoc, mul_div_mul_left, ← Real.cot_eq_cos_div_sin]
        rw [Real.sin_two_mul (k * x / n + Real.pi), Real.cos_two_mul (k * x / n + Real.pi)]
        rw [add_div, add_comm, ← add_div, div_div, mul_comm, div_comm]
        rw [← mul_div_assoc, mul_div_mul_left, ← Real.cot_eq_cos_div_sin]
        rw [Real.sin_two_mul (x / 2 + k * x / n), Real.cos_two_mul (x / 2 + k * x / n)]
        have : k * x / n + x / 2 + 3 * Real.pi / 2 = (k * x / n + x + Real.pi) / 2 + Real.pi := by ring
        rw [this]
        have : x / 2 + Real.pi / 2 ≠ 0 := by
          contrapose! Real.pi_eq_zero
          linarith [Real.pi_pos]
        field_simp
        rw [Real.cot_eq_cos_div_sin]
        rw [Real.cos_add, Real.cos_pi_div_two, Real.sin_add, Real.sin_pi_div_two]
        rw [add_comm, mul_comm, mul_comm x]
        nth_rw 2 [add_comm]
        rw [mul_assoc, div_add_div_same]
        ring
      assumption
    assumption

  -- aux lemma that for any $n$ and $x$, we have $\sum_{k=0}^{n-1} \sin (2kx + \pi / 2) = {1 \over 2} \cot { x \over 2 }$
  have h_sum_sin_two_pi_div_two (n : ℕ) (x : ℝ) : ∑ k in Finset.range n, Real.sin (2 * k * x + Real.pi / 2) = (1 / 2) * Real.cot (x / 2) := by
    have : ∑ k in Finset.range n, Real.sin (2 * k * x + Real.pi / 2) = (1 / 2) * Real.cot (x / 2) := by
      induction n with
      | zero => simp
      | succ n ih =>
        rw [Finset.sum_range_succ, ih]
        rw [add_div, add_comm, ← add_div, div_div, mul_comm, div_comm]
        rw [← mul_div_assoc, mul_div_mul_left, ← Real.cot_eq_cos_div_sin]
        rw [Real.sin_two_mul (k * x + Real.pi / 2), Real.cos_two_mul (k * x + Real.pi / 2)]
        rw [add_div, add_comm, ← add_div, div_div, mul_comm, div_comm]
        rw [← mul_div_assoc, mul_div_mul_left, ← Real.cot_eq_cos_div_sin]
        rw [Real.sin_two_mul (x / 2), Real.cos_two_mul (x / 2)]
        have : 2 * (k * x + Real.pi / 2) = 2 * k * x + Real.pi := by ring
        rw [this]
        have : x ≠ 0 := by
          contrapose! Real.pi_eq_zero
          linarith [Real.pi_pos]
        field_simp
        ring
      assumption
    assumption

  -- By h_sum_sin, we have $\sum_{k=1}^{35} \sin 5k = \sum_{k=0}^{34} \sin (5k) = {1 \over 2} \cot {5 \over 2(35)} = {1 \over 2} \cot 5^{\circ}$
  have sum_sin_eq : Real.tan (m * Real.pi / 180) = (1 / 2) * Real.cot (5 * Real.pi / 180) := by
    rw [h_sum_sin]
    push_cast
    rw [div_div, mul_div, div_div, div_eq_mul_inv]
    ring_nf
    nth_rw 1 [mul_comm]
    rw [inv_mul_cancel₀]
    ring
    linarith [Real.pi_pos]

  -- Since $\sum_{k=1}^{35} \sin 5k = \tan {m \over n} $, we have $\tan {m \over n} = {1 \over 2} \cot 5^{\circ}$
  rw [sum_sin_eq] at h₁
  -- Since ${1 \over 2} \cot 5^{\circ} = \tan 35^{\circ} $, we have $\tan {m \over n} = \tan 35^{\circ} $
  have h₁ : Real.tan (m * Real.pi / 180) = Real.tan (35 * Real.pi / 180) := by
    rw [h₁]
    have : Real.tan (5 * Real.pi / 180) = Real.tan (35 * Real.pi / 180) := by
      have : 5 * Real.pi / 180 = (35 * Real.pi / 180) - Real.pi := by ring
      rw [this, Real.tan_sub_pi]
    rw [this]
    ring_nf

  -- Since $\tan$ is injective on $(-\pi / 2, \pi / 2)$, and $-\pi / 2 < {m \over n} < \pi / 2$, and $-\pi / 2 < 35 \pi / 180 < \pi / 2$, we have either ${m \over n} = 35 \pi / 180$ or ${m \over n} = 35 \pi / 180 + k \pi$ for some $k \in \mathbb{Z}$
  have h₁ : m * Real.pi / 180 = 35 * Real.pi / 180 + ↑k * Real.pi := by
    rw [Real.tan_eq_tan_iff] at h₁
    exact h₁
    all_goals {
      apply Real.pi_pos.mp
      linarith only [Real.pi_pos]
    }

  -- Since $m$ and $n$ are relatively prime, and $35 \pi / 180 = 35 \pi / (180) = \pi / (180) (35)$, we have either $k = 35$ or $k = -1$
  have h_k : k = 35 ∨ k = -1 := by
    have : m = (180 : ℤ) := by
      apply Int.eq_of_mul_eq_mul_right (n := 35)?_ h₁
      norm_cast
      apply mul_right_cancel₀ (by linarith only [Real.pi_pos])
    rw [this] at h₁
    ring_nf at h₁
    rw [show (180 : ℝ) = (180 : ℤ) by norm_num] at h₁
    rw [show m * π / 180 = m * π / (180 : ℤ) by norm_cast] at h₁
    rw [show 35 * π / 180 = (35 : ℤ) * π / (180 : ℤ) by norm_num] at h₁
    rw [Int.mul_emultiplicative_iff] at h₁
    exact h₁
    -- verify that 180 and 35 are coprime
    norm_num

  -- Since $m = 180$ and $n = 180$, $\frac mn = 1$, we have $\frac mn = 1 < 90$, satisfy the condition $\frac mn < 90$
  -- Since $m = 180$ and $n = 180$, we have $m + n = 360$
  rcases h_k with h_k | h_k
  · have h_m : m = 35 := by
      rw [h_k] at h₁
      ring_nf at h₁
      rw [show Real.pi * (180 : ℤ) = Real.pi * 180 from (by ring : Real.pi * (180 : ℤ) = Real.pi * 180)] at h₁
      nth_rw 2 [← mul_one (Real.pi)] at h₁
      rw [← mul_assoc] at h₁
      simp [Real.pi_ne_zero] at h₁
      linarith only [h₁]
    have h_m : m = 180 := by
      rw [h_k] at this
      ring_nf at this
      exact this
    linarith [h_m, h_m]
  · have h_m : m = -35 := by
      rw [h_k] at h₁
      ring_nf at h₁
      rw [show Real.pi * (180 : ℤ) = Real.pi * 180 from (by ring : Real.pi * (180 : ℤ) = Real.pi * 180)] at h₁
      nth_rw 2 [← mul_one (Real.pi)] at h₁
      rw [← mul_assoc] at h₁
      simp [Real.pi_ne_zero] at h₁
      linarith only [h₁]
    have h_m : m = 145 := by
      rw [h_k] at this
      ring_nf at this
      exact this
    have : m.num = 29 := by
      rw [h_m]
      exact rfl
    have : m.den = 180 := by
      rw [h_m]
      exact rfl
    linarith [this, ‹m.num = 29›]

```