have h₅ : x ^ 4 - 5 * x ^ 2 + 6 = 0 := by
    calc
      x ^ 4 - 5 * x ^ 2 + 6 = f x - g x := by rw [h₀, h₁]; ring
      _ = 0 := by rw [h₂]; ring

  have h₆ : y ^ 4 - 5 * y ^ 2 + 6 = 0 := by
    calc
      y ^ 4 - 5 * y ^ 2 + 6 = f y - g y := by rw [h₀, h₁]; ring
      _ = 0 := by rw [h₃]; ring

  have h₇ : (x ^ 2 - 2) * (x ^ 2 - 3) = 0 := by
    calc
      (x ^ 2 - 2) * (x ^ 2 - 3) = x ^ 4 - 5 * x ^ 2 + 6 := by ring
      _ = 0 := by exact h₅

  have h₈ : (y ^ 2 - 2) * (y ^ 2 - 3) = 0 := by
    calc
      (y ^ 2 - 2) * (y ^ 2 - 3) = y ^ 4 - 5 * y ^ 2 + 6 := by ring
      _ = 0 := by exact h₆

  have h₉ : x ^ 2 - 2 = 0 ∨ x ^ 2 - 3 = 0 := by exact mul_eq_zero.mp h₇

  have h₁₀ : y ^ 2 - 2 = 0 ∨ y ^ 2 - 3 = 0 := by exact mul_eq_zero.mp h₈

  rcases h₉ with h₉ | h₉
  · -- $x^2-2=0$
    have h₁₁ : x ^ 2 = 2 := by linarith
    have h₁₂ : x ^ 2 < y ^ 2 := h₄
    have h₁₃ : 2 < y ^ 2 := by rw [← h₁₁]; exact h₁₂
    have h₁₄ : y ^ 2 - 2 ≠ 0 := by
      by_contra! h₁₄
      have : y ^ 2 = 2 := by linarith
      have : y ^ 2 = x ^ 2 := by rw [← h₁₁, this]
      have : y = x ∨ y = -x := sq_eq_sq_iff_eq_or_eq_neg.mp this
      rcases this with this | this
      · rw [this] at h₃; simp [h₀, h₁] at h₃
      · rw [this] at h₃; simp [h₀, h₁] at h₃
    have h₁₅ : y ^ 2 - 3 = 0 := by
      calc
        y ^ 2 - 3 = y ^ 2 - 2 - 1 := by ring
        _ = 0 - 1 := by rw [h₁₄]
        _ = -1 := by ring
        _ ≠ 0 := by norm_num
    have h₁₆ : y ^ 2 = 3 := by linarith
    have h₁₇ : m = 3 := by
      have h₁₇ : x ^ 2 < y ^ 2 := h₄
      have h₁₈ : y ^ 2 = 3 := by linarith
      have h₁₉ : x ^ 2 < 3 := by rw [h₁₈] at h₁₇; exact h₁₇
      have h₂₀ : y ^ 2 - x ^ 2 = 3 - (3 - y ^ 2) := by
        ring_nf
        rw [← h₁₈]
        ring
      have h₂₁ : x ^ 2 = 3 - y ^ 2 := by linarith
      have : 3 - y ^ 2 < 3 := by
        have : 3 - y ^ 2 < 3 - x ^ 2 := by exact sub_lt_sub_left h₁₉ h₁₁
        linarith
      linarith
    have h₁₈ : n = 2 := by
      have h₁₈ : x ^ 2 < y ^ 2 := h₄
      have h₁₉ : x ^ 2 = 2 := by linarith
      have h₂₀ : 2 < y ^ 2 := by rw [← h₁₉]; exact h₁₈
      have h₂₁ : y ^ 2 - x ^ 2 = y ^ 2 - (y ^ 2 - 2) := by
        ring_nf
        rw [← h₁₉]
        ring
      have h₂₂ : y ^ 2 - (y ^ 2 - 2) = 2 := by linarith
      rw [h₂₁, h₂₂]
    rw [h₁₇, h₁₈]
    norm_num

  · -- $x^2-3=0$
    have h₁₁ : x ^ 2 = 3 := by linarith
    have h₁₂ : x ^ 2 < y ^ 2 := h₄
    have h₁₃ : 3 < y ^ 2 := by rw [← h₁₁]; exact h₁₂
    have h₁₄ : y ^ 2 - 3 ≠ 0 := by
      by_contra! h₁₄
      have : y ^ 2 = 3 := by linarith
      have : y ^ 2 = x ^ 2 := by rw [← h₁₁, this]
      have : y = x ∨ y = -x := sq_eq_sq_iff_eq_or_eq_neg.mp this
      rcases this with this | this
      · rw [this] at h₃; simp [h₀, h₁] at h₃
      · rw [this] at h₃; simp [h₀, h₁] at h₃
    have h₁₅ : y ^ 2 - 2 = 0 := by
      calc
        y ^ 2 - 2 = y ^ 2 - 3 + 1 := by ring
        _ = 0 + 1 := by rw [h₁₄]
        _ = 1 := by ring
        _ ≠ 0 := by norm_num
    have h₁₆ : y ^ 2 = 2 := by linarith
    have h₁₇ : m = 2 := by
      have h₁₇ : x ^ 2 < y ^ 2 := h₄
      have h₁₈ : y ^ 2 = 2 := by linarith
      have h₁₉ : x ^ 2 < 2 := by rw [h₁₈] at h₁₇; exact h₁₇
      have h₂₀ : y ^ 2 - x ^ 2 = 2 - (2 - x ^ 2) := by
        ring_nf
        rw [← h₁₈]
        ring
      have h₂₁ : y ^ 2 - x ^ 2 = 2 - (2 - x ^ 2) := by ring_nf; rw [← h₁₈]; ring
      have h₂₂ : 2 - x ^ 2 < 2 := by
        have : 2 - x ^ 2 < 2 - y ^ 2 := by exact sub_lt_sub_left h₁₉ h₁₁
        linarith
      have h₂₃ : 2 - x ^ 2 = 0 := by
        by_contra! h₂₃
        have : 0 < 2 - x ^ 2 := by rw [← h₂₃]; exact h₂₂
        have h₂₄ : 0 < 2 := by norm_num
        have h₂₅ : 0 < (2 - x ^ 2) * 2 := by positivity
        have h₂₆ : (2 - x ^ 2) * 2 = 4 - 2 * x ^ 2 := by ring
        rw [h₂₆] at h₂₅
        have h₂₇ : 4 - 2 * x ^ 2 < 4 := by
          have : 4 - 2 * x ^ 2 < 4 - 2 * y ^ 2 := by exact sub_lt_sub_left h₁₉ h₁₁
          linarith
        have h₂₈ : 4 - 2 * x ^ 2 ≠ 0 := by
          by_contra! h₂₈
          have : 4 - 2 * x ^ 2 = 0 := by linarith
          have : 2 - x ^ 2 = 0 := by linarith
          rw [this] at h₂₃
          contradiction
        have h₂₉ : 4 - 2 * x ^ 2 > 0 := by linarith
        have h₃₀ : 2 * x ^ 2 < 2 := by
          have : 2 * x ^ 2 < 2 * y ^ 2 := by exact mul_lt_mul_of_pos_left h₁₉ h₂₈
          linarith
        have h₃₁ : 2 * x ^ 2 ≠ 2 := by
          by_contra! h₃₁
          have : 2 * x ^ 2 = 2 := by linarith
          have : x ^ 2 = 1 := by linarith
          have h₃₂ : 1 < y ^ 2 := by rw [← this]; exact h₁₃
          have h₃₃ : 1 < 1 + (y ^ 2 - 1) := by linarith
          have h₃₄ : y ^ 2 - 1 = (y - 1) * (y + 1) := by ring
          rw [h₃₄] at h₃₃
          have h₃₅ : 1 < y - 1 := by
            by_contra! h₃₅
            have : 1 - (y - 1) < 1 := by linarith
            have h₃₆ : 1 - (y - 1) = 2 - y := by ring
            rw [h₃₆] at this
            have h₃₇ : 2 - y < 0 := by linarith
            have h₃₈ : y > 2 := by linarith
            have h₃₉ : y ^ 2 > 4 := by nlinarith
            have h₄₀ : 2 * x ^ 2 < 4 := by linarith
            linarith
          have h₃₆ : y + 1 > 0 := by linarith
          have h₃₇ : y - 1 > 0 := by linarith
          have h₃₈ : y + 1 > y - 1 := by linarith
          have h₃₉ : (y + 1) * (y - 1) > 0 := by positivity
          linarith
        have h₃₂ : 2 * x ^ 2 = 2 := by linarith
        linarith
      have h₃₃ : x ^ 2 = 2 := by linarith
      have h₃₄ : x ^ 2 = y ^ 2 := by rw [h₃₃, h₁₆]
      have h₃₅ : x = y ∨ x = -y := sq_eq_sq_iff_eq_or_eq_neg.mp h₃₄
      rcases h₃₅ with h₃₅ | h₃₅
      · rw [h₃₅] at h₃; simp [h₀, h₁] at h₃
      · rw [h₃₅] at h₃; simp [h₀, h₁] at h₃
    have h₁₈ : n = 3 := by
      have h₁₈ : x ^ 2 < y ^ 2 := h₄
      have h₁₉ : x ^ 2 = 3 := by linarith
      have h₂₀ : 3 < y ^ 2 := by rw [← h₁₉]; exact h₁₃
      have h₂₁ : y ^ 2 - x ^ 2 = y ^ 2 - (y ^ 2 - 3) := by
        ring_nf
        rw [← h₁₉]
        ring
      have h₂₂ : y ^ 2 - (y ^ 2 - 3) = 3 := by linarith
      rw [h₂₁, h₂₂]
    rw [h₁₇, h₁₈]
    norm_num

```