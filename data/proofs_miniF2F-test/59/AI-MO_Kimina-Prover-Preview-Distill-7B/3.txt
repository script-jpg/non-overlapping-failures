-- We have $$(x^2+1)(y^2-30)=517-30=487.$$ So $x^2+1$ divides 487. But 487 is a prime number. So $x^2+1=1$ or $x^2+1=487$. The first equation has no solution. The second equation has solution $x= \pm 22$. So $3x^2 y^2 = 3 \times 484 \times 49 = \boxed{588}.$
  have h₁ : (x ^ 2 + 1) * (y ^ 2 - 30) = 487 := by
    ring_nf
    linarith
  have h₂ : x ^ 2 + 1 ≠ 1 := by
    nlinarith
  have h₃ : x ^ 2 + 1 = 487 := by
    have h₃ : x ^ 2 + 1 ∣ 487 := by
      rw [<-h₁]
      apply dvd_mul_right
    have h₄ : x ^ 2 + 1 ≤ 487 := by
      exact Int.le_of_dvd (by norm_num) h₃
    by_contra!
    interval_cases x
    all_goals tauto
  have h₄ : x ^ 2 = 484 := by
    linarith
  have h₅ : y ^ 2 = 49 := by
    rw [h₃] at h₁
    linarith
  nlinarith
```