have h₁ : ∀ k : ℕ, k ∈ Finset.Icc 1 n → (1 : ℝ) + 1 / 2 ^ k ≤ 2 := by
    intro k hk
    have hk' : k ≥ 1 := by
      simp only [Finset.mem_Icc] at hk
      linarith
    have hk'' : (2 : ℝ) ^ k ≥ 1 := by
      apply one_le_pow_of_one_le
      norm_num
    rw [add_comm]
    apply le_of_sub_nonneg
    field_simp
    rw [le_div_iff (by positivity)]
    nlinarith
  
  have h₂ : (∏ k in Finset.Icc 1 n, 1 + (1 : ℝ) / 2 ^ k) ≤ 2 ^ n := by
    calc
      (∏ k in Finset.Icc 1 n, 1 + (1 : ℝ) / 2 ^ k) ≤ ∏ k in Finset.Icc 1 n, 2 := Finset.prod_le_prod (fun k _ => by
        have : (1 : ℝ) + 1 / 2 ^ k > 0 := by positivity
        positivity) fun k hk => by
        simpa using h₁ k hk
      _ = 2 ^ n := by simp [Finset.prod_const, Finset.card_range]
  have h₃ : (2 : ℝ) ^ n < 5 / 2 := by
    have h₄ : n ≥ 1 := by linarith
    have h₅ : (2 : ℝ) ^ n ≥ 2 ^ 1 := by
      exact pow_le_pow_right (by norm_num) (by linarith)
    norm_num at h₅ ⊢
    nlinarith [pow_one (2 : ℝ)]
  calc
    (∏ k in Finset.Icc 1 n, 1 + (1 : ℝ) / 2 ^ k) ≤ 2 ^ n := by
      apply h₂
    _ < 5 / 2 := by
      apply h₃
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption
  <;> assumption