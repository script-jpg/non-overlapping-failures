have h₁ : ∀ k : ℕ, k ∈ Finset.Icc 1 n → (1 : ℝ) + 1 / 2 ^ k ≤ 2 := by
    intro k hk
    have h₂ : k ≥ 1 := by exact (Finset.mem_Icc.mp hk).1
    have h₃ : (2 : ℝ) ^ k ≥ 2 ^ 1 := by exact pow_le_pow_right (by norm_num) (by linarith)
    have h₄ : (1 : ℝ) / 2 ^ k ≤ 1 / 2 ^ 1 := by exact div_le_div_of_le_left (by positivity) (by positivity) h₃
    norm_num at h₄ ⊢
    linarith
  calc
    (∏ k in Finset.Icc 1 n, 1 + (1 : ℝ) / 2 ^ k) ≤ ∏ k in Finset.Icc 1 n, 2 := by
      apply Finset.prod_le_prod
      · intro i hi
        positivity
      · intro i hi
        exact h₁ i hi
    _ = 2 ^ n := by
      simp [Finset.prod_const]
    _ < 5 / 2 := by
      norm_num
      have h₅ : (2 : ℝ) ^ n < 5 / 2 := by
        have h₆ : n ≥ 1 := by omega
        have h₇ : (2 : ℝ) ^ n ≥ 2 ^ 1 := by
          exact pow_le_pow_right (by norm_num) (by linarith)
        norm_num at h₇ ⊢
        have h₈ : (2 : ℝ) ^ n < 5 / 2 := by
          have h₉ : n < 3 := by
            by_contra! h₉
            have h₁₀ : (2 : ℝ) ^ n ≥ 2 ^ 3 := by
              exact pow_le_pow_right (by norm_num) (by linarith)
            norm_num at h₁₀ ⊢
            linarith
          interval_cases n <;> norm_num at h₇ ⊢ <;> nlinarith
        exact h₈
      exact h₅
  <;> norm_num
  <;> linarith
```