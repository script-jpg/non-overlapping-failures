-- Fact 1 : $\sum_{k=1}^{n} 1/k^2 < 5/2$.
  have h1 : ∑ k ∈ Finset.Icc 1 n, (1 : ℝ) / k ^ 2 < 5 / 2 := by
    have h1 : ∀ k ∈ Finset.Icc 1 n, 1 / k ^ 2 ≤ 1 / k (1 : ℝ) := by
      intro k hk
      simp at hk
      rw [div_le_div_iff₀ (by positivity) (by positivity)]
      exact pow_le_pow_right one_le hk.1 (by simp)
    have h2 : ∀ k ∈ Finset.Icc 1 n, 1 / k (1 : ℝ) ≤ 1 / 1 := by
      intro k hk
      simp at hk
      exact le_one_div_one 1 hk.1
    have h3 := Finset.sum_le_sum_of_nonneg_of_le Finset.Icc 1 n
      (fun k _ => one_le k) h1 h2
    simp at h3
    have h4 : 1 + 1 / 1 + ∑ k ∈ Finset.Icc 2 n, 1 / k ^ 2 = 5 / 2 := by
      norm_num
      rw [← Finset.sum_Icc_succ_top, ← Finset.sum_Icc_succ_top]
      norm_num
    linarith

  -- Transform Fact 1 into an inequality about $\prod_{k=1}^{n} (1 + 1/2^k)$.
  have h2 : (∏ k ∈ Finset.Icc 1 n, (1 : ℝ) / 2 ^ k) < 1 / 2 := by
    have h2 : ∏ k ∈ Finset.Icc 1 n, (1 : ℝ) / 2 ^ k = ∏ k ∈ Finset.Icc 1 n, (1 : ℝ) / 2 ^ k * ∏ k ∈ Finset.Icc 1 n, (1 : ℝ) / 2 ^ k⁻¹ := by
      rw [Finset.prod_mul_distrib]
      apply Finset.prod_congr rfl
      intro k hk
      simp at hk
      rw [Real.mul_inv_cancel (by positivity)]
    rw [h2]
    have h3 : ∀ k ∈ Finset.Icc 1 n, 1 / 2 ^ k * (1 / 2 ^ k)⁻¹ = 1 := by
      intro k hk
      simp at hk
      exact Real.mul_inv_cancel (by positivity)
    have h4 : ∏ k ∈ Finset.Icc 1 n, 1 = 1 := by
      apply Finset.prod_const
      simp
    rw [h4]
    have h5 : ∏ k ∈ Finset.Icc 1 n, (1 : ℝ) / 2 ^ k * ∏ k ∈ Finset.Icc 1 n, (1 : ℝ) / 2 ^ k⁻¹ < 1 / 2 * 1 := by
      have h5 : ∀ k ∈ Finset.Icc 1 n, (1 : ℝ) / 2 ^ k * (1 / 2 ^ k)⁻¹ < 1 := by
        intro k hk
        simp at hk
        rw [div_inv_eq_mul]
        exact pow_two_pos_of_ne_zero (by simp)
      exact Finset.prod_lt_prod_of_nonneg_of_lt Finset.Icc 1 n
        (fun k _ => zero_le_one) h5
    linarith

  -- Multiply both sides by $\prod_{k=1}^{n} (1 + 1/2^k)$ to get Fact 2.
  have h3 : 1 + ∏ k ∈ Finset.Icc 1 n, (1 : ℝ) / 2 ^ k < 5 / 2 := by
    have h3 : 1 + ∏ k ∈ Finset.Icc 1 n, (1 : ℝ) / 2 ^ k = 1 + ∏ k ∈ Finset.Icc 1 n, (1 : ℝ) / 2 ^ k * ∏ k ∈ Finset.Icc 1 n, (1 : ℝ) / 2 ^ k⁻¹ := by
      rw [Finset.prod_mul_distrib]
      apply Finset.prod_congr rfl
      intro k hk
      simp at hk
      rw [Real.mul_inv_cancel (by positivity)]
    rw [h3]
    have h4 : ∀ k ∈ Finset.Icc 1 n, 1 / 2 ^ k * (1 / 2 ^ k)⁻¹ = 1 := by
      intro k hk
      simp at hk
      exact Real.mul_inv_cancel (by positivity)
    have h5 : ∏ k ∈ Finset.Icc 1 n, 1 / 2 ^ k * ∏ k ∈ Finset.Icc 1 n, (1 : ℝ) / 2 ^ k⁻¹ = ∏ k ∈ Finset.Icc 1 n, (1 : ℝ) / 2 ^ k := by
      rw [Finset.prod_mul_distrib]
      apply Finset.prod_congr rfl
      intro k hk
      simp at hk
      rw [mul_comm, Real.mul_inv_cancel (by positivity)]
    rw [h5]
    linarith

  -- Multiply both sides by $\prod_{k=1}^{n} (1 + 1/2^k)$ to get the final result.
  have h4 : (∏ k ∈ Finset.Icc 1 n, (1 : ℝ) / 2 ^ k) * (1 + ∏ k ∈ Finset.Icc 1 n, (1 : ℝ) / 2 ^ k) < 1 / 2 * 5 / 2 := by
    have h4 : (∏ k ∈ Finset.Icc 1 n, (1 : ℝ) / 2 ^ k) * (1 + ∏ k ∈ Finset.Icc 1 n, (1 : ℝ) / 2 ^ k) < (∏ k ∈ Finset.Icc 1 n, (1 : ℝ) / 2 ^ k) * (5 / 2) := by
      apply mul_lt_mul_of_pos_left h3
      positivity
    linarith

  have h5 : (∏ k ∈ Finset.Icc 1 n, (1 : ℝ) / 2 ^ k) * (1 + ∏ k ∈ Finset.Icc 1 n, (1 : ℝ) / 2 ^ k) = (∏ k ∈ Finset.Icc 1 n, (1 : ℝ) / 2 ^ k) * 1 + (∏ k ∈ Finset.Icc 1 n, (1 : ℝ) / 2 ^ k) * ∏ k ∈ Finset.Icc 1 n, (1 : ℝ) / 2 ^ k := by
    ring
  rw [h5] at h4
  have h6 : 1 + (∏ k ∈ Finset.Icc 1 n, (1 : ℝ) / 2 ^ k) = 1 + ∏ k ∈ Finset.Icc 1 n, (1 : ℝ) / 2 ^ k := by
    ring
  linarith
```