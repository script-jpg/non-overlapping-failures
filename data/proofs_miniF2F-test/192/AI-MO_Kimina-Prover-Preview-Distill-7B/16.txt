-- The first three terms of an arithmetic sequence are $2x - 3$, $5x - 11$, and $3x + 1$ respectively.
  -- The $n$th term of the sequence is $2009$. What is $n$?

  -- We need to show that it is 502.

  -- Let's compute the common difference $d$ of the arithmetic sequence:
  have hd : a (0 + 1) - a 0 = a (0 + 2) - a (0 + 1) := h₁ 0
  simp at hd
  rw [h₂, h₃, h₄] at hd
  -- $5x - 11 - (2x - 3) = 3x + 1 - (5x - 11)$
  -- $3x - 8 = -2x + 12$
  -- $5x = 20$
 --  $x = 4$
  have hx : x = 4 := by linarith

  -- Then the first term $a_0 = 2x - 3 = 5$
  have h₂ : a 1 = 5 := by
    rw [h₂, hx]
    norm_num

  -- and the common difference $d = a_2 - a_1 = 9 - 5 = 4$
  have hd : a (1 + 1) - a 1 = a (1 + 2) - a (1 + 1) := h₁ 1
  simp at hd
  rw [h₃, h₂, h₄] at hd
  have hd := subtract_eq_of_eq_add' hd
  rw [hd]
  norm_num

  -- The $n$th term is $a_n = a_0 + n \cdot d = 5 + 4n = 2009$
  -- $4n = 2009 - 5 = 2004$
  -- $n = 501$
  have a_n : ∀ n, a (n + 1) = 4 * (n + 1) + 1 := by
    intro n
    induction n with
    | zero =>
      rw [h₂]
      norm_num
    | succ n ih =>
      rw [h₁]
      rw [ih]
      rw [hd]
      ring_nf

  rw [a_n] at h₅
  have : (n + 1) = 502 := by linarith
  rw [← this]
  norm_num
```