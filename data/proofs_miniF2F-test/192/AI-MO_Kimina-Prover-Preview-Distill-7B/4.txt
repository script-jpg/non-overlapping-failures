-- The first three terms of an arithmetic sequence are $2x - 3$, $5x - 11$, and $3x + 1$ respectively.
  -- The common difference is $5x - 11 - (2x - 3) = 3x - 8$.
  have common_diff : a 2 - a 1 = 3 * x - 8 := by
    rw [h₂, h₃]
    ring

  -- The common difference is also $3x + 1 - (5x - 11) = -2x + 12$.
  have common_diff' : a 3 - a 2 = -2 * x + 12 := by
    rw [h₃, h₄]
    ring

  -- This implies $3x - 8 = -2x + 12$.
  have h₅ : 3 * x - 8 = -2 * x + 12 := by
    linarith [h₁ 1, common_diff, common_diff']

  -- This has solution $x = 4$.
  have hx : x = 4 := by linarith

  -- Substituting, the first term is $2 \cdot 4 - 3 = 5$.
  have a1_eq : a 1 = 5 := by
    rw [h₂, hx]
    norm_num

  -- The common difference is $3 \cdot 4 - 8 = 4$.
  have common_diff_eq : a (n + 1) - a n = 4 := by
    rw [h₁ 1, common_diff, hx]
    norm_num

  -- The $n$th term is $2009 = 5 + (n - 1) \cdot 4$.
  have h₆ : ∀ m, a (m + 1) = a m + 4 := by
    intro m
    specialize common_diff_eq m
    linarith

  have h₇ : ∀ m, a (m + 1) = 4 * (m + 1) + 1 := by
    intro m
    induction m with
    | zero =>
      simp
      linarith [a1_eq]
    | succ m ih =>
      rw [h₆ m, ih]
      ring

  have h₈ : 4 * n + 1 = 2009 := by
    specialize h₇ (n - 1)
    rw [Nat.sub_add_cancel (by linarith)] at h₇
    linarith [h₅, h₇]

  -- Therefore, $n = 502$.
  linarith
```