-- The first three terms of an arithmetic sequence are $2x - 3$, $5x - 11$, and $3x + 1$ respectively.
  -- The $n$th term of the sequence is $2009$. What is $n$?

  -- 1. From the definition of an arithmetic sequence, we have that the difference between consecutive terms is constant.
  -- Thus, $a_2 - a_1 = a_3 - a_2$.
  have h : a 2 - a 1 = a 3 - a 2 := by
    specialize h₁ 1
    norm_num at h₁
    linarith

  -- 2. Substitute the given terms into the equation.
  -- $5x - 11 - (2x - 3) = 3x + 1 - (5x - 11)$
  rw [h₂, h₃, h₄] at h

  -- 3. Simplify the equation to find the value of $x$.
  -- $5x - 11 - 2x + 3 = 3x + 1 - 5x + 11$
  -- $3x - 8 = -2x + 12$
  -- $3x + 2x = 12 + 8$
  -- $5x = 20$
  -- $x = 4$
  have hx : x = 4 := by linarith

  -- 4. Now that we know $x = 4$, we can find the first term and the common difference.
  -- $a_1 = 2(4) - 3 = 8 - 3 = 5$
  have ha₁ : a 1 = 5 := by
    rw [h₂, hx]
    linarith

  -- $a_2 - a_1 = (5(4) - 11) - (2(4) - 3) = (20 - 11) - (8 - 3) = 9 - 5 = 4$
  have hd : 5 * x - 11 - (2 * x - 3) = 4 := by
    rw [hx]
    linarith

  -- 5. The $n$th term of an arithmetic sequence is given by $a_n = a_1 + (n - 1) \cdot d$ where $d$ is the common difference.
  -- Here, $a_1 = 5$ and $d = 4$.
  have h₆ : ∀ m, a (m + 1) = a 1 + m * hd := by
    intro m
    induction m with
    | zero =>
      simp
    | succ m ih =>
      rw [show (m + 1) + 1 = m + 2 by ring, h₃, h₂, ih]
      linarith

  -- 6. We are given that $a_n = 2009$.
  -- So, $2009 = 5 + (n - 1) \cdot 4$.
  rw [h₅, ha₁, h₆ (n - 1), show n - 1 = (n : ℝ) - 1 by norm_cast] at h₅

  -- 7. Solve for $n$.
  -- $2009 = 5 + (n - 1) \cdot 4$
  -- $2009 - 5 = (n - 1) \cdot 4$
  -- $2004 = (n - 1) \cdot 4$
  -- $n - 1 = \frac{2004}{4} = 501$
  -- $n = 501 + 1 = 502$
  have hn : (n : ℝ) = 502 := by linarith

  -- 8. Since $n$ is a natural number, we conclude that $n = 502$.
  exact Nat.cast_inj.mp hn
```