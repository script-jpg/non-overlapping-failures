-- The difference of the first two terms is $5x - 11 - (2x - 3) = 3x - 8$.
  have h₁ (x : ℝ) : a 2 - a 1 = 3 * x - 8 := by
    rw [h₂, h₃]
    ring
  -- The difference of the second and third terms is $(3x + 1) - (5x - 11) = -2x + 12$.
  have h₂ (x : ℝ) : a 3 - a 2 = -2 * x + 12 := by
    rw [h₃, h₄]
    ring
  -- The two differences are equal, so $3x - 8 = -2x + 12$.
  have h₃ : 3 * x - 8 = -2 * x + 12 := by
    linarith only [h₁ x, h₂ x, h₃, h₄]
  -- This implies $x = 4$.
  have h₄ : x = 4 := by
    linarith only [h₃]
  -- The first three terms are therefore $5$, $9$, $13$.
  -- The $n$th term is $2009 = 5 + (n - 1) \cdot 4$.
  -- Therefore $n = 502$.
  have h₅ (n : ℕ) : a n = 5 + (n - 1) * 4 := by
    induction n using Nat induction
    · rw [h₂, h₄]
      norm_num
    · rename_i m hm
      rw [h₁ (m + 1), hm, h₄]
      ring
  have h₆ : 5 + (n - 1) * 4 = 2009 := by
    rw [h₅ n] at h₅
    exact h₅
  have h₇ : (n : ℝ) = 502 := by
    linarith only [h₆]
  exact Nat.cast_inj.mp h₇

```