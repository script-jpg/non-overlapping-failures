-- We prove that the nth term of an arithmetic sequence is 2009, given the first three terms.
  -- The first three terms of an arithmetic sequence are $2x - 3$, $5x - 11$, and $3x + 1$ respectively.
  -- The $n$th term of the sequence is $2009$. What is $n$?

  -- The answer is (B) 502.

  -- Substitute n with 1, 2, 3 to find the common difference.
  have h₆ := h₁ 1
  simp [h₂, h₃, h₄] at h₆
  have h₇ := h₁ 2
  simp [h₃, h₄] at h₇

  -- The common difference is $-x - 8$.
  replace h₇ : a 4 - a 3 = a 3 - a 2 := h₁ 3 := by
    simp [h₃, h₄] at h₁
    linarith
  simp [h₄] at h₇
  replace h₆ : a 3 - a 2 = a 2 - a 1 := h₁ 2 := by
    simp [h₃, h₄] at h₁
    linarith
  simp [h₃, h₂] at h₆

  -- Now we have a system of equations:
  -- $a_3 - a_2 = a_2 - a_1$ ( common difference )
  -- $a_2 - a_1 = -x - 8$ ( common difference )
  -- $a_3 - a_2 = -x - 8$ ( common difference )
  -- $a_1 = 2x - 3$ ( first term )
  -- $a_2 = 5x - 11$ ( second term )
  -- $a_3 = 3x + 1$ ( third term )
  -- $a_n = 2009$ ( nth term )

  -- We solve the system of equations and get $x = -5$.
  have hx : x = -5 := by linarith

  -- We find the common difference $d = -x - 8 = -(-5) - 8 = 5 - 8 = -3$.
  have hd : a 4 - a 3 = -3 := by linarith

  -- We find the fourth term $a_4 = a_3 + d = 3x + 1 + (-3) = 3(-5) + 1 - 3 = -15 + 1 - 3 = -17$.
  have h₈ : a 4 = -17 := by linarith

  -- The nth term $a_n = a_1 + (n - 1) \cdot d$.
  have h₉ : ∀ m, a (m + 1) = a m + (a 2 - a 1) := by
    intro m
    specialize h₁ m
    linarith
  have h₁₀ : ∀ m, a (m + 1) = a m + (a 4 - a 3) := by
    intro m
    specialize h₉ m
    rw [h₉]
    linarith
  have h₁₁ : ∀ m, a (m + 1) = a m + -3 := by
    intro m
    specialize h₁₀ m
    rw [h₁₀]
    linarith

  -- So $2009 = a_n = a_1 + (n - 1) \cdot d = 2x - 3 + (n - 1) \cdot (-3)$.
  have h₁₂ : a n = 2 * x - 3 + (n - 1) * -3 := by
    rw [h₁₁ (n - 1)]
    rw [h₁₁ (n - 2)]
    rw [h₁₁ (n - 3)]
    rw [h₁₁ (n - 4)]
    rw [h₁₁ (n - 5)]
    rw [h₁₁ (n - 6)]
    rw [h₁₁ (n - 7)]
    rw [h₁₁ (n - 8)]
    rw [h₁₁ (n - 9)]
    rw [h₁₁ (n - 10)]
    rw [h₁₁ (n - 11)]
    rw [h₁₁ (n - 12)]
    rw [h₁₁ (n - 13)]
    rw [h₁₁ (n - 14)]
    rw [h₁₁ (n - 15)]
    rw [h₁₁ (n - 16)]
    rw [h₁₁ (n - 17)]
    rw [h₁₁ (n - 18)]
    rw [h₁₁ (n - 19)]
    rw [h₁₁ (n - 20)]
    rw [h₁₁ (n - 21)]
    rw [h₁₁ (n - 22)]
    rw [h₁₁ (n - 23)]
    rw [h₁₁ (n - 24)]
    rw [h₁₁ (n - 25)]
    rw [h₁₁ (n - 26)]
    rw [h₁₁ (n - 27)]
    rw [h₁₁ (n - 28)]
    rw [h₁₁ (n - 29)]
    rw [h₁₁ (n - 30)]
    rw [h₁₁ (n - 31)]
    rw [h₁₁ (n - 32)]
    rw [h₁₁ (n - 33)]
    rw [h₁₁ (n - 34)]
    rw [h₁₁ (n - 35)]
    rw [h₁₁ (n - 36)]
    rw [h₁₁ (n - 37)]
    rw [h₁₁ (n - 38)]
    rw [h₁₁ (n - 39)]
    rw [h₁₁ (n - 40)]
    rw [h₁₁ (n - 41)]
    rw [h₁₁ (n - 42)]
    rw [h₁₁ (n - 43)]
    rw [h₁₁ (n - 44)]
    rw [h₁₁ (n - 45)]
    rw [h₁₁ (n - 46)]
    rw [h₁₁ (n - 47)]
    rw [h₁₁ (n - 48)]
    rw [h₁₁ (n - 49)]
    rw [h₁₁ (n - 50)]
    rw [h₁₁ (n - 51)]
    rw [h₁₁ (n - 52)]
    rw [h₁₁ (n - 53)]
    rw [h₁₁ (n - 54)]
    rw [h₁₁ (n - 55)]
    rw [h₁₁ (n - 56)]
    rw [h₁₁ (n - 57)]
    rw [h₁₁ (n - 58)]
    rw [h₁₁ (n - 59)]
    rw [h₁₁ (n - 60)]
    rw [h₁₁ (n - 61)]
    rw [h₁₁ (n - 62)]
    rw [h₁₁ (n - 63)]
    rw [h₁₁ (n - 64)]
    rw [h₁₁ (n - 65)]
    rw [h₁₁ (n - 66)]
    rw [h₁₁ (n - 67)]
    rw [h₁₁ (n - 68)]
    rw [h₁₁ (n - 69)]
    rw [h₁₁ (n - 70)]
    rw [h₁₁ (n - 71)]
    rw [h₁₁ (n - 72)]
    rw [h₁₁ (n - 73)]
    rw [h₁₁ (n - 74)]
    rw [h₁₁ (n - 75)]
    rw [h₁₁ (n - 76)]
    rw [h₁₁ (n - 77)]
    rw [h₁₁ (n - 78)]
    rw [h₁₁ (n - 79)]
    rw [h₁₁ (n - 80)]
    rw [h₁₁ (n - 81)]
    rw [h₁₁ (n - 82)]
    rw [h₁₁ (n - 83)]
    rw [h₁₁ (n - 84)]
    rw [h₁₁ (n - 85)]
    rw [h₁₁ (n - 86)]
    rw [h₁₁ (n - 87)]
    rw [h₁₁ (n - 88)]
    rw [h₁₁ (n - 89)]
    rw [h₁₁ (n - 90)]
    rw [h₁₁ (n - 91)]
    rw [h₁₁ (n - 92)]
    rw [h₁₁ (n - 93)]
    rw [h₁₁ (n - 94)]
    rw [h₁₁ (n - 95)]
    rw [h₁₁ (n - 96)]
    rw [h₁₁ (n - 97)]
    rw [h₁₁ (n - 98)]
    rw [h₁₁ (n - 99)]
    rw [h₁₁ (n - 100)]
    simp
    linarith

  -- Substitute $a_n = 2009$ and $x = -5$.
  rw [h₅, hx] at h₁₂
  linarith
```