-- Let $n = 3^{17} + 3^{10}$. It is known that $11$ divides into $n+1$. If $n$ can be written in base $10$ as $ABCACCBAB$, where $A,B,C$ are distinct digits such that $A$ and $C$ are odd and $B$ is not divisible by $3$, find $100A + 10B + C$. Show that it is 129.

  -- We need to show that $100A + 10B + C = 129$.

  -- From the problem, $n = 3^{17} + 3^{10}$ has base 10 representation $ABCACCBAB$.

  -- First, let's compute $n = 3^{17} + 3^{10}$.

  have hn : n = 3 ^ 17 + 3 ^ 10 := h₀

  -- Calculate $3^{10}$:
  -- $3^1 = 3$
  -- $3^2 = 9$
  -- $3^3 = 27$
  -- $3^4 = 81$
  -- $3^5 = 243$
  -- $3^6 = 729$
  -- $3^7 = 2187$
  -- $3^8 = 6561$
  -- $3^9 = 19683$
  -- $3^{10} = 59049$

  have h3_10 : 3 ^ 10 = 59049 := by norm_num

  -- Calculate $3^{17}$:
  -- $3^{16} = 43046721$ (since $3^{16} = (3^8)^2 = 6561^2 = 43046721$)
  -- $3^{17} = 3^{16} \cdot 3 = 43046721 \cdot 3 = 129140163$

  have h3_17 : 3 ^ 17 = 129140163 := by norm_num

  -- Therefore, $n = 3^{17} + 3^{10} = 129140163 + 59049 = 129199212$

  have hn' : n = 129199212 := by
    rw [hn, h3_10, h3_17]
    norm_num

  -- Check that $11$ divides $n + 1$:
  -- $n + 1 = 129199212 + 1 = 129199213$
  -- Perform the division: $129199213 \div 11 = 11745383$ exactly, so $11$ divides $129199213$

  have h_div : 11 ∣ n + 1 := h₁

  -- Check that $A$ and $C$ are odd:
  -- From the representation $ABCACCBAB$ and the constraints, $A$ and $C$ must be odd.
  -- The digits $A$, $B$, and $C$ are distinct, with $A$ and $C$ odd and $B$ not divisible by 3.

  have hA_odd : Odd A := h₄.1
  have hC_odd : Odd C := h₄.2

  -- Check that $B$ is not divisible by 3:
  have hB_not_div_3 : ¬3 ∣ B := h₅

  -- Check that $A$, $B$, $C$ are distinct digits:
  have h_distinct : [A, B, C].Pairwise (· ≠ ·) := h₂
  have h_subset : {A, B, C} ⊂ Finset.Icc 0 9 := h₃

  -- Check the base 10 representation of $n$:
  have h_digits : Nat.digits 10 n = [B, A, B, C, C, A, C, B, A] := h₆

  -- From the representation $ABCACCBAB$:
  -- $n = 10^8 \cdot A + 10^7 \cdot B + 10^6 \cdot A + 10^5 \cdot C + 10^4 \cdot C + 10^3 \cdot B + 10^2 \cdot B + 10 \cdot A + C \cdot A$

  have : 100 * A + 10 * B + C = 129 := by
    have h1 : n = 129199212 := hn'
    have h2 : Nat.digits 10 129199212 = [2, 1, 9, 9, 2, 1, 9, 1, 2] := by norm_num
    rw [h1] at h_digits
    rw [h2] at h_digits
    simp at h_digits
    have hA : A = 1 := by
      have hA : A ∈ [2, 1, 9, 9, 2, 1, 9, 1, 2] := by
        simpa using h_digits
      simp at hA
      omega
    have hB : B = 2 := by
      have hB : B ∈ [2, 1, 9, 9, 2, 1, 9, 1, 2] := by
        simpa using h_digits
      simp at hB
      omega
    have hC : C = 9 := by
      have hC : C ∈ [2, 1, 9, 9, 2, 1, 9, 1, 2] := by
        simpa using h_digits
      simp at hC
      omega
    omega

  assumption

```