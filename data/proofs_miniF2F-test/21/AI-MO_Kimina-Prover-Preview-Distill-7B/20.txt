-- We prove that for any two integers $x$ and $y$, $x^5 \ne y^2 + 4$.
  -- First, we consider the case when $x$ is even.
  by_cases hx : Even x
  · -- If $x$ is even, then $5x$ is divisible by $8$.
    have hx5 : 8 ∣ 5 * x ^ 5 := by
      rw [pow_succ, pow_succ, pow_succ, pow_succ, pow_one]
      obtain ⟨k, hk⟩ := even_iff_two_dvd.mp hx
      ring_nf
      use 160 * k ^ 5
      rw [hk]
      ring
    -- So $x^5 \equiv 0 \pmod 8$.
    have hx5mod : x ^ 5 % 8 = 0 := by
      rw [Int.emod_eq_of_dvd]
      exact hx5
    -- Since $y^2 + 4 \equiv 4 \pmod 8$ if $y$ is even,
    have hy : (y ^ 2 + 4) % 8 = 4 % 8 := by
      -- If $y$ is even, then $y^2 \equiv 0 \pmod 8$.
      have hy1 : (y ^ 2) % 8 = 0 := by
        have : 8 ∣ y ^ 2 := by
          rw [pow_two]
          obtain ⟨k, hk⟩ := even_iff_two_dvd.mp (by tauto)
          ring_nf
          use 2 * k ^ 2
          rw [hk]
          ring
        rw [Int.emod_eq_of_dvd]
        apply this
      -- So $y^2 + 4 \equiv 4 \pmod 8$.
      rw [Nat.add_mod, hy1]
      simp
    -- and $x^5 \ne y^2 + 4$ since $0 \ne 4 \pmod 8$.
    rw [Int.emod_eq_of_dvd] at hx5mod
    have := Int.ModEq.add_right 4 hx5mod
    simp at this
    have h : (4 : ℤ) % 8 ≠ 0 := by norm_num
    contradiction

  -- Next, we consider the case when $x$ is odd.
  · -- If $x$ is odd, then $x^5 \equiv 1 \pmod 8$.
    have hxmod : x ^ 5 % 8 = 1 % 8 := by
      have := Int.ModEq.pow 5 (by
        -- If $x$ is odd, then $x \equiv 1,3,5,7 \pmod 8$.
        rw [Int.odd_iff] at hx
        -- In each case, we can compute directly that $x^5 \equiv 1 \pmod 8$.
        obtain ⟨k, hk⟩ := hx
        rw [hk]
        ring_nf
        have : (8 : ℤ) ∣ 8 * k ^ 5 * (k ^ 10 + 2 * k ^ 5 + 3) := by
          use 1 + k ^ 5 + k ^ 10
          ring
        rw [Int.emod_eq_of_dvd]
        apply this
      )
      exact this
    -- Since $y^2 + 4 \equiv 5 \pmod 8$ if $x$ is odd,
    have hy : (y ^ 2 + 4) % 8 = 5 % 8 := by
      -- If $y$ is even, then $y^2 \equiv 0 \pmod 8$.
      have hy1 : (y ^ 2) % 8 = 0 := by
        have : 8 ∣ y ^ 2 := by
          rw [pow_two]
          obtain ⟨k, hk⟩ := even_iff_two_dvd.mp (by tauto)
          ring_nf
          use 2 * k ^ 2
          rw [hk]
          ring
        rw [Int.emod_eq_of_dvd]
        apply this
      -- So $y^2 + 4 \equiv 4 \pmod 8$.
      rw [Nat.add_mod, hy1]
      simp
    -- and $x^5 \ne y^2 + 4$ since $1 \ne 5 \pmod 8$.
    rw [Int.emod_eq_of_dvd] at hxmod
    have := Int.ModEq.add_right 4 hxmod
    simp at this
    have h : (5 : ℤ) % 8 ≠ 1 % 8 := by norm_num
    contradiction

```