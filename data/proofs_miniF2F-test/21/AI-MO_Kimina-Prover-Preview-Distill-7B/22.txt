-- We prove that for any two integers $x$ and $y$, $x^5 \ne y^2 + 4$.
  -- First, consider the case when $x$ is even.
  by_cases hx_even : Even x
  · -- If $x$ is even, then $5x^4$ is divisible by $4$.
    have : 4 ∣ 5 * x ^ 4 := by
      rcases hx_even with ⟨r, hr⟩
      rw [hr]
      ring_nf
      omega
    -- This means that $x^5 \equiv 0 \pmod{4}$.
    have hx_mod4 : x ^ 5 ≡ 0 [ZMOD 4] := by
      calc
        x ^ 5 = 4 * (x * (x ^ 4 / 4)) := by
          ring_nf
          omega
        _ ≡ 0 [ZMOD 4] := by
          apply Int.modEq_zero_iff_dvd.mpr
          simp
    -- Now consider the case when $y$ is even.
    by_cases hy_even : Even y
    · -- If $y$ is even, then $y^2 \equiv 0 \pmod{4}$.
      have : y ^ 2 ≡ 0 [ZMOD 4] := by
        calc
          y ^ 2 = 4 * (y * (y / 4)) := by
            ring_nf
            omega
          _ ≡ 0 [ZMOD 4] := by
            apply Int.modEq_zero_iff_dvd.mpr
            simp
      -- This means that $y^2 + 4 \equiv 0 \pmod{4}$.
      have : y ^ 2 + 4 ≡ 0 [ZMOD 4] := by
        exact Int.ModEq.add this rfl
      -- We get $x^5 \equiv 0 \pmod{4}$ and $y^2 + 4 \equiv 0 \pmod{4}$.
      -- However, $0 \not\equiv 0 \pmod{4}$, which is a contradiction.
      have := Int.ModEq.trans (hr := this) hx_mod4.symm
      simp at this
      omega
    · -- If $y$ is odd, then $y^2 \equiv 1 \pmod{4}$.
      have : y ^ 2 ≡ 1 [ZMOD 4] := by
        exact sq_mod_four_eq_one_of_odd hy_even
      -- This means that $y^2 + 4 \equiv 1 \pmod{4}$.
      have : y ^ 2 + 4 ≡ 1 [ZMOD 4] := by
        exact Int.ModEq.add this rfl
      -- We get $x^5 \equiv 0 \pmod{4}$ and $y^2 + 4 \equiv 1 \pmod{4}$.
      -- However, $0 \not\equiv 1 \pmod{4}$, which is a contradiction.
      have := Int.ModEq.trans (hr := this) hx_mod4.symm
      simp at this
      omega
  · -- If $x$ is odd, then $x^5 \equiv 1 \pmod{4}$.
    have : x ^ 5 ≡ 1 [ZMOD 4] := by
      exact Odd.pow_mod_four_eq_one hx_even
    -- Now consider the case when $y$ is even.
    by_cases hy_even : Even y
    · -- If $y$ is even, then $y^2 \equiv 0 \pmod{4}$.
      have : y ^ 2 ≡ 0 [ZMOD 4] := by
        calc
          y ^ 2 = 4 * (y * (y / 4)) := by
            ring_nf
            omega
          _ ≡ 0 [ZMOD 4] := by
            apply Int.modEq_zero_iff_dvd.mpr
            simp
      -- This means that $y^2 + 4 \equiv 0 \pmod{4}$.
      have : y ^ 2 + 4 ≡ 0 [ZMOD 4] := by
        exact Int.ModEq.add this rfl
      -- We get $x^5 \equiv 1 \pmod{4}$ and $y^2 + 4 \equiv 0 \pmod{4}$.
      -- However, $1 \not\equiv 0 \pmod{4}$, which is a contradiction.
      have := Int.ModEq.trans (hr := this) this.symm
      simp at this
      omega
    · -- If $y$ is odd, then $y^2 \equiv 1 \pmod{4}$.
      have : y ^ 2 ≡ 1 [ZMOD 4] := by
        exact Odd.pow_mod_four_eq_one hy_even
      -- This means that $y^2 + 4 \equiv 1 \pmod{4}$.
      have : y ^ 2 + 4 ≡ 1 [ZMOD 4] := by
        exact Int.ModEq.add this rfl
      -- We get $x^5 \equiv 1 \pmod{4}$ and $y^2 + 4 \equiv 1 \pmod{4}$.
      -- However, is not sufficient to conclude that $x^5 = y^2 + 4$.
      -- We need to do some more calculations.
      -- First, let's recall that $x$ is odd.
      obtain ⟨r, hr⟩ : Odd x := hx_even
      -- Also, let's recall that $\left(-1\right)^{x^4} = 1$.
      have : (-1) ^ (x ^ 4) = 1 := by
        rw [hr]
        norm_num
      -- For a odd number $x$, $x^5 \equiv 1 \pmod{8}$.
      have hx_mod8 : x ^ 5 ≡ 1 [ZMOD 8] := by
        calc
          x ^ 5 = (x ^ 4) * x := by
            ring_nf
            omega
          _ ≡ 1 * x [ZMOD 8] := by
            apply Int.ModEq.mul_right
            apply this
          _ ≡ x [ZMOD 8] := by
            ring_nf
            omega
          _ ≡ 1 [ZMOD 8] := by
            rw [hr]
            norm_num
      -- Now consider the case when $y$ is odd.
      obtain ⟨r, hr⟩ : Odd y := hy_even
      -- Also, let's recall that $\left(-1\right)^{y^2} = 1$.
      have : (-1) ^ (y ^ 2) = 1 := by
        rw [hr]
        norm_num
      -- For a odd number $y$, $y^2 \equiv 1 \pmod{8}$.
      have hy_mod8 : y ^ 2 ≡ 1 [ZMOD 8] := by
        calc
          y ^ 2 = (y ^ 1) ^ 2 := by
            ring_nf
            omega
          _ ≡ 1 ^ 2 [ZMOD 8] := by
            apply Int.ModEq.pow
            exact this
          _ ≡ 1 [ZMOD 8] := by
            norm_num
      -- This means that $y^2 + 4 \equiv 5 \pmod{8}$.
      have : y ^ 2 + 4 ≡ 5 [ZMOD 8] := by
        exact Int.ModEq.add hy_mod8 rfl
      -- We get $x^5 \equiv 1 \pmod{8}$ and $y^2 + 4 \equiv 5 \pmod{8}$.
      -- However, $1 \not\equiv 5 \pmod{8}$, which is a contradiction.
      have := Int.ModEq.trans (hr := this) hx_mod8.symm
      simp at this
      omega

```