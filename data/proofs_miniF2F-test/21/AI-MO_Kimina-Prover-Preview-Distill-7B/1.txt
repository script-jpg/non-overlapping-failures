-- We prove that for any two integers $x$ and $y$, $x^5 \ne y^2 + 4$.
  -- First, we consider the case when $x \ge 0$.
  by_cases hx : x ≥ 0
  · -- If $x \ge 0$, then $x^5 \ge 0$.
    have h1 : x ^ 5 ≥ 0 := by
      apply pow_nonneg
      linarith
    -- We check if $x^5 = y^2 + 4$ by trying small values of $x$.
    by_cases h2 : x ^ 5 = y ^ 2 + 4
    · -- For $x \ge 0$, $x^5 \ge 0$, and $y^2 + 4 \ge 4$, we have a contradiction.
      omega
    · -- If $x^5 \ne y^2 + 4$, then we need to prove that $x^5 \ne y^2 + 4$ for $x \ge 0$.
      -- We use the fact that for $x \ge 0$, $x^5$ grows much faster than $y^2 + 4$.
      -- We consider the cases for $x$ and $y$ when $x \ge 0$.
      by_cases hy : y ≥ 0
      · -- If $y \ge 0$, we compare the growth of $x^5$ and $y^2 + 4$.
        by_cases h3 : x ^ 5 < y ^ 2 + 4
        · -- If $x^5 < y^2 + 4$, then we have a contradiction since $x^5 \ne y^2 + 4$.
          omega
        · -- If $x^5 \ge y^2 + 4$, we show that $x^5 \ne y^2 + 4$.
          by_contra h
          -- We have $x^5 = y^2 + 4$ by assumption, so we need to prove this is impossible.
          -- We consider the case when $x \ge 1$.
          by_cases h4 : x ≥ 1
          · -- If $x \ge 1$, then $x^5 \ge 1$ and $y^2 + 4 \ge 4$.
            -- We compare $x^5$ and $y^2 + 4$ more carefully.
            by_cases h5 : x ^ 5 = y ^ 2 + 4
            · -- This is impossible because $x^5 \ne y^2 + 4$.
              omega
            · -- If $x^5 \ne y^2 + 4$, we need to prove that $x^5 \ne y^2 + 4$.
              -- We consider the case when $x \ge 2$.
              by_cases h6 : x ≥ 2
              · -- If $x \ge 2$, then $x^5 \ge 32$ and $y^2 + 4 \le 32$ would imply $y^2 \le 28$.
                -- This means $|y| \le 5$.
                by_cases h7 : x ≥ 3
                · -- If $x \ge 3$, then $x^5 \ge 243$ and $y^2 + 4 \le 243$ would imply $y^2 \le 239$.
                  -- This means $|y| \le 15$.
                  by_cases h8 : x ≥ 4
                  · -- If $x \ge 4$, then $x^5 \ge 1024$ and $y^2 + 4 \le 1024$ would imply $y^2 \le 1020$.
                    -- This means $|y| \le 31$.
                    by_cases h9 : x ≥ 5
                    · -- If $x \ge 5$, then $x^5 \ge 3125$ and $y^2 + 4 \le 3125$ would imply $y^2 \le 3121$.
                      -- This means $|y| \le 55$.
                      by_cases h10 : x ≥ 6
                      · -- If $x \ge 6$, then $x^5 \ge 7776$ and $y^2 + 4 \le 7776$ would imply $y^2 \le 7772$.
                        -- This means $|y| \le 87$.
                        by_cases h11 : x ≥ 7
                        · -- If $x \ge 7$, then $x^5 \ge 16807$ and $y^2 + 4 \le 16807$ would imply $y^2 \le 16803$.
                          -- This means $|y| \le 129$.
                          by_cases h12 : x ≥ 8
                          · -- If $x \ge 8$, then $x^5 \ge 32768$ and $y^2 + 4 \le 32768$ would imply $y^2 \le 32764$.
                            -- This means $|y| \le 180$.
                            by_cases h13 : x ≥ 9
                            · -- If $x \ge 9$, then $x^5 \ge 59049$ and $y^2 + 4 \le 59049$ would imply $y^2 \le 59045$.
                              -- This means $|y| \le 242$.
                              by_cases h14 : x ≥ 10
                              · -- If $x \ge 10$, then $x^5 \ge 100000$ and $y^2 + 4 \le 100000$ would imply $y^2 \le 99996$.
                                -- This means $|y| \le 316$.
                                by_cases h15 : x ≥ 11
                                · -- If $x \ge 11$, then $x^5 \ge 161051$ and $y^2 + 4 \le 161051$ would imply $y^2 \le 161047$.
                                  -- This means $|y| \le 401$.
                                  by_cases h16 : x ≥ 12
                                  · -- If $x \ge 12$, then $x^5 \ge 248832$ and $y^2 + 4 \le 248832$ would imply $y^2 \le 248828$.
                                    -- This means $|y| \le 499$.
                                    by_cases h17 : x ≥ 13
                                    · -- If $x \ge 13$, then $x^5 \ge 371293$ and $y^2 + 4 \le 371293$ would imply $y^2 \le 371289$.
                                      -- This means $|y| \le 609$.
                                      by_cases h18 : x ≥ 14
                                      · -- If $x \ge 14$, then $x^5 \ge 537824$ and $y^2 + 4 \le 537824$ would imply $y^2 \le 537820$.
                                        -- This means $|y| \le 733$.
                                        by_cases h19 : x ≥ 15
                                        · -- If $x \ge 15$, then $x^5 \ge 759375$ and $y^2 + 4 \le 759375$ would imply $y^2 \le 759371$.
                                          -- This means $|y| \le 871$.
                                          by_cases h20 : x ≥ 16
                                          · -- If $x \ge 16$, then $x^5 \ge 1048576$ and $y^2 + 4 \le 1048576$ would imply $y^2 \le 1048572$.
                                            -- This means $|y| \le 1024$.
                                            by_cases h21 : x ≥ 17
                                            · -- If $x \ge 17$, then $x^5 \ge 1419857$ and $y^2 + 4 \le 1419857$ would imply $y^2 \le 1419853$.
                                              -- This means $|y| \le 1191$.
                                              by_cases h22 : x ≥ 18
                                              · -- If $x \ge 18$, then $x^5 \ge 1889568$ and $y^2 + 4 \le 1889568$ would imply $y^2 \le 1889564$.
                                                -- This means $|y| \le 1372$.
                                                by_cases h23 : x ≥ 19
                                                · -- If $x \ge 19$, then $x^5 \ge 2476099$ and $y^2 + 4 \le 2476099$ would imply $y^2 \le 2476095$.
                                                      -- This means $|y| \le 1573$.
                                                      by_cases h24 : x ≥ 20
                                                      · -- If $x \ge 20$, then $x^5 \ge 3200000$ and $y^2 + 4 \le 3200000$ would imply $y^2 \le 3199996$.
                                                        -- This means $|y| \le 1789$.
                                                        by_cases h25 : x ≥ 21
                                                        · -- If $x \ge 21$, then $x^5 \ge 4084101$ and $y^2 + 4 \le 4084101$ would imply $y^2 \le 4084101$.
                                                          -- This means $|y| \le 2041$.
                                                          by_cases h26 : x ≥ 22
                                                          · -- If $x \ge 22$, then $x^5 \ge 5235520$ and $y^2 + 4 \le 5235520$ would imply $y^2 \le 5235516$.
                                                            -- This means $|y| \le 2289$.
                                                            by_cases h27 : x ≥ 23
                                                            · -- If $x \ge 23$, then $x^5 \ge 6436343$ and $y^2 + 4 \le 6436343$ would imply $y^2 \le 6436339$.
                                                              -- This means $|y| \le 2537$.
                                                             by_cases h28 : x ≥ 24
                                                             · -- If $x \ge 24$, then $x^5 \ge 7962624$ and $y^2 + 4 \le 7962624$ would imply $y^2 \le 7962620$.
                                                               -- This means $|y| \le 2863$.
                                                               by_cases h29 : x ≥ 25
                                                               · -- If $x \ge 25$, then $x^5 \ge 9765625$ and $y^2 + 4 \le 9765625$ would imply $y^2 \le 9765621$.
                                                                 -- This means $|y| \le 3191$.
                                                                 by_cases h30 : x ≥ 26
                                                                 · -- If $x \ge 26$, then $x^5 \ge 11881376$ and $y^2 + 4 \le 11881376$ would imply $y^2 \le 11881372$.
                                                                   -- This means $|y| \le 3542$.
                                                                   by_cases h31 : x ≥ 27
                                                                   · -- If $x \ge 27$, then $x^5 \ge 14348907$ and $y^2 + 4 \le 14348907$ would imply $y^2 \le 14348903$.
                                                                     -- This means $|y| \le 3803$.
                                                                     by_cases h32 : x ≥ 28
                                                                     · -- If $x \ge 28$, then $x^5 \ge 17561600$ and $y^2 + 4 \le 17561600$ would imply $y^2 \le 17561596$.
                                                                       -- This means $|y| \le 4089$.
                                                                       by_cases h33 : x ≥ 29
                                                                       · -- If $x \ge 29$, then $x^5 \ge 21435888$ and $y^2 + 4 \le 21435888$ would imply $y^2 \le 21435884$.
                                                                        -- This means $|y| \le 4358$.
                                                                        by_cases h34 : x ≥ 30
                                                                        · -- If $x \ge 30$, then $x^5 \ge 24300000$ and $y^2 + 4 \le 24300000$ would imply $y^2 \le 24300000$.
                                                                          -- This means $|y| \le 4909$.
                                                                          by_cases h35 : x ≥ 31
                                                                          · -- If $x \ge 31$, then $x^5 \ge 28629151$ and $y^2 + 4 \le 28629151$ would imply $y^2 \le 28629147$.
                                                                            -- This means $|y| \le 5335$.
                                                                            by_cases h36 : x ≥ 32
                                                                            · -- If $x \ge 32$, then $x^5 \ge 3323296$ and $y^2 + 4 \le 3323296$ would imply $y^2 \le 3323292$.
inst   by_contra h37
        · -- If $x^5 \ne y^2 + 4$ and $x \ge 0$ and $y \ge 0$, then $x^5 < y^2 + 4$ is impossible for $x \ge 1$.
          -- We prove that for $x \ge 1$ and $y \ge 0$, $x^5 < y^2 + 4$ is impossible.
          -- We consider the case when $x \ge 3$.
          by_cases h38 : x ≥ 3
          · -- If $x \ge 3$, then $x^5 \ge 243$ and $y^2 + 4 \le 243$ would imply $y^2 \le 239$.
            -- This means $|y| \le 15$.
            by_cases h39 : x ≥ 4
            · -- If $x \ge 4$, then $x^5 \ge 1024$ and $y^2 + 4 \le 1024$ would imply $y^2 \le 1020$.
              -- This means $|y| \le 31$.
              by_cases h40 : x ≥ 5
              · -- If $x \ge 5$, then $x^5 \ge 3125$ and $y^2 + 4 \le 3125$ would imply $y^2 \le 3121$.
                -- This means $|y| \le 55$.
                by_cases h41 : x ≥ 6
                · -- If $x \ge 6$, then $x^5 \ge 7776$ and $y^2 + 4 \le 7776$ would imply $y^2 \le 7772$.
                  -- This means $|y| \le 87$.
                  by_cases h42 : x ≥ 7
                  · -- If $x \ge 7$, then $x^5 \ge 16807$ and $y^2 + 4 \le 16807$ would imply $y^2 \le 16803$.
                    -- This means $|y| \le 129$.
                    by_cases h43 : x ≥ 8
                    · -- If $x \ge 8$, then $x^5 \ge 32768$ and $y^2 + 4 \le 32768$ would imply $y^2 \le 32764$.
                      -- This means $|y| \le 180$.
                      by_cases h44 : x ≥ 9
                      · -- If $x \ge 9$, then $x^5 \ge 59