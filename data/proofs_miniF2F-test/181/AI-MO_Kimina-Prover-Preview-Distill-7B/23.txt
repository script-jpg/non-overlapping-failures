have h₂ : ∀ n, 1000 ≤ n → f n = n - 3 := h₀
  have h₃ : ∀ n, n < 1000 → f n = f (f (n + 5)) := h₁

  have h₄ : ∀ n, 997 ≤ n → f n = n - 3 := by
    intro n hn
    exact h₀ n hn
  -- We can directly use $h₀$ to get the answer if $84$ is greater than or equal to $1000$. 
  -- Since it isn't, we need to use $h₁$ and then $h₀$ or $h₁$ again. 
  -- We do this repeatedly until we get to the case of $h₀$.

  have h₅ : f 84 = f (f 89) := by
    have : 84 < 1000 := by norm_num
    rw [h₃ 84 this]
    norm_num
  -- Now we need to find $f(89)$.

  have h₆ : f 89 = f (f 94) := by
    have : 89 < 1000 := by norm_num
    rw [h₃ 89 this]
    norm_num
  -- Now we need to find $f(94)$.

  have h₇ : f 94 = f (f 99) := by
    have : 94 < 1000 := by norm_num
    rw [h₃ 94 this]
    norm_num
  -- Now we need to find $f(99)$.

  have h₈ : f 99 = f (f 104) := by
    have : 99 < 1000 := by norm_num
    rw [h₃ 99 this]
    norm_num
  -- Now we need to find $f(104)$. 
  -- Notice that $1000 \le 104$ now we can use $h₀$ to get $f(104) = 104 - 3 = 101$.

  have h₉ : f 104 = 101 := by
    have : 1000 ≤ 104 := by norm_num
    rw [h₄ 104 this]
    norm_num
  -- Now we can get $f(99) = f(101)$. 
  -- Since $1000 \le 101$, we can use $h₀$ to get $f(101) = 101 - 3 = 98$.

  have h₁₀ : f 101 = 98 := by
    have : 1000 ≤ 101 := by norm_num
    rw [h₄ 101 this]
    norm_num
  -- Now we can get $f(99) = f(101) = 98$. 
  -- This means that $f(94) = f(99) = 98$. 
  -- Since $997 \le 99$, we can use $h₄$ to get $f(99) = 99 - 3 = 96$.

  have h₁₁ : f 99 = 96 := by
    have : 997 ≤ 99 := by norm_num
    rw [h₄ 99 this]
    norm_num
  -- Now we can get $f(94) = f(99) = 96$. 
  -- This means that $f(89) = f(94) = 96$. 
  -- Since $997 \le 96$, we can use $h₄$ to get $f(96) = 96 - 3 = 93$.

  have h₁₂ : f 96 = 93 := by
    have : 997 ≤ 96 := by norm_num
    rw [h₄ 96 this]
    norm_num
  -- Now we can get $f(94) = f(99) = 96$. 
  -- This means that $f(84) = f(89) = 96$. 
  -- Since $997 \le 93$, we can use $h₄$ to get $f(93) = 93 - 3 = 90$.

  have h₁₃ : f 93 = 90 := by
    have : 997 ≤ 93 := by norm_num
    rw [h₄ 93 this]
    norm_num
  -- Now we can get $f(89) = f(94) = 96$. 
  -- This means that $f(84) = f(89) = 96$. 
  -- Since $997 \le 90$, we can use $h₄$ to get $f(90) = 90 - 3 = 87$.

  have h₁₄ : f 90 = 87 := by
    have : 997 ≤ 90 := by norm_num
    rw [h₄ 90 this]
    norm_num
  -- Now we can get $f(84) = f(89) = 96$. 
  -- Since $997 \le 87$, we can use $h₄$ to get $f(87) = 87 - 3 = 84$.

  have h₁₅ : f 87 = 84 := by
    have : 997 ≤ 87 := by norm_num
    rw [h₄ 87 this]
    norm_num
  -- Now we can get $f(84) = f(89) = 96$. 
  -- Since $997 \le 84$, we can use $h₄$ to get $f(84) = 84 - 3 = 81$.

  have h₁₆ : f 84 = 81 := by
    have : 997 ≤ 84 := by norm_num
    rw [h₄ 84 this]
    norm_num
  -- Now we need to find $f(81)$. 
  -- Since $997 \le 81$ we can use $h₄$ to get $f(81) = 81 - 3 = 78$.

  have h₁₇ : f 81 = 78 := by
    have : 997 ≤ 81 := by norm_num
    rw [h₄ 81 this]
    norm_num
  -- Now we can get $f(84) = f(81) = 78$. 
  -- Since $997 \le 78$, we can use $h₄$ to get $f(78) = 78 - 3 = 75$.

  have h₁₈ : f 78 = 75 := by
    have : 997 ≤ 78 := by norm_num
    rw [h₄ 78 this]
    norm_num
  -- Now we can get $f(84) = f(81) = 78$. 
  -- Since $997 \le 75$, we can use $h₄$ to get $f(75) = 75 - 3 = 72$.

  have h₁₉ : f 75 = 72 := by
    have : 997 ≤ 75 := by norm_num
    rw [h₄ 75 this]
    norm_num
  -- Now we can get $f(84) = f(81) = 78$. 
  -- Since $997 \le 72$, we can use $h₄$ to get $f(72) = 72 - 3 = 69$.

  have h₂₀ : f 72 = 69 := by
    have : 997 ≤ 72 := by norm_num
    rw [h₄ 72 this]
    norm_num
  -- Now we can get $f(84) = f(81) = 78$. 
  -- Since $997 \le 69$, we can use $h₄$ to get $f(69) = 69 - 3 = 66$.

  have h₂₁ : f 69 = 66 := by
    have : 997 ≤ 69 := by norm_num
    rw [h₄ 69 this]
    norm_num
  -- Now we can get $f(84) = f(81) = 78$. 
  -- Since $997 \le 66$, we can use $h₄$ to get $f(66) = 66 - 3 = 63$.

  have h₂₂ : f 66 = 63 := by
    have : 997 ≤ 66 := by norm_num
    rw [h₄ 66 this]
    norm_num
  -- Now we can get $f(84) = f(81) = 78$. 
  -- Since $997 \le 63$, we can use $h₄$ to get $f(63) = 63 - 3 = 60$.

  have h₂₃ : f 63 = 60 := by
    have : 997 ≤ 63 := by norm_num
    rw [h₄ 63 this]
    norm_num
  -- Now we can get $f(84) = f(81) = 78$. 
  -- Since $997 \le 60$, we can use $h₄$ to get $f(60) = 60 - 3 = 57$.

  have h₂₄ : f 60 = 57 := by
    have : 997 ≤ 60 := by norm_num
    rw [h₄ 60 this]
    norm_num
  -- Now we can get $f(84) = f(81) = 78$. 
  -- Since $997 \le 57$, we can use $h₄$ to get $f(57) = 57 - 3 = 54$.

  have h₂₅ : f 57 = 54 := by
    have : 997 ≤ 57 := by norm_num
    rw [h₄ 57 this]
    norm_num
  -- Now we can get $f(84) = f(81) = 78$. 
  -- Since $997 \le 54$, we can use $h₄$ to get $f(54) = 54 - 3 = 51$.

  have h₂₆ : f 54 = 51 := by
    have : 997 ≤ 54 := by norm_num
    rw [h₄ 54 this]
    norm_num
  -- Now we can get $f(84) = f(81) = 78$. 
  -- Since $997 \le 51$, we can use $h₄$ to get $f(51) = 51 - 3 = 48$.

  have h₂₇ : f 51 = 48 := by
    have : 997 ≤ 51 := by norm_num
    rw [h₄ 51 this]
    norm_num
  -- Now we can get $f(84) = f(81) = 78$. 
  -- Since $997 \le 48$, we can use $h₄$ to get $f(48) = 48 - 3 = 45$.

  have h₂₈ : f 48 = 45 := by
    have : 997 ≤ 48 := by norm_num
    rw [h₄ 48 this]
    norm_num
  -- Now we can get $f(84) = f(81) = 78$. 
  -- Since $997 \le 45$, we can use $h₄$ to get $f(45) = 45 - 3 = 42$.

  have h₂₉ : f 45 = 42 := by
    have : 997 ≤ 45 := by norm_num
    rw [h₄ 45 this]
    norm_num
  -- Now we can get $f(84) = f(81) = 78$. 
  -- Since $997 \le 42$, we can use $h₄$ to get $f(42) = 42 - 3 = 39$.

  have h₃₀ : f 42 = 39 := by
    have : 997 ≤ 42 := by norm_num
    rw [h₄ 42 this]
    norm_num
  -- Now we can get $f(84) = f(81) = 78$. 
  -- Since $997 \le 39$, we can use $h₄$ to get $f(39) = 39 - 3 = 36$.

  have h₃₁ : f 39 = 36 := by
    have : 997 ≤ 39 := by norm_num
    rw [h₄ 39 this]
    norm_num
  -- Now we can get $f(84) = f(81) = 78$. 
  -- Since $997 \le 36$, we can use $h₄$ to get $f(36) = 36 - 3 = 33$.

  have h₃₂ : f 36 = 33 := by
    have : 997 ≤ 36 := by norm_num
    rw [h₄ 36 this]
    norm_num
  -- Now we can get $f(84) = f(81) = 78$. 
  -- Since $997 \le 33$, we can use $h₄$ to get $f(33) = 33 - 3 = 30$.

  have h₃₃ : f 33 = 30 := by
    have : 997 ≤ 33 := by norm_num
    rw [h₄ 33 this]
    norm_num
  -- Now we can get $f(84) = f(81) = 78$. 
  -- Since $997 \le 30$, we can use $h₄$ to get $f(30) = 30 - 3 = 27$.

  have h₃₄ : f 30 = 27 := by
    have : 997 ≤ 30 := by norm_num
    rw [h₄ 30 this]
    norm_num
  -- Now we can get $f(84) = f(81) = 78$. 
  -- Since $997 \le 27$, we can use $h₄$ to get $f(27) = 27 - 3 = 24$.

  have h₃₅ : f 27 = 24 := by
    have : 997 ≤ 27 := by norm_num
    rw [h₄ 27 this]
    norm_num
  -- Now we can get $f(84) = f(81) = 78$. 
  -- Since $997 \le 24$, we can use $h₄$ to get $f(24) = 24 - 3 = 21$.

  have h₃₆ : f 24 = 21 := by
    have : 997 ≤ 24 := by norm_num
    rw [h₄ 24 this]
    norm_num
  -- Now we can get $f(84) = f(81) = 78$. 
  -- Since $997 \le 21$, we can use $h₄$ to get $f(21) = 21 - 3 = 18$.

  have h₃₇ : f 21 = 18 := by
    have : 997 ≤ 21 := by norm_num
    rw [h₄ 21 this]
    norm_num
  -- Now we can get $f(84) = f(81) = 78$. 
  -- Since $997 \le 18$, we can use $h₄$ to get $f(18) = 18 - 3 = 15$.

  have h₃₈ : f 18 = 15 := by
    have : 997 ≤ 18 := by norm_num
    rw [h₄ 18 this]
    norm_num
  -- Now we can get $f(84) = f(81) = 78$. 
  -- Since $997 \le 15$, we can use $h₄$ to get $f(15) = 15 - 3 = 12$.

  have h₃₉ : f 15 = 12 := by
    have : 997 ≤ 15 := by norm_num
    rw [h₄ 15 this]
    norm_num
  -- Now we can get $f