have h₂ : ∀ n, 997 ≤ n → n < 1000 → f n = f (n - 3) := by
    intro n h₃ h₄
    apply h₁
    · linarith
    · exact h₄

  -- The function f on the set of integers is defined and for n >= 1000, f(n) = n - 3.
  -- For n < 1000, f(n) = f(f(n + 5)). We are to show that f(84) = 997.

  -- We begin by calculating f(997).
  have h₅ : f 997 = 997 - 3 := h₀ 997 (by linarith)
  -- By the definition of f, f(997) = 997 - 3 because 997 >= 1000 is false.
  -- So f(997) = 994.

  -- We now calculate f(994).
  have h₆ : f 994 = f (997) := h₂ 994 (by linarith) (by linarith)
  -- By our earlier result, f(994) = f(f(994 + 5)) = f(f(999)).
  -- But f(999) = 999 - 3 = 996 because 999 >= 1000 is false.
  -- So f(994) = f(996).
  rw [h₅] at h₆
  -- Now h₆ tells us that f(994) = f(996).

  -- We now calculate f(996).
  have h₇ : f 996 = f (999) := h₂ 996 (by linarith) (by linarith)
  -- By our earlier result, f(996) = f(f(996 + 5)) = f(f(1001)).
  -- Since 1001 >= 1000 is true, f(1001) = 1001 - 3 = 998.
  rw [h₀ 1001 (by linarith)] at h₇
  -- Now h₇ tells us that f(996) = f(998).

  -- We now calculate f(998).
  have h₈ : f 998 = f (1001) := h₂ 998 (by linarith) (by linarith)
  -- By our earlier result, f(998) = f(f(998 + 5)) = f(f(1003)).
  -- Since 1003 >= 1000 is true, f(1003) = 1003 - 3 = 1000.
  rw [h₀ 1003 (by linarith)] at h₈
  -- Now h₈ tells us that f(998) = f(1000).

  -- We now calculate f(1000).
  have h₉ : f 1000 = 1000 - 3 := h₀ 1000 (by linarith)
  -- By our earlier result, f(1000) = 1000 - 3 = 997 because 1000 >= 1000 is true.
  -- So f(1000) = 997.

  -- Substituting back, we find f(998) = f(1000) = 997, f(996) = f(998) = 997, and f(994) = f(996) = 997.
  rw [h₉] at h₈
  rw [h₈] at h₇
  rw [h₇] at h₆
  -- Now h₆ tells us that f(994) = 997.

  -- Substituting back, we find f(997) = 994, f(994) = 997, and so f(997) = 994 = 997 - 3.
  rw [h₆] at h₅
  -- Now h₅ tells us that 994 = 997 - 3, which is correct.

  -- Finally, substituting back, we find f(84) = f(f(89)) = f(997) = 994 = 997 - 3.
  have h₁₀ : f 89 = f (94) := h₂ 89 (by linarith) (by linarith)
  have h₁₁ : f 94 = f (99) := h₂ 94 (by linarith) (by linarith)
  have h₁₂ : f 99 = f (104) := h₂ 99 (by linarith) (by linarith)
  have h₁₃ : f 104 = 104 - 3 := h₀ 104 (by linarith)
  rw [h₁₃] at h₁₂
  rw [h₁₂] at h₁₁
  rw [h₁₁] at h₁₀
  rw [h₁₀] at h₅
  -- Now h₅ tells us that f(84) = 997 - 3 = 994 = 997 - 3, which is the answer.

  -- In conclusion, f(84) = 997.
  linarith
```