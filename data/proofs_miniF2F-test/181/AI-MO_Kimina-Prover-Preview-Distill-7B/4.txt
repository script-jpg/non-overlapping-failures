have h₂ : ∀ n, 1000 ≤ n → f n = n - 3 := h₀

  have h₃ : ∀ n, n < 1000 → f n = f (f (n + 5)) := h₁

  have h₄ : ∀ n, 1000 ≤ n → f n = n - 3 := h₀

  have h₅ : ∀ n, n < 1000 → f n = f (f (n + 5)) := h₁

  have h₆ : f 84 = 997 := by

    have h7 : f 84 = f (f 89) := by

      have h8 : 84 < 1000 := by linarith

      rw [h₃ 84 h8]

      linarith

    have h9 : f 89 = f (f 94) := by

      have h10 : 89 < 1000 := by linarith

      rw [h₃ 89 h10]

      linarith

    have h11 : f 94 = f (f 99) := by

      have h12 : 94 < 1000 := by linarith

      rw [h₃ 94 h12]

      linarith

    have h13 : f 99 = f (f 104) := by

      have h14 : 99 < 1000 := by linarith

      rw [h₃ 99 h14]

      linarith

    have h15 : f 104 = 101 := by

      have h16 : 104 ≥ 1000 := by linarith

      rw [h₄ 104 h16]

      linarith

    rw [h15] at h13

    have h17 : f 101 = 997 := by

      have h18 : 101 ≥ 1000 := by linarith

      rw [h₄ 101 h18]

      linarith

    rw [h17] at h13

    rw [h13] at h11

    rw [h11] at h9

    rw [h9] at h7

    exact h7

  exact h₆
```