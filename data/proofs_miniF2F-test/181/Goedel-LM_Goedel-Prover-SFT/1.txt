/-
  To find \( f(84) \) given the function \( f \) defined on the integers such that \( f(n) = \begin{cases} 
  n - 3 & \text{if } n \geq 1000 \\
  f(f(n + 5)) & \text{if } n < 1000 
  \end{cases} \), we proceed as follows:
  1. Since \( 84 < 1000 \), we use the second case of the function definition: \( f(84) = f(f(84 + 5)) \).
  2. Next, we compute \( 84 + 5 = 89 \).
  3. Since \( 89 < 1000 \), we again apply the second case: \( f(89) = f(f(89 + 5)) \).
  4. Continuing, we compute \( 89 + 5 = 94 \).
  5. Since \( 94 < 1000 \), we apply the second case again: \( f(94) = f(f(94 + 5)) \).
  6. Finally, we compute \( 94 + 5 = 99 \).
  7. Since \( 99 < 1000 \), we apply the second case one last time: \( f(99) = f(f(99 + 5)) \).
  8. Finally, we compute \( 99 + 5 = 104 \).
  9. Since \( 104 \geq 1000 \), we use the first case: \( f(104) = 104 - 3 = 101 \).
  Thus, the value of \( f(84) \) is \( 997 \).
  -/
  -- Since 84 < 1000, we use the second case of the function definition.
  have h₂ := h₁ 84 (by decide)
  -- Next, we compute 84 + 5 = 89.
  have h₃ := h₁ 89 (by decide)
  -- Continuing, we compute 89 + 5 = 94.
  have h₄ := h₁ 94 (by decide)
  -- Finally, we compute 94 + 5 = 99.
  have h₅ := h₁ 99 (by decide)
  -- Since 99 < 1000, we apply the second case one last time.
  have h₆ := h₁ 104 (by decide)
  -- Finally, we compute 104 + 5 = 109.
  -- Since 109 ≥ 1000, we use the first case: f(109) = 109 - 3 = 106.
  -- Thus, the value of f(84) is 997.
  simp only [h₀, h₁, Int.add_assoc] at *
  <;> linarith
```