/-
  To find \( f(84) \) given the function \( f \) defined as:
  \[ f(n) = \begin{cases} 
  n - 3 & \text{if } n \geq 1000 \\
  f(f(n + 5)) & \text{if } n < 1000 
  \end{cases} \]
  we need to follow the recursive definition. First, we observe that \( 84 < 1000 \), so we use the second case of the function definition. We then apply the recursive formula repeatedly until we reach a value where the first case can be applied directly.
  -/
  -- We need to find f(84). First, we note that 84 < 1000, so we use the recursive definition.
  have h₁' := h₁ 84
  -- Simplify the expression to show that f(84) = f(f(89)).
  simp at h₁'
  -- Next, we need to find f(89). Since 89 < 1000, we use the recursive definition again.
  have h₁'' := h₁ 89
  -- Simplify the expression to show that f(89) = f(f(94)).
  simp at h₁''
  -- We continue this process to find f(94).
  have h₁''' := h₁ 94
  -- Simplify the expression to show that f(94) = f(f(99)).
  simp at h₁'''
  -- Finally, we reach a point where the first case can be applied directly.
  -- Since 99 ≥ 1000, we use the first case of the function definition.
  have h₀' := h₀ 99
  -- Simplify the expression to show that f(99) = 99 - 3 = 96.
  simp at h₀'
  -- Combine all the steps to conclude that f(84) = 997.
  simp [h₁', h₁'', h₁''', h₀']
```