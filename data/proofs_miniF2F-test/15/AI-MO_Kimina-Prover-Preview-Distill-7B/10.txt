-- We split into cases where $a \geq b$ and $a < b$.
  obtain h | h := le_or_lt a b <;> simp_all

  -- Case 1: $a \geq b$.
  · -- Note that $(a-b)^2 \geq 0$.
    have h₁ : (a - b) ^ 2 ≥ 0 := by positivity

    -- We can rewrite $(a-b)^2 \geq 0$ as $a^2-2ab+b^2 \geq 0$.
    replace h₁ : a ^ 2 - 2 * a * b + b ^ 2 ≥ 0 := by linarith

    -- We can rewrite $a^2+b^2=1$ as $a^2+b^2-1=0$.
    rw [show a ^ 2 + b ^ 2 - 1 = 0 by linarith] at h₁

    -- Then $(a^2+b^2-1)+(-2ab) \geq 0+0$,
    -- which simplifies to $1-2ab \geq 0$.
    replace h₁ : 1 - 2 * a * b ≥ 0 := by linarith

    -- Then $2ab \leq 1$.
    replace h₁ : 2 * a * b ≤ 1 := by linarith

    -- Then $ab \leq \frac{1}{2}$.
    replace h₁ : a * b ≤ 1 / 2 := by linarith

    -- Case 2: $a < b$.
    -- Note that $(a-b)^2 > 0$.
    have h₁ : (a - b) ^ 2 > 0 := by positivity

    -- We can rewrite $(a-b)^2 > 0$ as $a^2-2ab+b^2 > 0$.
    replace h₁ : a ^ 2 - 2 * a * b + b ^ 2 > 0 := by linarith

    -- We can rewrite $a^2+b^2=1$ as $a^2+b^2-1=0$.
    rw [show a ^ 2 + b ^ 2 - 1 = 0 by linarith] at h₁

    -- Then $(a^2+b^2-1)+(-2ab) > 0+0$,
    -- which simplifies to $1-2ab > 0$.
    replace h₁ : 1 - 2 * a * b > 0 := by linarith

    -- Then $2ab < 1$.
    replace h₁ : 2 * a * b < 1 := by linarith

    -- Then $ab < \frac{1}{2}$.
    replace h₁ : a * b < 1 / 2 := by linarith

    -- In both cases, we have $ab \leq \frac{1}{2}$.
    linarith

  -- Now we handle the absolute value.
  -- We split into cases where $ab \geq 0$ and $ab < 0$.
  obtain h | h := le_or_lt (a * b) 0 <;> simp_all

  -- Case 1: $ab \geq 0$.
  · -- Note that $(a+b)^2 \geq 0$.
    have h₁ : (a + b) ^ 2 ≥ 0 := by positivity

    -- We can rewrite $(a+b)^2 \geq 0$ as $a^2+2ab+b^2 \geq 0$.
    replace h₁ : a ^ 2 + 2 * a * b + b ^ 2 ≥ 0 := by linarith

    -- We can rewrite $a^2+b^2=1$ as $a^2+b^2-1=0$.
    rw [show a ^ 2 + b ^ 2 - 1 = 0 by linarith] at h₁

    -- Then $(a^2+b^2-1)+(2ab) \geq 0+0$,
    -- which simplifies to $1+2ab \geq 0$.
    replace h₁ : 1 + 2 * a * b ≥ 0 := by linarith

    -- Then $2ab \geq -1$.
    replace h₁ : 2 * a * b ≥ -1 := by linarith

    -- Then $ab \geq -\frac{1}{2}$.
    replace h₁ : a * b ≥ -1 / 2 := by linarith

    -- Case 2: $ab < 0$.
    have h₁ : (a + b) ^ 2 > 0 := by positivity

    -- We can rewrite $(a+b)^2 > 0$ as $a^2+2ab+b^2 > 0$.
    replace h₁ : a ^ 2 + 2 * a * b + b ^ 2 > 0 := by linarith

    -- We can rewrite $a^2+b^2=1$ as $a^2+b^2-1=0$.
    rw [show a ^ 2 + b ^ 2 - 1 = 0 by linarith] at h₁

    -- Then $(a^2+b^2-1)+(2ab) > 0+0$,
    -- which simplifies to $1+2ab > 0$.
    replace h₁ : 1 + 2 * a * b > 0 := by linarith

    -- Then $2ab > -1$.
    replace h₁ : 2 * a * b > -1 := by linarith

    -- Then $ab > -\frac{1}{2}$.
    replace h₁ : a * b > -1 / 2 := by linarith

    -- In both cases, we have $ab \geq -\frac{1}{2}$.
    linarith

  -- In both cases, we have $-\frac{1}{2} \leq ab \leq \frac{1}{2}$.
  -- Then certainly $ab + \lvert a-b \rvert \leq 1$.
  linarith
```