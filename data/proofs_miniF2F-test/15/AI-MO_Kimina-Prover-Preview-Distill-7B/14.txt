-- We have $\lvert a \rvert \leq \sqrt{a^2+b^2}=1$ since $a^2+b^2 \geq a^2$.
  have : abs a ≤ 1 := by
    calc
      abs a ≤ Real.sqrt (a ^ 2 + b ^ 2) := by
        apply Real.sqrt_le_sqrt
        simp only [sq_nonneg, add_nonneg, abs_nonneg]
        apply add_le_add
        · exact sq_nonneg a
        · exact sq_nonneg b
      _ = Real.sqrt 1 := by
        rw [h₀]
        norm_num
      _ = 1 := Real.sqrt_one

  -- We have $\lvert b \rvert \leq \sqrt{a^2+b^2}=1$ since $a^2+b^2 \geq b^2$.
  have : abs b ≤ 1 := by
    calc
      abs b ≤ Real.sqrt (a ^ 2 + b ^ 2) := by
        apply Real.sqrt_le_sqrt
        simp only [sq_nonneg, add_nonneg, abs_nonneg]
        apply add_le_add
        · exact sq_nonneg a
        · exact sq_nonneg b
      _ = Real.sqrt 1 := by
        rw [h₀]
        norm_num
      _ = 1 := Real.sqrt_one

  have : a * b ≤ 1 := by
    by_cases h : 0 ≤ a * b
    · calc
        a * b ≤ 1 / 2 + a ^ 2 / 2 + b ^ 2 / 2 := by
          linarith [two_mul_le_add_sq (-a + b), h]
        _ = 1 / 2 + (a ^ 2 + b ^ 2) / 2 := by
          ring
        _ = 1 := by
          linarith
      linarith
    · linarith [abs_nonneg (a - b), h]

  cases' abs_cases (a - b) with h h <;> linarith

```