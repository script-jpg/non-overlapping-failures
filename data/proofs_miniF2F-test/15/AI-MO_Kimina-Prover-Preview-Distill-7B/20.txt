-- We divide into cases whether $a \geq b$ or $a < b$.
  cases' le_or_lt b a with h₁ h₁
  -- In the first case, we have $|a-b| = a-b$.
  · rw [abs_of_nonneg (by linarith)]
    -- Our inequality can be written as $ab + a - b \leq 1$.
    nlinarith [sq_nonneg (a - b), sq_nonneg (a + b - 1)]
  -- In the second case, we have $|a-b| = b-a$.
  · rw [abs_of_neg (by linarith)]
    -- Our inequality can be written as $ab + b - a \leq 1$.
    nlinarith [sq_nonneg (a - b), sq_nonneg (a - 1 - b)]
```