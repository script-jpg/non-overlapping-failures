-- Let $a$ and $b$ be real numbers.
  -- We need to show that $\frac{|a + b|}{1 + |a + b|} \leq \frac{|a|}{1 + |a|} + \frac{|b|}{1 + |b|}$.

  set x := abs a
  set y := abs b
  set z := abs (a + b)

  -- We have $0 \leq x, y, z$.
  have hx : 0 ≤ x := abs_nonneg a
  have hy : 0 ≤ y := abs_nonneg b
  have hz : 0 ≤ z := abs_nonneg (a + b)

  -- We have $0 \leq 1 + x, 1 + y, 1 + z$.
  have hx' : 0 < 1 + x := by
    linarith
  have hy' : 0 < 1 + y := by
    linarith
  have hz' : 0 < 1 + z := by
    linarith

  -- We have $1 + x + y \geq z$ by the triangle inequality.
  have hxy : x + y ≥ z := by
    have h : abs a + abs b ≥ abs (a + b) := abs_add a b
    gcongr
    gcongr
    linarith

  -- We have $1 + x + y \geq 0$.
  have hxy' : 0 ≤ 1 + x + y := by
    linarith

  -- We have $1 + z \geq 1$.
  have hz'z : 1 + z ≥ 1 := by
    linarith

  -- We have $1 + x \geq 1$.
  have hx'' : 1 + x ≥ 1 := by
    linarith

  -- We have $1 + y \geq 1$.
  have hy'' : 1 + y ≥ 1 := by
    linarith

  -- We have $z \geq 0$.
  have hz'' : z ≥ 0 := by
    linarith

  -- We have $1 + x \geq 0$.
  have hx''' : 1 + x ≥ 0 := by
    linarith

  -- We have $1 + y \geq 0$.
  have hy''' : 1 + y ≥ 0 := by
    linarith

  -- We have $1 + z \geq 0$.
  have hz''' : 1 + z ≥ 0 := by
    linarith

  -- Since $1 + x + y \geq z$ and $1 + x \geq 0$, $1 + y \geq 0$, $1 + z \geq 0$,
  -- we have $\frac{z}{1 + x + y} \leq \frac{z}{1 + x} + \frac{z}{1 + y}$.
  have hge : z / (1 + x + y) ≤ z / (1 + x) + z / (1 + y) := by
    refine le_of_mul_le_mul_left?_ (by linarith)
    rw [div_mul_eq_mul_div, div_mul_eq_mul_div, div_self (by linarith), mul_one]
    have hz'z' : z * (1 + x) * (1 + y) ≥ 0 := by
      exact mul_nonneg (by linarith) (mul_nonneg (by linarith) (by linarith))
    have hxy'z' : (x + y) * z ≥ 0 := by
      exact mul_nonneg (by linarith) (by linarith)
    linarith

  -- Since $1 + x \geq 0$, $1 + y \geq 0$, $1 + z \geq 0$,
  -- we have $\frac{x}{1 + x} + \frac{y}{1 + y} \geq \frac{z}{1 + z}$.
  have hle : x / (1 + x) + y / (1 + y) ≤ z / (1 + z) := by
    have hz'z' : 1 + z > 0 := by
      linarith
    have hx'' : 1 + x > 0 := by
      linarith
    have hy'' : 1 + y > 0 := by
      linarith
    refine le_of_mul_le_mul_right?_ (by linarith)
    rw [div_mul_eq_mul_div, div_mul_eq_mul_div, div_self (by linarith), mul_one]
    have hz'z' : z * (1 + x) * (1 + y) ≥ 0 := by
      exact mul_nonneg (by linarith) (mul_nonneg (by linarith) (by linarith))
    have hxy'z' : (x + y) * z ≥ 0 := by
      exact mul_nonneg (by linarith) (by linarith)
    linarith

  -- Since $\frac{z}{1 + x + y} \leq \frac{z}{1 + x} + \frac{z}{1 + y}$ and
  -- $\frac{x}{1 + x} + \frac{y}{1 + y} \leq \frac{z}{1 + z}$,
  -- we have $\frac{|a + b|}{1 + |a + b|} \leq \frac{|a|}{1 + |a|} + \frac{|b|}{1 + |b|}$.
  rw [←show z = x + y by exact abs_add a b, div_self (by linarith), div_self (by linarith),
    div_self (by linarith), div_self (by linarith), div_self (by linarith)]
  exact le_trans hle hge

```