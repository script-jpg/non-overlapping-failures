-- Start by computing f(4)
  have h1 : f 4 = -1 := by
    -- 4 is even, so use the even case of f
    rw [h₁ 4 (by decide)]
    -- Compute 4^2 - 4*4 - 1 = 16 - 16 - 1 = -1
    norm_num

  -- Since f(4) = -1, we have f(f(4)) = f(-1)
  have h2 : f (f 4) = f (-1) := by rw [h1]

  -- -1 is odd, so use the odd case of f to compute f(-1)
  have h3 : f (-1) = (-1)^2 := by rw [h₀ (-1) (by decide)]
  norm_num at h3

  -- Now f(f(4)) = f(-1) = 1, so we need to compute f(1)
  rw [h2, h3]

  -- 1 is odd, so use the odd case of f to compute f(1)
  have h4 : f 1 = 1^2 := by rw [h₀ 1 (by decide)]
  norm_num at h4

  -- f(f(f(4))) = f(f(-1)) = f(1) = 1^2 = 1
  rw [h4]

  -- Finally, f(f(f(f(4))) = f(f(1)) = f(1) = 1
  exact h4
```