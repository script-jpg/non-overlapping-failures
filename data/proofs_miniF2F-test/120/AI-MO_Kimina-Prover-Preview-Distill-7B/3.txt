-- We begin by manually calculating the first few values of $f$ to spot a pattern.

  -- Since $4$ is even, we use the second case of the function definition: $f(4) = 4^2 - 4 \cdot 4 - 1 = 16 - 16 - 1 = -1$.
  have h4 : f 4 = -1 := by
    rw [h₁ 4 (by decide)]
    norm_num

  -- Now, we calculate $f(f(4)) = f(-1)$. Since $-1$ is odd, we use the first case: $f(-1) = (-1)^2 = 1$.
  have h5 : f (f 4) = 1 := by
    rw [h4]
    rw [h₀ (-1) (by decide)]
    norm_num

  -- Next, we calculate $f(f(f(4))) = f(1)$. Since $1$ is odd, we use the first case: $f(1) = 1^2 = 1$.
  have h6 : f (f (f 4)) = 1 := by
    rw [h5]
    rw [h₀ 1 (by decide)]
    norm_num

  -- Then, we calculate $f(f(f(f(4))) = f(1)$. Since $1$ is odd, we use the first case: $f(1) = 1^2 = 1$.
  have h7 : f (f (f (f 4))) = 1 := by
    rw [h6]
    rw [h₀ 1 (by decide)]
    norm_num

  -- Finally, we calculate $f(f(f(f(f(4))))) = f(1)$. Since $1$ is odd, we use the first case: $f(1) = 1^2 = 1$.
  rw [h7]
  rw [h₀ 1 (by decide)]
  norm_num

```