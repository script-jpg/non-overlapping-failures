/-
  To solve the problem, we need to evaluate the function \( f \) composed multiple times with the given conditions. The function \( f \) is defined piecewise:
  \[ f(n) = \begin{cases} 
  n^2 & \text{if } n \text{ is odd}, \\
  n^2 - 4n - 1 & \text{if } n \text{ is even}.
  \end{cases} \]
  We need to find \( f(f(f(f(f(4))))) \).
  1. **Evaluate \( f(4) \):**
     - Since 4 is even, by the definition of \( f \):
       \[ f(4) = 4^2 - 4 \cdot 4 - 1 = 16 - 16 - 1 = -1. \]
  2. **Evaluate \( f(f(4)) \):**
     - Since \( f(4) = -1 \) is odd, by the definition of \( f \):
       \[ f(-1) = (-1)^2 = 1. \]
  3. **Evaluate \( f(f(f(4))) \):**
     - Since \( f(f(4)) = 1 \) is odd, by the definition of \( f \):
       \[ f(1) = 1^2 = 1. \]
  4. **Evaluate \( f(f(f(f(4)))) \):**
     - Since \( f(f(f(4))) = 1 \) is odd, by the definition of \( f \):
       \[ f(1) = 1^2 = 1. \]
  5. **Evaluate \( f(f(f(f(f(4))))) \):**
     - Since \( f(f(f(f(4)))) = 1 \) is odd, by the definition of \( f \):
       \[ f(1) = 1^2 = 1. \]
  Thus, \( f(f(f(f(f(4))))) = 1 \).
  -/
  -- Since 4 is even, we use the second case of the function definition.
  have h : Even 4 := even_iff_two_dvd.2 <| by norm_num
  -- Evaluate f(4) using the definition for even numbers.
  have h₂ : f 4 = 4 ^ 2 - 4 * 4 - 1 := by apply h₁ <;> assumption
  rw [h₂]
  -- Simplify the expression to get the value of f(4).
  norm_num
```