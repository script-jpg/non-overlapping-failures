/-
  Given two real numbers \(a\) and \(b\) such that \(a^2 + b^2 = 1\), we need to show that \(ab + (a - b) \leq 1\). We start by considering the non-negativity of the squares of certain expressions involving \(a\) and \(b\). Specifically, we use the fact that the square of any real number is non-negative. We then use these inequalities to derive the desired result.
  1. First, we note that the square of \(a + b\) is non-negative:
     \[
     (a + b)^2 \geq 0
     \]
     Expanding this, we get:
     \[
     a^2 + 2ab + b^2 \geq 0
     \]
     Since \(a^2 + b^2 = 1\), this simplifies to:
     \[
     1 + 2ab \geq 0 \implies 2ab \geq -1 \implies ab \geq -\frac{1}{2}
     \]
  2. Next, we consider the square of \(a - b\). Since the square of any real number is non-negative, we have:
     \[
     (a - b)^2 \geq 0
     \]
     Expanding this, we get:
     \[
     a^2 - 2ab + b^2 \geq 0
     \]
     Again using \(a^2 + b^2 = 1\), this simplifies to:
     \[
     1 - 2ab \geq 0 \implies 2ab \leq 1 \implies ab \leq \frac{1}{2}
     \]
  3. Combining the inequalities \(ab \geq -\frac{1}{2}\) and \(ab \leq \frac{1}{2}\), we conclude that:
     \[
     ab \leq \frac{1}{2}
     \]
  4. Finally, we use the fact that \(ab \leq \frac{1}{2}\) and \(a^2 + b^2 = 1\) to show that:
     \[
     ab + (a - b) \leq 1
     \]
     This completes the proof.
  -/
  -- We use the non-negativity of squares to derive inequalities.
  have h₁ := sq_nonneg (a + b) -- h₁ : (a + b)^2 ≥ 0
  have h₂ := sq_nonneg (a - b) -- h₂ : (a - b)^2 ≥ 0
  -- Simplify the inequalities using the given condition a^2 + b^2 = 1.
  simp [sq, mul_add, mul_sub, sub_mul, add_mul] at h₁ h₂
  -- Use linear arithmetic to combine the inequalities and derive the desired result.
  linarith [sq_nonneg (a + b), sq_nonneg (a - b)]
```