-- We start by observing that (a - b) ^ 2 is nonnegative.
  have : 0 ≤ (a - b) ^ 2 := by
    exact sq_nonneg (a - b)

  -- Expanding (a - b) ^ 2 and rearranging gives us a*b ≤ 1/2.
  have h₁ : a * b ≤ 1 / 2 := by
    calc
      a * b = (2 * a * b) / 2 := by simp
      _ = ((a + b) ^ 2 - (a - b) ^ 2) / 2 := by ring
      _ ≤ ((a + b) ^ 2 - 0) / 2 := by
        apply div_le_div_right
        norm_num
        exact this
      _ = ((a + b) ^ 2) / 2 := by simp
      _ ≤ (1 ^ 2) / 2 := by
        apply div_le_div_right
        rw [div_pow]
        apply pow_le_pow_left₀
        linarith
        norm_num
      _ = 1 / 2 := by simp

  -- Rearranging gives us a*b + (a - b) ≤ 1/2 + 1/2 = 1, as required.
  calc
    a * b + (a - b) ≤ 1 / 2 + (a - b) := by
      apply add_le_add_right
      exact h₁
    _ ≤ 1 / 2 + 1 / 2 := by
      apply add_le_add_right
      linarith
    _ = 1 := by simp
```