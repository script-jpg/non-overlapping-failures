-- We show that $(a-b)^2\geq 0$, which is obviously true.
  have h₁ : (a - b) ^ 2 ≥ 0 := by
    exact sq_nonneg (a - b)

  -- We rearrange the inequality $(a-b)^2\geq 0$ to get $2ab\leq a^2+b^2$.
  replace h₁ : 2 * a * b ≤ a ^ 2 + b ^ 2 := by
    linarith only [h₁]

  -- We substitute $1$ for $a^2+b^2$ according to our hypothesis.
  rw [h₀] at h₁

  -- We rearrange the inequality $2ab\leq 1$ to get $ab\leq 1/2$.
  replace h₁ : a * b ≤ 1 / 2 := by
    linarith only [h₁]

  -- We rearrange the inequality $ab\leq 1/2$ to get $2ab-1\leq 0$.
  replace h₁ : 2 * a * b - 1 ≤ 0 := by
    linarith only [h₁]

  -- We add $(a-b)$ to the inequality $2ab-1\leq 0$.
  have h₂ : 2 * a * b - 1 + (a - b) ≤ 0 + (a - b) := by
    exact add_le_add_right h₁ (a - b)

  -- We rearrange the inequality to the desired form.
  linarith only [h₂]
```