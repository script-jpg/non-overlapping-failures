-- The real number $a$ is in the interval $[-1, 1]$.
  have ha : a ∈ Set.Icc (-1) 1 := by
    refine ⟨?_,?_⟩
    · nlinarith [sq_nonneg a, sq_nonneg b, h₀]
    · nlinarith [sq_nonneg a, sq_nonneg b, h₀]

  -- The real number $b$ is in the interval $[-1, 1]$.
  have hb : b ∈ Set.Icc (-1) 1 := by
    refine ⟨?_,?_⟩
    · nlinarith [sq_nonneg a, sq_nonneg b, h₀]
    · nlinarith [sq_nonneg a, sq_nonneg b, h₀]

  -- The sum of the squares of the numbers $a + b$ and $a - b$ is $2$.
  have h₀ : (a + b) ^ 2 + (a - b) ^ 2 = 2 := by
    ring_nf
    nlinarith [sq_nonneg a, sq_nonneg b, h₀]

  -- The square of the number $a + b$ is less than or equal to $2$.
  have h₁ : (a + b) ^ 2 ≤ 2 := by
    nlinarith [sq_nonneg (a - b), h₀]

  -- The number $a + b$ is less than or equal to $\sqrt{2}$.
  have h₂ : a + b ≤ √2 := by
    apply Real.le_sqrt_of_sq_le
    exact h₁

  -- The number $a - b$ is less than or equal to $\sqrt{2}$.
  have h₃ : a - b ≤ √2 := by
    have h₃ : (a - b) ^ 2 ≤ 2 := by
      nlinarith [sq_nonneg (a + b), h₀]
    apply Real.le_sqrt_of_sq_le
    exact h₃

  -- The product $ab + (a - b)$ is less than or equal to $1$.
  nlinarith [sq_nonneg (a + b - √2), sq_nonneg (b - 1), Real.sq_sqrt (show 0 ≤ 2 from (by norm_num))]```