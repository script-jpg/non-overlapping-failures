-- We have $(a-b)^2\geq 0$.
  have : (a - b) ^ 2 ≥ 0 := by
    exact sq_nonneg (a - b)

  -- We have $(a+b)^2\geq 0$.
  have : (a + b) ^ 2 ≥ 0 := by
    exact sq_nonneg (a + b)

  -- We have $a^2+b^2=1$.
  have h₁ : a ^ 2 + b ^ 2 = 1 := h₀

  -- We have $a^2+b^2-2ab=1-2ab$.
  have h₂ : a ^ 2 + b ^ 2 - 2 * (a * b) = 1 - 2 * (a * b) := by
    rw [h₁]
  
  -- We have $a^2+b^2+2ab=1+2ab$.
  have h₃ : a ^ 2 + b ^ 2 + 2 * (a * b) = 1 + 2 * (a * b) := by
    rw [h₁]
  
  nlinarith


/-- Let $a$ and $b$ be two real numbers such that $a^2+b^2=1$. Show that $ab+(a-b)\leq 1$.-/

theorem algebra_sqineq_unitcircatbpamblt1' (a b : ℝ) (h₀ : a ^ 2 + b ^ 2 = 1) :
    a * b - (a - b) ≤ 1 := by
  nlinarith [sq_nonneg (a - b), sq_nonneg (a + b), h₀]


/-- Let $a$ and $b$ be two real numbers such that $a^2+b^2=1$. Show that $ab+(a-b)\leq 1$.-/

theorem algebra_sqineq_unitcircatbpamblt1'' (a b : ℝ) (h₀ : a ^ 2 + b ^ 2 = 1) :
    a * b + (a - b) ≤ 1 ∧ a * b - (a - b) ≤ 1 := by
  constructor <;> nlinarith [sq_nonneg (a - b), sq_nonneg (a + b), h₀]
```