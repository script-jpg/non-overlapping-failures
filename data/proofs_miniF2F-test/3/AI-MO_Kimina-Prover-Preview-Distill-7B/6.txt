-- Compute the product of all positive odd integers less than 10000
  -- Odd integers less than 10000 are $1, 3, 5,..., 9999$
  -- We can express this as $\prod_{k=0}^{4999} (2k + 1)$
  have h1 : Finset.prod (Finset.filter (fun x => ¬Even x) (Finset.range 10000)) (id : ℕ → ℕ) =
    ∏ k ∈ Finset.range 5000, (2 * k + 1) := by
    -- filtered Finset.range 10000 to get odd numbers
    have : Finset.filter (fun x => ¬Even x) (Finset.range 10000) = Finset.range 5000.map (fun x => 2 * x + 1) := by
      ext x
      simp [Finset.mem_filter, Finset.mem_range, Nat.even_iff]
      omega
    rw [this]
    simp [Finset.prod_map]
    ring_nf

  rw [h1]
  have h2 : ∀ k : ℕ, (2 * k + 1) = (2 ^ k * (2 * (k + 1) - 1)) / 2 := by
    intro k
    -- express $2k + 1$ as $(2 ^ k * (2 * (k + 1) - 1)) / 2$
    -- this allows us to telescope the product
    cases k
    · simp
    · rename_i k
      ring_nf
      rw [show 2 ^ (k + 1) = 2 ^ k * 2 by ring]
      simp
      ring

  -- telescope the product to get $\frac{10000!}{2^{5000} \cdot 5000!}$
  have h3 : ∏ k ∈ Finset.range 5000, (2 * k + 1) = 10000! / (2 ^ 5000 * 5000!) := by
    rw [Finset.prod_range_succ']
    -- deal with the last term $2 * 4999 + 1 = 9999 = 2 * (5000 - 1) + 1$
    -- This is a special case since we index from 0.
    · norm_num
    · simp_rw [h2]
      -- This is the core of the proof, but understanding this requires some algebraic manipulation.
      -- We will explain it step by step.
      -- First, write out what the product is:
      -- $\prod_{k=0}^{4999} (2k + 1) = \frac{10000!}{2^{5000} \cdot 5000!}$
      -- The left hand side is the product of all odd numbers from 0 to 10000
      -- The right hand side is the desired result. To prove this, we will show that
      -- $\prod_{k=0}^{4999} (2k + 1) = \frac{10000!}{2^{5000} \cdot 5000!}$ by
      -- $\prod_{k=0}^{4999} (2k + 1) = \prod_{k=0}^{4999} \frac{2^{k} \cdot (2 \cdot (k + 1) - 1)}{2}$
      -- This is exactly the form expressed in h2.
      -- Then we have $\prod_{k=0}^{4999} \frac{2^{k} \cdot (2 \cdot (k + 1) - 1)}{2} = \frac{10000!}{2^{5000} \cdot 5000!}$
      -- This is because
      -- $\prod_{k=0}^{4999} 2^{k} = 2^{0 + 1 + 2 + \cdots + 4999} = 2^{\frac{4999 \cdot 5000}{2}} = 2^{1250 \cdot 4999}$
      -- $\prod_{k=0}^{4999} (2 \cdot (k + 1) - 1) = \prod_{k=0}^{4999} (2k + 1)$
      -- $\prod_{k=0}^{4999} \frac{2^{k} \cdot (2 \cdot (k + 1) - 1)}{2} = \frac{\prod_{k=0}^{4999} 2^{k} \cdot \prod_{k=0}^{4999} (2 \cdot (k + 1) - 1)}{2^{5000}}$
      -- $= \frac{2^{1250 \cdot 4999} \cdot \prod_{k=0}^{4999} (2 \cdot (k + 1) - 1)}{2^{5000}}$
      -- $= \frac{2^{1250 \cdot 4999 - 5000} \cdot \prod_{k=0}^{4999} (2 \cdot (k + 1) - 1)}{1}$
      -- $\prod_{k=0}^{4999} (2 \cdot (k + 1) - 1) = \prod_{k=0}^{4999} (2 \cdot (k + 1) - 1) = \prod_{k=1}^{5000} (2k - 1) = \frac{10000!}{2^{5000} \cdot 5000!}$
      -- So overall we have
      -- $\prod_{k=0}^{4999} \frac{2^{k} \cdot (2 \cdot (k + 1) - 1)}{2} = \frac{10000!}{2^{5000} \cdot 5000!}$
      -- This completes our proof.
      norm_num [Finset.prod_range_succ]
      <;> native_decide

  rw [h3]
```