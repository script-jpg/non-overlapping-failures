-- Notice that if we increase any of the exponents in the prime factorization of $n$ by $1$, we increase the value of $f(n)$.
  have h₂ : ∀ n, 0 < n → ∀ k ∈ Nat.divisors n, 1 ≤ k → (Nat.divisors n).card / n ^ ((1 : ℝ) / 3) < (Nat.divisors (n * k)).card / (n * k) ^ ((1 : ℝ) / 3) := by
    intro n hn k hk hk'
    rw [Nat.card_divisors]
    simp
    have hk'' : 0 < k := by exact Nat.pos_of_ne_zero hk
    have hn' : 0 < n * k := by exact Nat.mul_pos hn hk''
    have h₃ : (n * k) ^ ((1 : ℝ) / 3) = n ^ ((1 : ℝ) / 3) * k ^ ((1 : ℝ) / 3) := by
      rw [Real.mul_rpow]
      · rw [Nat.cast_mul]
      · exact hn'
      · exact hk''
    rw [h₃, div_mul]
    rw [Nat.card_divisors] at h₃
    simp at h₃
    rw [h₃]
    replace h₃ : n ^ ((1 : ℝ) / 3) * (k ^ (1 / 3 : ℝ) * (1 / n ^ ((1 : ℝ) / 3) * (1 / k ^ ((1 : ℝ) / 3)) ^ ((1 : ℝ) / 3)) ^ ((1 : ℝ) / 3)) = n ^ ((1 : ℝ) / 3) * (k ^ (1 / 3 : ℝ) * ((1 / n ^ ((1 : ℝ) / 3)) ^ ((1 : ℝ) / 3) * ((1 / k ^ ((1 : ℝ) / 3)) ^ ((1 : ℝ) / 3)) ^ ((1 : ℝ) / 3)) := by
      rw [mul_assoc, Real.rpow_add]
      · rw [Nat.cast_mul]
      · rw [Nat.cast_mul]
      · norm_num
      · exact hn'
      · simp
      · exact hk''
    rw [h₃]
    rw [mul_rpow, ← mul_assoc, mul_comm]
    replace h₃ : (1 / n ^ ((1 : ℝ) / 3) * (1 / k ^ ((1 : ℝ) / 3)) ^ ((1 : ℝ) / 3)) ^ ((1 : ℝ) / 3) = (1 / n ^ ((1 : ℝ) / 3)) ^ ((1 : ℝ) / 3) * (1 / k ^ ((1 : ℝ) / 3)) ^ ((1 : ℝ) / 3) * (1 / n ^ ((1 : ℝ) / 3)) ^ ((1 : ℝ) / 3) * (1 / k ^ ((1 : ℝ) / 3)) ^ ((1 : ℝ) / 3) := by
      rw [← pow_mul]
      · simp
      · norm_num
      · simp
      · exact hn'
      · simp
      · exact hk''
    rw [h₃]
    rw [mul_assoc, mul_comm]
    simp
    have h₄ : (1 / n ^ ((1 : ℝ) / 3)) ^ ((1 : ℝ) / 3) * (1 / n ^ ((1 : ℝ) / 3)) ^ ((1 : ℝ) / 3) = (1 / n ^ ((1 : ℝ) / 3)) ^ (2 : ℝ) / 2 := by
      rw [← Real.rpow_add]
      · simp
      · norm_num
      · exact hn'
    rw [h₄]
    have h₅ : (1 / k ^ ((1 : ℝ) / 3)) ^ ((1 : ℝ) / 3) * (1 / k ^ ((1 : ℝ) / 3)) ^ ((1 : ℝ) / 3) = (1 / k ^ ((1 : ℝ) / 3)) ^ (2 : ℝ) / 2 := by
      rw [← Real.rpow_add]
      · simp
      · norm_num
      · exact hk''
    rw [h₅]
    rw [div_mul_div_comm]
    have h₆ : ((1 : ℝ) / n ^ ((1 : ℝ) / 3)) ^ (2 : ℝ) * ((1 : ℝ) / k ^ ((1 : ℝ) / 3)) ^ (2 : ℝ) = (1 / n ^ ((1 : ℝ) / 3) * (1 / k ^ ((1 : ℝ) / 3))) ^ (2 : ℝ) := by
      rw [← mul_rpow]
      · norm_num
      · exact hn'
      · exact hk''
    rw [h₆]
    suffices : 0 < (((1 : ℝ) / n ^ ((1 : ℝ) / 3) * (1 / k ^ ((1 : ℝ) / 3))) ^ (2 : ℝ) * (1 / n ^ ((1 : ℝ) / 3) * (1 / k ^ ((1 : ℝ) / 3))) ^ ((1 : ℝ) / 3) * 2 ^ ((1 : ℝ) / 3) * ((1 : ℝ) / n ^ ((1 : ℝ) / 3) * (1 / k ^ ((1 : ℝ) / 3))) ^ (1 / 3 * 2))
    · linarith
    positivity

  -- It is easiest to increase the smallest exponents in the prime factorization. Let $p_1, p_2,...$ be the primes such that the exponent of $p_i$ in the prime factorization of $n$ is positive. If $p_1 ^ c_1 * p_2 ^ c_2 *... * p_k ^ c_k$ is the prime factorization of $n$, then $f(n) = (c_1 + 1)(c_2 + 1)...(c_k + 1) / n ^ {1 / 3}$. If we increase $n$'s prime factorization by one power of $p_i$, we get $(c_1 + 1)(c_2 + 1)...(c_i + 2)...(c_k + 1) / n ^ {1 / 3} * p_i / n ^ {1 / 3} = (c_1 + 1)(c_2 + 1)...(c_i + 2)...(c_k + 1) / n ^ {1 / 3} * (1 + 1 / (c_i + 1)) * (1 + 1 / (c_i + 1)) ^ {1 / 3}$. This is greater than $f(n)$ if $1 < (1 + 1 / (c_i + 1)) * (1 + 1 / (c_i + 1)) ^ {1 / 3}$. We can verify that this is true for $1 < c_i$. And increasing $n$'s prime factorization by one power of $2$ gives $f(n) = (c_1 + 1)(c_2 + 1)(c_3 + 1)...(c_k + 1) / n ^ {1 / 3} * 2 / n ^ {1 / 3} = (c_1 + 1)(c_2 + 1)(c_3 + 1)...(c_k + 1) / n ^ {1 / 3} * (1 + 1 / 1) * (1 + 1 / 1) ^ {1 / 3}$. This is greater than $f(n)$.
  have h₃ : ∀ n, 0 < n → 0 < (Nat.divisors n).card / n ^ ((1 : ℝ) / 3) → ∀ p ∈ Nat.divisors n, 1 ≤ p → (Nat.divisors n).card / n ^ ((1 : ℝ) / 3) < (Nat.divisors (n * p)).card / (n * p) ^ ((1 : ℝ) / 3) := by
    intro n hn hnp p hp hp'
    specialize h₂ n hn p hp hp'
    exact h₂

  -- So we want to increase the exponents of all of $n$'s prime factors by one power. The catch is that we can't, as $n$ is a positive integer, increase all of $n$'s prime factors by one power simultaneously. It is, however, possible to increase all of $n$'s prime factors by one power if $n$ is a square. This is because if $n = p_1 ^ {2c_1} * p_2 ^ {2c_2} *... * p_k ^ {2c_k}$, increasing each of $n$'s prime factors by one power gives $p_1 ^ {2c_1 + 1} * p_2 ^ {2c_2 + 1} *... * p_k ^ {2c_k + 1} = n * p_1 * p_2 *... * p_k$. And $(p_1 * p_2 *... * p_k) ^ 3 = p_1 ^ 3 * p_2 ^ 3 *... * p_k ^ 3$. And $n * p_1 * p_2 *... * p_k / n ^ {1 / 3} = (p_1 * p_2 *... * p_k) ^ 3 / n ^ {1 / 3} = (p_1 * p_2 *... * p_k) ^ 2 / n ^ {1 / 3} * (p_1 * p_2 *... * p_k) / n ^ {1 / 3}$. We know that $p_1 * p_2 *... * p_k / n ^ {1 / 3} > 1$ because $p_1 * p_2 *... * p_k > 1$ and $n ^ {1 / 3} > 0$. And $(p_1 * p_2 *... * p_k) ^ 2 / n ^ {1 / 3} > 1$ because $(p_1 * p_2 *... * p_k) ^ 2 > 1$ and $n ^ {1 / 3} > 0$. So $f(n) = (p_1 * p_2 *... * p_k) ^ 2 / n ^ {1 / 3} * (p_1 * p_2 *... * p_k) / n ^ {1 / 3} > 1 * 1 = 1$.
  have h₄ : ∀ n, 0 < n → (Nat.divisors n).card / n ^ ((1 : ℝ) / 3) < 2 * (Nat.divisors (n * 2)).card / (n * 2) ^ ((1 : ℝ) / 3) := by
    intro n hn
    specialize h₃ n hn
    specialize h₃ 2 (Nat.two_dvd_ne_zero n) (by positivity)
    exact h₃
  have h₅ : ∀ n, 0 < n → (Nat.divisors n).card / n ^ ((1 : ℝ) / 3) < (Nat.divisors (n * 2 * 2)).card / (n * 2 * 2) ^ ((1 : ℝ) / 3) := by
    intro n hn
    specialize h₄ n hn
    specialize h₄ (n * 2) (by positivity)
    linarith

  -- Note that $f(2 ^ 8) = 9 / 8 = 1.125$. And $f(2 ^ 7 * 3 ^ 5) = (2 * 6) / (2 ^ 7 * 3 ^ 5) ^ {1 / 3} = 12 / (12 ^ 3 / 2 ^ 3) ^ {1 / 3} = 12 / ((12 / 2) ^ 3) ^ {1 / 3} = 12 / 6 = 2$.
  have h₆ : ∀ n, 0 < n → n ≠ 2 ^ 8 → (Nat.divisors n).card / n ^ ((1 : ℝ) / 3) < (Nat.divisors (n * 2 ^ 7 * 3 ^ 5)).card / (n * 2 ^ 7 * 3 ^ 5) ^ ((1 : ℝ) / 3) := by
    intro n hn hne
    specialize h₄ n hn
    have h₇ : 0 < 2 ^ 7 * 3 ^ 5 := by positivity
    have h₈ : n ≠ 2 ^ 7 * 3 ^ 5 := by
      intro h
      apply hne
      linarith
    specialize h₄ (n * 2 ^ 7 * 3 ^ 5) h₇
    linarith

  -- Note that $f(2 ^ 7 * 3 ^ 5 * 5 ^ 4) = (2 * 6 * 5) / (2 ^ 7 * 3 ^ 5 * 5 ^ 4) ^ {1 / 3} = 60 / (60 ^ 3 / 2 ^ 3 * 3 ^ 3 * 5 ^ 3) ^ {1 / 3} = 60 / ((60 / 2) ^ 3) ^ {1 / 3} = 60 / 30 = 2$.
  have h₇ : ∀ n, 0 < n → n ≠ 2 ^ 7 * 3 ^ 5 * 5 ^ 4 → (Nat.divisors n).card / n ^ ((1 : ℝ) / 3) < (Nat.divisors (n * 2 ^ 7 * 3 ^ 5 * 5 ^ 4)).card / (n * 2 ^ 7 * 3 ^ 5 * 5 ^ 4) ^ ((1 : ℝ) / 3) := by
    intro n hn hne
    specialize h₆ n hn
    have h₉ : 0 < 2 ^ 7 * 3 ^ 5 * 5 ^ 4 := by positivity
    have h₁₀ : n ≠ 2 ^ 7 * 3 ^ 5 * 5 ^ 4 := by
      intro h
      apply hne
      linarith
    specialize h₆ (n * 2 ^ 7 * 3 ^ 5 * 5 ^ 4) h₉
    linarith

  -- We will show that $N = 2 ^ 7 * 3 ^ 5 * 5 ^ 4$.
  have h₈ : N = 2 ^ 7 * 3 ^ 5 * 5 ^ 4 := by
    -- Note that $f(2 ^ 7 * 3 ^ 5 * 5 ^ 4) > f(2 ^ 8)$: $f(2 ^ 7 * 3 ^ 5 * 5 ^ 4) = 2^2 / (2 ^ 21 * 3 ^ 15 * 5 ^ 12) ^ {1 / 3} = 4 / (2^7 * 3^5 * 5^4) = 4 / 2^7 * 1 / (3^5 * 5^4) = 4 / 128 * 1 / (243 * 625) = 1 / 32 * 1 / 151875 = 1 / 4859250$, and $f(2 ^ 8) = 9 / 8 = 1.125$.
  have h₈ : N = 2 ^ 7 * 3 ^ 5 * 5 ^ 4 := by
    by_contra! h₈
    rcases lt_or_gt_of_ne h₈ with h₈ | h₈
    · specialize h₁ (2 ^ 8) (by positivity) h₈
      have h₉ : 2 ^ 8 ≠ 2 ^ 7 * 3 ^ 5 * 5 ^ 4 := by
        norm_num
      specialize h₁ (2 ^ 7 * 3 ^ 5 * 5 ^ 4) (by positivity) h₉
      linarith
    · specialize h₁ (2 ^ 7 * 3 ^ 5 * 5 ^ 4) (by positivity) h₈
      have h₉ : 2 ^ 7 * 3 ^ 5 * 5 ^ 4 ≠ 2 ^ 7 * 3 ^ 5 * 5 ^ 4 := by
        omega
      specialize h₁ (2 ^ 7 * 3 ^ 5 * 5 ^ 4) h₉
      linarith
  -- We will show that $f(N) > f(2 ^ 7 * 3 ^ 5 * 5 ^ 4)$, and that $f(2 ^ 7 * 3 ^ 5 * 5 ^ 4) > f(n)$ for all $n \ne 2 ^ 7 * 3 ^ 5 * 4$.
  have h₉ : ∀ n, 0 < n → (Nat.divisors n).card / n ^ ((1 : ℝ) / 3) < f N := by
    intro n hn
    rcases lt_or_gt_of_ne (h₁ n hn h₈) with h₉ | h₉
    · specialize h₇ n hn h₉
      linarith
    · exact h₉

  have h₁₀ : ∀ n, n ≠ 2 ^ 7 * 3 ^ 5 * 5 ^ 4 → f n < f N := by
    intro n h₁₀
    specialize h₁ n (by positivity) h₁₀
    linarith

  -- We will show that $N = 2 ^ 7 * 3 ^ 5 * 5 ^ 4$ has exactly $792$ digits.
  have h₁₁ : Nat.digits 10 N = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1,