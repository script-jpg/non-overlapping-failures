-- Let $x = r^{\frac{1}{3}}$ and $y = \frac{1}{r^{\frac{1}{3}}}$, then we have that $x + y = 3$.
  let x := r ^ ((1 : ℝ) / 3)
  let y := 1 / r ^ ((1 : ℝ) / 3)
  have h : x + y = 3 := by
    exact h₀

  -- We can cube both sides of the equation $x + y = 3$ to get $x^3 + 3x^2y + 3xy^2 + y^3 = 27$.
  have h1 : x ^ 3 + 3 * x ^ 2 * y + 3 * x * y ^ 2 + y ^ 3 = 27 := by
    calc
      x ^ 3 + 3 * x ^ 2 * y + 3 * x * y ^ 2 + y ^ 3 = (x + y) ^ 3 := by ring
      _ = 3 ^ 3 := by rw [h]
      _ = 27 := by norm_num

  -- Notice that $x^3 = r$ and $y^3 = \frac{1}{r}$.
  have hx3 : x ^ 3 = r := by
    calc
      x ^ 3 = (r ^ ((1 : ℝ) / 3)) ^ (3 : ℝ) := by rfl
      _ = r ^ (((1 : ℝ) / 3) * 3) := by rw [Real.rpow_mul (by linarith)]; positivity
      _ = r ^ (1 : ℝ) := by norm_num
      _ = r := by simp
  have hy3 : y ^ 3 = 1 / r := by
    calc
      y ^ 3 = (1 / r ^ ((1 : ℝ) / 3)) ^ (3 : ℝ) := by rfl
      _ = 1 / (r ^ ((1 : ℝ) / 3)) ^ (3 : ℝ) := by field_simp
      _ = 1 / (r ^ (((1 : ℝ) / 3) * 3)) := by rw [Real.rpow_mul (by linarith)]; positivity
      _ = 1 / r ^ (1 : ℝ) := by norm_num
      _ = 1 / r := by simp

  -- So, we can get $x^3 + y^3 = r + \frac{1}{r}$.
  have h2 : x ^ 3 + y ^ 3 = r + 1 / r := by
    rw [hx3, hy3]
  
  -- From the equation $x^3 + 3x^2y + 3xy^2 + y^3 = 27$ and $x^3 + y^3 = r + \frac{1}{r}$, we get $3x^2y + 3xy^2 = 27 - (r + \frac{1}{r})$.
  have h3 : 3 * x ^ 2 * y + 3 * x * y ^ 2 = 27 - (r + 1 / r) := by
    linarith

  -- Notice that $x^2y + xy^2 = xy(x + y) = r^{\frac{1}{3}} \cdot \frac{1}{r^{\frac{1}{3}}} \cdot 3 = 3$.
  have h4 : x ^ 2 * y + x * y ^ 2 = 3 := by
    calc
      x ^ 2 * y + x * y ^ 2 = x * y * (x + y) := by ring
      _ = r ^ ((1 : ℝ) / 3) * (1 / r ^ ((1 : ℝ) / 3)) * 3 := by rfl
      _ = 3 := by field_simp [hx3, hy3]

  -- So, we can get $3 \times 3 = 27 - (r + \frac{1}{r})$.
  have h5 : 3 * 3 = 27 - (r + 1 / r) := by
    calc
      3 * 3 = 3 * (x ^ 2 * y + x * y ^ 2) := by rw [h4]
      _ = 3 * (3 : ℝ) := by nth_rw 1 [←h4]
      _ = 9 := by norm_num
      _ = 27 - 18 := by norm_num
      _ = 27 - (r + 1 / r) := by linarith

  -- Therefore, we have that $r + \frac{1}{r} = 18$.
  have h6 : r + 1 / r = 18 := by
    linarith

  -- Since $r + \frac{1}{r} = 18$, then $r \neq 0$.
  have hr : r ≠ 0 := by
    by_contra!
    rw [this] at h6
    norm_num at h6

  -- Notice that $(r + \frac{1}{r})^3 = r^3 + \frac{1}{r^3} + 3(r + \frac{1}{r})$.
  have h7 : (r + 1 / r) ^ 3 = r ^ 3 + 1 / r ^ 3 + 3 * (r + 1 / r) := by
    field_simp
    ring

  -- So, we can get $r^3 + \frac{1}{r^3} = (r + \frac{1}{r})^3 - 3(r + \frac{1}{r}) = 18^3 - 3 \times 18 = 5778$.
  calc
    r ^ 3 + 1 / r ^ 3 = (r + 1 / r) ^ 3 - 3 * (r + 1 / r) := by linarith
    _ = 18 ^ 3 - 3 * 18 := by rw [h6]
    _ = 5778 := by norm_num

```