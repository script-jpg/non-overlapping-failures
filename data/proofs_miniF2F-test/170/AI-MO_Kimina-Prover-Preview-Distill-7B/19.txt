-- First, we prove that $r \neq 0$.
  have hr : r ≠ 0 := by
    -- Contradiction is derived from the assumption $r = 0$.
    by_contra h
    rw [h] at h₀
    norm_num at h₀

  -- We have the following equalities:
  -- $(r^{\frac{1}{3}} + \frac{1}{r^{\frac{1}{3}}})^3 = r + \frac{1}{r} + 3(r^{\frac{2}{3}} + \frac{1}{r^{\frac{2}{3}}}) = 3^3 = 27$
  have h₁ : (r ^ ((1 : ℝ) / 3) + 1 / r ^ ((1 : ℝ) / 3)) ^ 3 = r + 1 / r + 3 * (r ^ ((2 : ℝ) / 3) + 1 / r ^ ((2 : ℝ) / 3)) := by
    field_simp
    ring_nf
    rw [Real.rpow_add, Real.rpow_add]
    · ring
    · norm_num
    · norm_num
    · rw [mul_assoc, Real.mul_rpow, Real.mul_rpow]
      ring
      norm_num
      norm_num
  have h₂ : (r ^ ((1 : ℝ) / 3) + 1 / r ^ ((1 : ℝ) / 3)) ^ 3 = 27 := by
    rw [h₀]
    norm_num

  -- By combining the two equalities above, we get $r + \frac{1}{r} = 27 - 3(r^{\frac{2}{3}} + \frac{1}{r^{\frac{2}{3}}})$.
  have h₃ : r + 1 / r = 27 - 3 * (r ^ ((2 : ℝ) / 3) + 1 / r ^ ((2 : ℝ) / 3)) := by
    linarith only [h₁, h₂]

  -- $(r^{\frac{2}{3}} + \frac{1}{r^{\frac{2}{3}}})^3 = r^2 + \frac{1}{r^2} + 3(r^{\frac{4}{3}} + \frac{1}{r^{\frac{4}{3}}}) = 27$
  have h₄ : (r ^ ((2 : ℝ) / 3) + 1 / r ^ ((2 : ℝ) / 3)) ^ 3 = r ^ 2 + 1 / r ^ 2 + 3 * (r ^ ((4 : ℝ) / 3) + 1 / r ^ ((4 : ℝ) / 3)) := by
    field_simp
    ring_nf
    rw [Real.rpow_add, Real.rpow_add]
    · ring
    · norm_num
    · norm_num
    rw [mul_assoc, Real.mul_rpow, Real.mul_rpow]
    ring
    norm_num
    norm_num
  have h₅ : (r ^ ((2 : ℝ) / 3) + 1 / r ^ ((2 : ℝ) / 3)) ^ 3 = 27 := by
    rw [h₀]
    norm_num

  -- By combining the two equalities above, we get $r^2 + \frac{1}{r^2} = 27 - 3(r^{\frac{4}{3}} + \frac{1}{r^{\frac{4}{3}}})$.
  have h₆ : r ^ 2 + 1 / r ^ 2 = 27 - 3 * (r ^ ((4 : ℝ) / 3) + 1 / r ^ ((4 : ℝ) / 3)) := by
    linarith only [h₄, h₅]

  -- Note that $r^3 + \frac{1}{r^3} = (r + \frac{1}{r})(r^2 + \frac{1}{r^2} - 1)$.
  have h₇ : r ^ 3 + 1 / r ^ 3 = (r + 1 / r) * (r ^ 2 + 1 / r ^ 2 - 1) := by
    field_simp
    ring

  -- To get the value of $r^3 + \frac{1}{r^3}$, we need to find the values of $(r^{\frac{2}{3}} + \frac{1}{r^{\frac{2}{3}}})$ and $(r^{\frac{4}{3}} + \frac{1}{r^{\frac{4}{3}}})$.
  -- $(r^{\frac{2}{3}} + \frac{1}{r^{\frac{2}{3}}})^3 = r^2 + \frac{1}{r^2} + 3(r^{\frac{4}{3}} + \frac{1}{r^{\frac{4}{3}}}) = 27$ and $r^2 + \frac{1}{r^2} = 27 - 3(r^{\frac{4}{3}} + \frac{1}{r^{\frac{4}{3}}})$.
  have h₈ : r ^ ((2 : ℝ) / 3) + 1 / r ^ ((2 : ℝ) / 3) = 3 := by
    have h₉ : r ^ ((2 : ℝ) / 3) + 1 / r ^ ((2 : ℝ) / 3) > 0 := by
      -- The proof is similar to the one for $r + \frac{1}{r} > 0$.
      have h₁₀ : r ^ ((2 : ℝ) / 3) > 0 := by
        apply Real.rpow_pos_of_pos
        by_contra h
        have : r ≤ 0 := by linarith
        have : r < 0 := by linarith
        have : ¬ r ^ ((2 : ℝ) / 3) ≥ 0 := by
          suffices r ^ (1 : ℝ) < r ^ ((2 : ℝ) / 3) by
            nlinarith
          suffices 0 < r ^ ((2 : ℝ) / 3 - 1) by
            nlinarith
          rw [show ((2 : ℝ) / 3 - 1) = (-1 : ℝ) / 3 by ring]
          rw [Real.rpow_neg_one, ← Real.rpow_add]
          · linarith
          · exact h
        linarith
      have h₁₁ : 1 / r ^ ((2 : ℝ) / 3) > 0 := by
        apply div_pos
        norm_num
        exact h₁₀
      linarith
    nlinarith only [sq_nonneg (r ^ ((2 : ℝ) / 3) - 1 / r ^ ((2 : ℝ) / 3)), h₅]
  have h₁₀ : r ^ ((4 : ℝ) / 3) + 1 / r ^ ((4 : ℝ) / 3) = 3 := by
    have h₁₁ : r ^ ((4 : ℝ) / 3) + 1 / r ^ ((4 : ℝ) / 3) > 0 := by
      -- The proof is similar to the one for $r + \frac{1}{r} > 0$.
      have h₁₂ : r ^ ((4 : ℝ) / 3) > 0 := by
        apply Real.rpow_pos_of_pos
        by_contra h
        have : r ≤ 0 := by linarith
        have : r < 0 := by linarith
        have : ¬ r ^ ((4 : ℝ) / 3) ≥ 0 := by
          suffices r ^ (1 : ℝ) < r ^ ((4 : ℝ) / 3) by
            nlinarith
          suffices 0 < r ^ ((4 : ℝ) / 3 - 1) by
            nlinarith
          rw [show ((4 : ℝ) / 3 - 1) = (1 : ℝ) / 3 by ring]
          rw [Real.rpow_one, ← Real.rpow_add]
          · linarith
          · exact h
        linarith
      have h₁₃ : 1 / r ^ ((4 : ℝ) / 3) > 0 := by
        apply div_pos
        norm_num
        exact h₁₂
      linarith
    nlinarith only [sq_nonneg (r ^ ((4 : ℝ) / 3) - 1 / r ^ ((4 : ℝ) / 3)), h₆]

  -- Now we can get the value of $r^3 + \frac{1}{r^3}$.
  rw [h₇, h₃, h₈, h₁₀]
  norm_num

```