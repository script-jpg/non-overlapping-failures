-- prove a + b + c ≥ 3
  have h₂ : a + b + c ≥ 3 := by
    -- we have
    -- (a + b + c) ^ 2 ≥ 3(ab + bc + ca)
    -- by Cauchy-Schwarz.
    have h₂ : (a + b + c) ^ 2 ≥ 3 * (a * b + b * c + c * a) := by
      nlinarith [sq_nonneg (a - b), sq_nonneg (b - c), sq_nonneg (c - a)]
    -- we also have
    -- (a + b + c) ^ 2 ≥ 3(a + b + c)
    -- by AM-GM.
    have h₃ : (a + b + c) ^ 2 ≥ 3 * (a + b + c) := by
      nlinarith [sq_nonneg (a - 1), sq_nonneg (b - 1), sq_nonneg (c - 1),
        Real.sq_sqrt (show 0 ≤ a by linarith [h₀.left]), Real.sq_sqrt (show 0 ≤ b by linarith [h₀.right.left]),
        Real.sq_sqrt (show 0 ≤ c by linarith [h₀.right.right])]
    nlinarith

  -- prove a + b + c ≤ ab + bc + ca
  have h₃ : a + b + c ≤ a * b + b * c + c * a := by
    nlinarith

  -- prove 1 / √(a + b) + 1 / √(b + c) + 1 / √(c + a) ≤ 3 / √((a + b + c) / 2)
  have h₄ : 1 / Real.sqrt (a + b) + 1 / Real.sqrt (b + c) + 1 / Real.sqrt (c + a) ≤ 3 / Real.sqrt ((a + b + c) / 2) := by
    -- by Cauchy-Schwarz, (f(x) + f(y) + f(z)) ^ 2 ≤ 3(f(x ^ 2) + f(y ^ 2) + f(z ^ 2))
    -- where f(x) = 1 / √x
    have h₄ : (1 / Real.sqrt (a + b) + 1 / Real.sqrt (b + c) + 1 / Real.sqrt (c + a)) ^ 2 ≤ 3 * (1 / (a + b) + 1 / (b + c) + 1 / (c + a)) := by
      conv =>
        lhs
        rw [← @mul_pow (Real.sqrt (a + b)) (1 / (a + b)) 2, ← @mul_pow (Real.sqrt (b + c)) (1 / (b + c)) 2, ← @mul_pow (Real.sqrt (c + a)) (1 / (c + a)) 2]
      conv =>
        rhs
        rw [mul_pow, mul_pow]
      field_simp
      ring_nf
      -- we have
      -- 1 / (a + b) + 1 / (b + c) + 1 / (c + a) ≤ 3 / 2((a + b + c) / 2)
      -- by Cauchy-Schwarz.
      have h₅ : 1 / (a + b) + 1 / (b + c) + 1 / (c + a) ≤ 3 / (2 * ((a + b + c) / 2)) := by
        -- we have
        -- 1 / (a + b) + 1 / (b + c) + 1 / (c + a) ≤ 3 / 2((a + b + c) / 2)
        -- by AM-GM.
        have h₅ : 1 / (a + b) + 1 / (b + c) + 1 / (c + a) ≤ 3 / (2 * ((a + b + c) / 2)) := by
          -- (a + b + c) ^ 2 ≥ 3(a + b + c)
          -- by AM-GM.
          have h₆ : (a + b + c) ^ 2 ≥ 3 * (a + b + c) := by
            nlinarith [sq_nonneg (a - 1), sq_nonneg (b - 1), sq_nonneg (c - 1),
              Real.sq_sqrt (show 0 ≤ a by linarith [h₀.left]), Real.sq_sqrt (show 0 ≤ b by linarith [h₀.right.left]),
              Real.sq_sqrt (show 0 ≤ c by linarith [h₀.right.right])]
          -- 1 / (a + b) + 1 / (b + c) + 1 / (c + a) ≤ 3 / 2((a + b + c) / 2)
          -- by Cauchy-Schwarz.
          have h₇ : 1 / (a + b) + 1 / (b + c) + 1 / (c + a) ≤ 3 / (2 * ((a + b + c) / 2)) := by
            have h₇ : ((a + b) + (b + c) + (c + a)) ^ 2 ≥ 9 * ((a + b + c) / 2) := by
              -- ((a + b) + (b + c) + (c + a)) ^ 2 = 9((a + b + c) / 2) + 2((a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2)
              have h₇ : ((a + b) + (b + c) + (c + a)) ^ 2 = 9 * ((a + b + c) / 2) + 2 * ((a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2) := by
                ring_nf
              have h₈ : 2 * ((a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2) ≥ 0 := by
                nlinarith [sq_nonneg (a - b), sq_nonneg (b - c), sq_nonneg (c - a)]
              linarith
            have h₈ : (a + b + c) / 2 > 0 := by
              linarith [h₀.left, h₀.right.left, h₀.right.right]
            replace h₇ : ((a + b) + (b + c) + (c + a)) ^ 2 ≥ 9 * ((a + b + c) / 2) := by
              linarith
            have h₉ : ((a + b) + (b + c) + (c + a)) / (2 * (a + b + c)) ≥ 3 / (2 * ((a + b + c) / 2)) := by
              -- this is the key inequality.
              -- note that
              -- a + b + c > 0, 3 / 2((a + b + c) / 2) > 0
              have h₉ : ((a + b) + (b + c) + (c + a)) / (2 * (a + b + c)) ≥ 3 / (2 * ((a + b + c) / 2)) := by
                -- ((a + b) + (b + c) + (c + a)) / (2 * (a + b + c)) = √((a + b) + (b + c) + (c + a)) / √(2 * (a + b + c))
                have h₉ : ((a + b) + (b + c) + (c + a)) / (2 * (a + b + c)) = Real.sqrt ((a + b) + (b + c) + (c + a)) / Real.sqrt (2 * (a + b + c)) := by
                  field_simp
                  have h₉ : √(2 * (a + b + c)) ^ 2 = 2 * (a + b + c) := by
                    exact Real.sq_sqrt (by linarith [h₀.left, h₀.right.left, h₀.right.right])
                  nth_rw 1 [← h₉]
                  rw [Real.sqrt_div h₀.left (by linarith [h₀.left, h₀.right.left, h₀.right.right])]
                  congr
                  ring_nf
                  all_goals positivity
                -- 3 / (2 * ((a + b + c) / 2)) = 3 / √(2 * (a + b + c))
                have h₁₀ : 3 / (2 * ((a + b + c) / 2)) = 3 / Real.sqrt (2 * (a + b + c)) := by
                  field_simp
                  congr
                  ring_nf
                  all_goals positivity
                -- so we need to prove √((a + b) + (b + c) + (c + a)) ≥ 3
                rw [h₉, h₁₀]
                have h₁₁ : ((a + b) + (b + c) + (c + a)) ≥ 3 ^ 2 := by
                  have h₁₁ : (a + b + c) ≥ 3 := by
                    -- (a + b + c) ^ 2 ≥ 3(a + b + c)
                    -- by AM-GM.
                    have h₁₁ : (a + b + c) ^ 2 ≥ 3 * (a + b + c) := by
                      nlinarith [sq_nonneg (a - b), sq_nonneg (b - c), sq_nonneg (c - a)]
                    -- (a + b + c) ^ 2 ≥ 3(a + b + c)
                    -- by AM-GM.
                    have h₁₂ : (a + b + c) ^ 2 ≥ (3 * ((a + b + c) / 2)) ^ 2 := by
                      nlinarith [sq_nonneg (a - 1), sq_nonneg (b - 1), sq_nonneg (c - 1),
                        Real.sq_sqrt (show 0 ≤ a by linarith [h₀.left]), Real.sq_sqrt (show 0 ≤ b by linarith [h₀.right.left]),
                        Real.sq_sqrt (show 0 ≤ c by linarith [h₀.right.right])]
                    nlinarith
                  nlinarith
                have h₁₂ : Real.sqrt ((a + b) + (b + c) + (c + a)) ≥ Real.sqrt (3 ^ 2) := by
                  exact Real.sqrt_le_sqrt h₁₁
                have h₁₃ : Real.sqrt (3 ^ 2) = 3 := by
                  exact Real.sqrt_sq (by positivity)
                have h₁₄ : Real.sqrt ((a + b) + (b + c) + (c + a)) ≥ 3 := by
                  rw [h₁₃] at h₁₂
                  exact h₁₂
                have h₁₅ : Real.sqrt ((a + b) + (b + c) + (c + a)) / Real.sqrt (2 * (a + b + c)) ≥ 3 / Real.sqrt (2 * (a + b + c)) := by
                  apply div_le_div_of_nonneg_right
                  exact h₁₄
                  positivity
                exact h₁₅
              exact h₉
            have h₁₀ : 1 / (a + b) + 1 / (b + c) + 1 / (c + a) = ((a + b) + (b + c) + (c + a)) / (2 * (a + b + c)) := by
              field_simp
              ring
            rw [h₁₀]
            exact h₉
          linarith
        linarith
      linarith
    -- then we can get 1 / √(a + b) + 1 / √(b + c) + 1 / √(c + a) ≤ 3 / √((a + b + c) / 2)
    apply (div_le_iff₀' (by positivity)).mpr
    conv =>
      lhs
      rw [← @mul_pow (Real.sqrt (a + b)) (1 / (a + b)) 2, ← @mul_pow (Real.sqrt (b + c)) (1 / (b + c)) 2, ← @mul_pow (Real.sqrt (c + a)) (1 / (c + a)) 2]
    rw [mul_pow, mul_pow]
    field_simp
    linarith only [h₅]

  -- we have
  -- a / √(a + b) + b / √(b + c) + c / √(c + a) ≥ 3 / √(a + b) + 3 / √(b + c) + 3 / √(c + a)
  -- by Cauchy-Schwarz.
  have h₅ : a / Real.sqrt (a + b) + b / Real.sqrt (b + c) + c / Real.sqrt (c + a) ≥ 3 / Real.sqrt (a + b) + 3 / Real.sqrt (b + c) + 3 / Real.sqrt (c + a) := by
    -- C-S on 1 / √x, 1 / √y, 1 / √z
    have h₅ : a / Real.sqrt (a + b) + b / Real.sqrt (b + c) + c / Real.sqrt (c + a) ≥
        1 / Real.sqrt (a + b) + 1 / Real.sqrt (b + c) + 1 / Real.sqrt (c + a) := by
      have h₁₁ : a / Real.sqrt (a + b) = a * (1 / Real.sqrt (a + b)) := by ring
      have h₁₂ : b / Real.sqrt (b + c) = b * (1 / Real.sqrt (b + c)) := by ring
      have h₁₃ : c / Real.sqrt (c + a) = c * (1 / Real.sqrt (c + a)) := by ring
      -- we have
      -- a * 1 / √(a + b) + b * 1 / √(b + c) + c * 1 / √(c + a) ≥
      -- 1 / √(a + b) + 1 / √(b + c) + 1 / √(c + a)
      -- by Cauchy-Schwarz.
      have h₁₄ : a * (1 / Real.sqrt (a + b)) + b * (1 / Real.sqrt (b + c)) + c * (1 / Real.sqrt (c + a)) ≥
          1 / Real.sqrt (a + b) + 1 / Real.sqrt (b + c) + 1 / Real.sqrt (c + a) := by
        -- a * 1 / √(a + b) + b * 1 / √(b + c) + c * 1 / √(c + a) ≥
        -- 1 / √(a + b) + 1 / √(b + c) + 1 / √(c + a)
        -- by Cauchy-Schwarz.
        have h₁₄ : (a * (1 / Real.sqrt (a + b)) + b * (1 / Real.sqrt (b + c)) + c * (1 / Real.sqrt (c + a))) ^ 2 ≥
            (1 / Real.sqrt (a + b) + 1 / Real.sqrt (b + c) + 1 / Real.sqrt (c + a)) ^ 2 := by
          -- (a * x + b * y + c * z) ^ 2 ≥ (x ^ 2 + y ^ 2 + z ^ 2)(a ^ 2 + b ^ 2 + c ^ 2)
          -- is all we need.
          apply mul_le_mul_of_nonneg_left
          apply pow_two_le_pow_two₀
          have h₁₄ : (1 / Real.sqrt (a + b)) ^ 2 = 1 / (a + b) := by
            field_simp
          have h₁₅ : (1 / Real.sqrt (b + c)) ^ 2 = 1 / (b + c) := by
            field_simp
          have h₁₆ : (1 / Real.sqrt (c + a)) ^ 2 = 1 / (c + a) := by
            field_simp
          rw [h₁₄, h₁₅, h₁₆]
          linarith
          positivity
        nlinarith
      rw [h₁₁, h₁₂, h₁₃]
      linarith
    linarith

  -- obviously, 3 / √(a + b) + 3 / √(b + c) + 3 / √(c + a) ≥ 3 / √((a + b + c) / 2)
  have h₆ : 3 / Real.sqrt (a + b) + 3 / Real.sqrt (b + c) + 3 / Real.sqrt (c + a) ≥ 3 / Real.sqrt ((a + b + c) / 2) := by
    -- we have a + b + c ≤ ab + bc + ca, so (a + b + c) / 2 ≥ (ab + bc + ca) / 2
    -- then √((a + b + c) / 2) ≥ √((ab + bc + ca) / 2)
    have h₆ : Real.sqrt ((a + b + c) / 2) ≥ Real.sqrt ((a * b + b * c + c * a) / 2) := by
      have h₆ : (a + b + c) / 2 ≥ (a * b + b * c + c * a) / 2 := by
        linarith
      exact Real.sqrt_le_sqrt h₆
    -- then 3 / √((a + b + c) / 2) ≤ 3 / √((ab + bc + ca) / 2)
    -- and we already prove 3 / √((