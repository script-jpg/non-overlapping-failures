-- auxiliary lemma : for any positive real numbers x,y, $(x-y)^2 \geq 0$.
  have l_0_1 (x y : ℝ) (h₀ : 0 < x) (h₁ : 0 < y) : (x - y) ^ 2 ≥ 0 := by
    exact sq_nonneg (x - y)

  -- auxilary lemma : for any positive real numbers x,y, $x+y \geq 2\sqrt{xy}$.
  have l_0_2 (x y : ℝ) (h₀ : 0 < x) (h₁ : 0 < y) : x + y ≥ 2 * Real.sqrt (x * y) := by
    have h₂ : 0 ≤ (Real.sqrt x - Real.sqrt y) ^ 2 := by
      exact sq_nonneg (Real.sqrt x - Real.sqrt y)
    rw [sq_sqrt h₀.le, sq_sqrt h₁.le] at h₂
    rw [sub_sq, mul_assoc, ←Real.sqrt_mul h₀.le] at h₂
    linarith

  -- auxilary lemma : for any positive real numbers x,y, $x^2+y^2 \geq 2xy$.
  have l_0_3 (x y : ℝ) (h₀ : 0 < x) (h₁ : 0 < y) : x ^ 2 + y ^ 2 ≥ 2 * x * y := by
    have h₂ : 0 ≤ (x - y) ^ 2 := by
      exact sq_nonneg (x - y)
    linarith

  -- auxilary lemma : for any positive real numbers x,y with $x \geq y$, $x^2 \geq y^2$.
  have l_0_4 (x y : ℝ) (h₀ : 0 < x) (h₁ : 0 < y) (h₂ : y ≤ x) : y ^ 2 ≤ x ^ 2 := by
    have h₃ : 0 ≤ x := by
      linarith
    have h₄ : 0 ≤ y := by
      linarith
    apply sq_le_sq'
    linarith
    linarith

  -- auxilary lemma : for any positive real numbers x,y with $x \geq y$, $x^3 \geq y^3$.
  have l_0_5 (x y : ℝ) (h₀ : 0 < x) (h₁ : 0 < y) (h₂ : y ≤ x) : x ^ 3 ≥ y ^ 3 := by
    have h₃ : y ^ 3 ≤ x ^ 3 := by
      apply pow_le_pow_left₀
      linarith
      linarith
      linarith
    linarith

  -- auxilary lemma : for any positive real numbers x,y with $x \geq y$, $2x^3 \geq x^2 y + xy^2$.
  have l_0_6 (x y : ℝ) (h₀ : 0 < x) (h₁ : 0 < y) (h₂ : y ≤ x) : 2 * x ^ 3 ≥ x ^ 2 * y + x * y ^ 2 := by
    have h₃ : 0 ≤ x := by
      linarith
    have h₄ : 0 ≤ y := by
      linarith
    have h₅ : 0 ≤ x ^ 2 := by
      exact sq_nonneg x
    have h₆ : 0 ≤ y ^ 2 := by
      exact sq_nonneg y
    have h₇ : 0 ≤ x ^ 3 := by
      exact sq_nonneg (x ^ 2) * x
    have h₈ : 0 ≤ y ^ 3 := by
      exact sq_nonneg (y ^ 2) * y
    have h₉ : x ^ 3 ≥ y ^ 3 := by
      exact l_0_5 x y h₀ h₁ h₂
    have h₁₀ : x ^ 2 * y + x * y ^ 2 ≤ 2 * x ^ 3 := by
      have h₁₁ : x ^ 2 * y ≤ x ^ 3 := by
        apply mul_le_mul_of_nonneg_left
        linarith
        exact sq_nonneg x
      have h₁₂ : x * y ^ 2 ≤ x ^ 3 := by
        apply mul_le_mul_of_nonneg_left
        linarith
        exact sq_nonneg y
      linarith
    linarith

  -- auxilary lemma : for any positive real numbers $a,b$, $(a+b)(a^2+b^2) \geq 2(a^3 + b^3)$.
  have l_0_7 (a b : ℝ) (h₀ : 0 < a) (h₁ : 0 < b) : (a + b) * (a ^ 2 + b ^ 2) ≥ 2 * (a ^ 3 + b ^ 3) := by
    have h₂ : 0 < a ^ 3 := by
      exact sq_pos_of_pos h₀ * h₀
    have h₃ : 0 < b ^ 3 := by
      exact sq_pos_of_pos h₁ * h₁
    have h₄ : 0 < a ^ 2 := by
      exact sq_pos_of_pos h₀
    have h₅ : 0 < b ^ 2 := by
      exact sq_pos_of_pos h₁
    have h₆ : a ^ 3 + b ^ 3 ≤ (a + b) * (a ^ 2 + b ^ 2) := by
      have h₇ : a ^ 3 + b ^ 3 ≤ a * b ^ 2 + a ^ 2 * b := by
        have h₈ : a ^ 3 + b ^ 3 ≤ a ^ 2 * a + b ^ 2 * b := by
          linarith
        have h₉ : a * b ^ 2 + a ^ 2 * b ≤ a ^ 2 * a + b ^ 2 * b := by
          have h₁₀ : a * b ^ 2 ≤ a ^ 2 * b := by
            apply mul_le_mul_of_nonneg_left
            linarith
            exact sq_nonneg b
          linarith
        linarith
      have h₈ : a * b ^ 2 + a ^ 2 * b ≤ (a + b) * (a ^ 2 + b ^ 2) := by
        exact l_0_6 a b h₀ h₁ (by linarith)
      linarith
    linarith

  -- auxilary lemma : for any positive real numbers $a,b$, $(a+b)(a^2+b^2) \geq 4\sqrt{ab}^3$.
  have l_0_8 (a b : ℝ) (h₀ : 0 < a) (h₁ : 0 < b) : (a + b) * (a ^ 2 + b ^ 2) ≥ 4 * (a * b) ^ (3 / 2 : ℝ) := by
    have h₂ : 0 < a ^ 3 := by
      exact sq_pos_of_pos h₀ * h₀
    have h₃ : 0 < b ^ 3 := by
      exact sq_pos_of_pos h₁ * h₁
    have h₄ : 0 < a ^ 2 := by
      exact sq_pos_of_pos h₀
    have h₅ : 0 < b ^ 2 := by
      exact sq_pos_of_pos h₁
    have h₆ : 0 ≤ a ^ 3 + b ^ 3 := by
      linarith
    have h₇ : 0 ≤ (a ^ 2 + b ^ 2) := by
      linarith
    have h₈ : (a + b) * (a ^ 2 + b ^ 2) ≥ 2 * (a ^ 3 + b ^ 3) := by
      exact l_0_7 a b h₀ h₁
    have h₉ : 2 * (a ^ 3 + b ^ 3) ≥ 4 * (a * b) ^ (3 / 2 : ℝ) := by
      have h₁₀ : (a * b) ^ (3 / 2 : ℝ) ≤ a ^ 3 + b ^ 3 := by
        have h₁₁ : a * b ≤ a ^ 2 + b ^ 2 := by
          linarith
        have h₁₂ : a * b ^ 2 ≤ a ^ 2 * b := by
          apply mul_le_mul_of_nonneg_left
          linarith
          exact sq_nonneg b
        have h₁₃ : a ^ 2 * b ≤ a ^ 2 * (a ^ 2 + b ^ 2) := by
          apply mul_le_mul_of_nonneg_left
          linarith
          exact sq_nonneg (a ^ 2 + b ^ 2)
        have h₁₄ : a ^ 2 * (a ^ 2 + b ^ 2) ≤ a ^ 3 + b ^ 3 := by
          have h₁₅ : a ^ 3 + b ^ 3 ≥ a ^ 2 * a + b ^ 2 * b := by
            linarith
          have h₁₆ : a ^ 2 * (a ^ 2 + b ^ 2) ≤ a ^ 3 + b ^ 3 := by
            have h₁₇ : a ^ 2 * (a ^ 2 + b ^ 2) ≤ a ^ 2 * a + a ^ 2 * b ^ 2 := by
              apply mul_le_mul_of_nonneg_left
              linarith
              exact sq_nonneg (a ^ 2 + b ^ 2)
            have h₁₈ : a ^ 2 * a + a ^ 2 * b ^ 2 ≤ a ^ 3 + b ^ 3 := by
              have h₁₉ : a ^ 2 * b ^ 2 ≤ b ^ 3 := by
                apply mul_le_mul_of_nonneg_left
                linarith
                exact sq_nonneg b
              linarith
            linarith
          linarith
        linarith
      have h₁₇ : 2 * (a ^ 3 + b ^ 3) ≥ 4 * (a * b) ^ (3 / 2 : ℝ) := by
        have h₁₈ : 2 * (a ^ 3 + b ^ 3) ≥ 2 * ((a * b) ^ (3 / 2 : ℝ)) := by
          linarith
        have h₁₉ : 2 * ((a * b) ^ (3 / 2 : ℝ)) ≥ 4 * (a * b) ^ (3 / 2 : ℝ) := by
          have h₂₀ : 0 ≤ (a * b) ^ (3 / 2 : ℝ) := by
            exact pow_nonneg (mul_nonneg (le_of_lt h₀) (le_of_lt h₁)) (3 / 2)
          linarith
        linarith
      linarith
    linarith

  -- auxilary lemma : for any positive real numbers $a,b$, $(a+b)(a^2+b^2) \geq 4\sqrt{ab}^3$.
  have l_0_9 (a b : ℝ) (h₀ : 0 < a) (h₁ : 0 < b) : (a + b) * (a ^ 2 + b ^ 2) ≥ 4 * (a * b) ^ (3 / 2 : ℝ) := by
    have h₂ : 0 < a ^ 3 := by
      exact sq_pos_of_pos h₀ * h₀
    have h₃ : 0 < b ^ 3 := by
      exact sq_pos_of_pos h₁ * h₁
    have h₄ : 0 < a ^ 2 := by
      exact sq_pos_of_pos h₀
    have h₅ : 0 < b ^ 2 := by
      exact sq_pos_of_pos h₁
    have h₆ : 0 ≤ a ^ 3 + b ^ 3 := by
      linarith
    have h₇ : 0 ≤ (a ^ 2 + b ^ 2) := by
      linarith
    have h₈ : (a + b) * (a ^ 2 + b ^ 2) ≥ 2 * (a ^ 3 + b ^ 3) := by
      have h₉ : a ^ 3 + b ^ 3 ≤ (a + b) * (a ^ 2 + b ^ 2) := by
        linarith
      linarith
    have h₉ : 2 * (a ^ 3 + b ^ 3) ≥ 4 * (a * b) ^ (3 / 2 : ℝ) := by
      have h₁₀ : (a * b) ^ (3 / 2 : ℝ) ≤ a ^ 3 + b ^ 3 := by
        have h₁₁ : a * b ≤ a ^ 2 + b ^ 2 := by
          linarith
        have h₁₂ : a * b ^ 2 ≤ a ^ 2 * b := by
          apply mul_le_mul_of_nonneg_left
          linarith
          exact sq_nonneg b
        have h₁₃ : a ^ 2 * b ≤ a ^ 2 * (a ^ 2 + b ^ 2) := by
          apply mul_le_mul_of_nonneg_left
          linarith
          exact sq_nonneg (a ^ 2 + b ^ 2)
        have h₁₄ : a ^ 2 * (a ^ 2 + b ^ 2) ≤ a ^ 3 + b ^ 3 := by
          have h₁₅ : a ^ 3 + b ^ 3 ≥ a ^ 2 * a + b ^ 2 * b := by
            linarith
          have h₁₆ : a ^ 2 * (a ^ 2 + b ^ 2) ≤ a ^ 3 + b ^ 3 := by
            have h₁₇ : a ^ 2 * (a ^ 2 + b ^ 2) ≤ a ^ 2 * a + a ^ 2 * b ^ 2 := by
              apply mul_le_mul_of_nonneg_left
              linarith
              exact sq_nonneg (a ^ 2 + b ^ 2)
            have h₁₈ : a ^ 2 * a + a ^ 2 * b ^ 2 ≤ a ^ 3 + b ^ 3 := by
              have h₁₉ : a ^ 2 * b ^ 2 ≤ b ^ 3 := by
                apply mul_le_mul_of_nonneg_left
                linarith
                exact sq_nonneg b
              linarith
            linarith
          linarith
        linarith
      have h₁₇ : 2 * (a ^ 3 + b ^ 3) ≥ 4 * (a * b) ^ (3 / 2 : ℝ) := by
        have h₁₈ : 2 * (a ^ 3 + b ^ 3) ≥ 2 * ((a * b) ^ (3 / 2 : ℝ)) := by
          linarith
        have h₁₉ : 2 * ((a * b) ^ (3 / 2 : ℝ)) ≥ 4 * (a * b) ^ (3 / 2 : ℝ) := by
          have h₂₀ : 0 ≤ (a * b) ^ (3 / 2 : ℝ) := by
            exact pow_nonneg (mul_nonneg (le_of_lt h₀) (le_of_lt h₁)) (3 / 2)
          linarith
        linarith
      linarith
    linarith

  -- For positive real numbers a, b, such that $3 \leq ab+bc+ca$, show that $3/\sqrt{2} \leq a/\sqrt{a+b} + b/\sqrt{b+c} + c/\sqrt{c+a}$.
  have main (a b c : ℝ) (h₀ : 0 < a ∧ 0 < b ∧ 0 < c)
      (h₁ : 3 ≤ a * b + b * c + c * a) :
      3 / Real.sqrt 2 ≤ a / Real.sqrt (a + b) + b / Real.sqrt (b + c) + c / Real.sqrt (c + a) := by

    obtain ⟨h₀₁, h₀₂, h₀₃⟩ := h₀

    -- We prove that $3/\sqrt{2} \leq \sum a/\sqrt{a+b} $ by proving $3^2 / 2 \leq \sum a^2 / (a+b) $.
    have h₁' : (3 : ℝ) ^ 2 / 2 ≤ a ^ 2 / (a + b) + b ^ 2 / (b + c) + c ^ 2 / (c + a) := by

      -- Prove $a ^ 3 ≥ (a ^ 2 + b ^ 2) (2 a b - c ^ 2)$.
      have h₂ : ∀ a b c : ℝ, 0 < a → 0 < b → 0 < c → a ^ 3 ≥ (a ^ 2 + b ^ 2) * (2 * a * b - c ^ 2) := by
        intro a b c h₀ h₁ h₂
        have h₃ : 0 < a ^ 2 := by
          exact sq_pos_of_pos h₀
        have h₄ : 0 < b ^ 2 := by
          exact sq_pos_of_pos h₁
        have h₅ : 0 < a ^ 2 + b ^ 2 := by
          linarith
        have h₆ : 2 * a * b - c ^ 2 ≥ 0 := by
          linarith
        have h₇ : (a ^ 2 + b ^ 2) * (2 * a * b - c ^ 2) ≤ a ^ 3 + b ^ 3 := by
          have h₈ : (a ^ 2 + b ^ 2) * (2 * a * b - c ^ 2) ≤ a * (a ^ 2