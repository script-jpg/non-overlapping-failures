have ha := h₀.1
  have hb := h₀.2.1
  have hc := h₀.2.2.1
  have hd := h₀.2.2.2

  have ha_odd := h₁.1
  have hb_odd := h₁.2.1
  have hc_odd := h₁.2.2.1
  have hd_odd := h₁.2.2.2

  have hab := h₂.1
  have hbc := h₂.2.1
  have hcd := h₂.2.2

  have h₆ : d < 2 ^ k := by
    rw [← h₄]
    nlinarith

  have h₇ : c < 2 ^ m := by
    rw [← h₅]
    nlinarith

  have h₈ : a * d < d * d := by
    nlinarith

  have h₉ : a < d := by
    apply (Nat.lt_mul_iff_one_lt_right hd).mp
    nlinarith

  have h₁₀ : a * d > a * a := by
    nlinarith

  have h₁₁ : a < d := by
    apply (Nat.lt_mul_iff_one_lt_left ha).mp
    nlinarith

  have h₁₂ : a * d + b * c = d * d := by
    ring_nf
    linarith

  have h₁₃ : a * d + b * c > a * a + a * c := by
    linarith

  have h₁₄ : a * d + b * c < d * d + c * d := by
    linarith

  have h₁₅ : a * a + a * c < d * d + c * d := by
    linarith

  have h₁₆ : a * a < d * d := by
    apply Nat.mul_lt_mul_of_le_of_lt
   . exact Nat.le_of_lt_succ h₁₁
   . exact Nat.lt_of_succ_le h₁₄

  have h₁₇ : a < d := by
    apply (Nat.lt_mul_iff_one_lt_right hd).mp
    nlinarith

  -- Prove that $a$ is not $3$ or $5$, or else $d$ would be even - a contradiction.

  have h₁₈ : ¬ (a = 3 ∨ a = 5) := by
    by_contra! h
    rcases h with h | h
    -- Suppose $a=3$.
    · have h₈ : 3 * d < d * d := by
        nlinarith
      have h₉ : 3 < d := by
        apply (Nat.lt_mul_iff_one_lt_right hd).mp
        nlinarith
      have h₁₀ : 3 * d > 3 * 3 := by
        nlinarith
      have h₁₁ : 3 < d := by
        apply (Nat.lt_mul_iff_one_lt_left ha).mp
        nlinarith
      have h₁₂ : 3 * d + b * c = d * d := by
        ring_nf
        linarith
      have h₁₃ : 3 * d + b * c > 3 * 3 + 3 * c := by
        linarith
      have h₁₄ : 3 * d + b * c < d * d + c * d := by
        linarith
      have h₁₅ : 3 * 3 + 3 * c < d * d + c * d := by
        linarith
      have h₁₆ : 3 * 3 < d * d := by
        apply Nat.mul_lt_mul_of_le_of_lt
       . exact Nat.le_of_lt_succ h₉
       . exact Nat.lt_of_succ_le h₁₄
      have h₁₇ : 3 < d := by
        apply (Nat.lt_mul_iff_one_lt_right hd).mp
        nlinarith
      -- So $b+c$ is greater than $3$.
      have h₁₈ : b + c > 3 := by
        omega
      linarith

    -- Suppose $a=5$.
    · have h₈ : 5 * d < d * d := by
        nlinarith
      have h₉ : 5 < d := by
        apply (Nat.lt_mul_iff_one_lt_right hd).mp
        nlinarith
      have h₁₀ : 5 * d > 5 * 5 := by
        nlinarith
      have h₁₁ : 5 < d := by
        apply (Nat.lt_mul_iff_one_lt_left ha).mp
        nlinarith
      have h₁₂ : 5 * d + b * c = d * d := by
        ring_nf
        linarith
      have h₁₃ : 5 * d + b * c > 5 * 5 + 5 * c := by
        linarith
      have h₁₄ : 5 * d + b * c < d * d + c * d := by
        linarith
      have h₁₅ : 5 * 5 + 5 * c < d * d + c * d := by
        linarith
      have h₁₆ : 5 * 5 < d * d := by
        apply Nat.mul_lt_mul_of_le_of_lt
       . exact Nat.le_of_lt_succ h₉
       . exact Nat.lt_of_succ_le h₁₄
      have h₁₇ : 5 < d := by
        apply (Nat.lt_mul_iff_one_lt_right hd).mp
        nlinarith
      -- So $b+c$ is greater than $5$.
      have h₁₈ : b + c > 5 := by
        omega
      linarith

  -- Prove that $a$ is not $11$ or $13$, or else $d$ would be divisible by $4$ - a contradiction.

  have h₁₉ : ¬ (a = 11 ∨ a = 13) := by
    by_contra! h
    rcases h with h | h
    -- Suppose $a=11$.
    · have h₈ : 11 * d < d * d := by
        nlinarith
      have h₉ : 11 < d := by
        apply (Nat.lt_mul_iff_one_lt_right hd).mp
        nlinarith
      have h₁₀ : 11 * d > 11 * 11 := by
        nlinarith
      have h₁₁ : 11 < d := by
        apply (Nat.lt_mul_iff_one_lt_left ha).mp
        nlinarith
      have h₁₂ : 11 * d + b * c = d * d := by
        ring_nf
        linarith
      have h₁₃ : 11 * d + b * c > 11 * 11 + 11 * c := by
        linarith
      have h₁₄ : 11 * d + b * c < d * d + c * d := by
        linarith
      have h₁₅ : 11 * 11 + 11 * c < d * d + c * d := by
        linarith
      have h₁₆ : 11 * 11 < d * d := by
        apply Nat.mul_lt_mul_of_le_of_lt
       . exact Nat.le_of_lt_succ h₉
       . exact Nat.lt_of_succ_le h₁₄
      have h₁₇ : 11 < d := by
        apply (Nat.lt_mul_iff_one_lt_right hd).mp
        nlinarith
      -- So $b+c$ is greater than $11$.
      have h₁₈ : b + c > 11 := by
        omega
      have t : b + c = 12 ∨ b + c = 16 ∨ b + c = 20 ∨ b + c = 24 ∨ b + c = 28 ∨ b + c = 32 := by
        omega
      rcases t with t | t | t | t | t | t
      -- If $b+c=12$, then $d$ is divisible by $4$ - a contradiction.
      · have h₈ : d = 12 := by
          linarith
        omega
      -- If $b+c=16$, then $d$ is divisible by $4$ - a contradiction.
      · have h₈ : d = 16 := by
          linarith
        omega
      -- If $b+c=20$, then $d$ is divisible by $4$ - a contradiction.
      · have h₈ : d = 20 := by
          linarith
        omega
      -- If $b+c=24$, then $d$ is divisible by $4$ - a contradiction.
      · have h₈ : d = 24 := by
          linarith
        omega
      -- If $b+c=28$, then $d$ is divisible by $4$ - a contradiction.
      · have h₈ : d = 28 := by
          linarith
        omega
      -- If $b+c=32$, then $d$ is divisible by $4$ - a contradiction.
      · have h₈ : d = 32 := by
          linarith
        omega

  have h₁₂ : 1 = 1 := by
    rfl

  -- Since $a$ is not $3$, $5$, $11$ or $13$, it must be $1$.

  have h₁₃ : 1 = a := by
    by_contra! h
    rcases lt_or_gt_of_ne h with h | h
    -- Suppose $1<a$, then $a=3$ or $a=5$.
    · have h₈ : a = 3 ∨ a = 5 := by
        omega
      absurd h₈
      exact h₁₈ h
    -- Suppose $a<1$, then $a$ is $0$.
    · have h₈ : a = 0 := by
        omega
      linarith

  exact h₁₂.trans h₁₃.symm

```