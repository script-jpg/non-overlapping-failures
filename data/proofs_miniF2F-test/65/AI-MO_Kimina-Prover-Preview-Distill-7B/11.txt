-- The `amc12b_2021_p9` theorem states that the given expression equals 2.
  -- The expression is $\frac{\log_2 80}{\log_{40}2}-\frac{\log_2 160}{\log_{20}2}$

  -- Change the base of $\log_2 80$ to $\log_{40}2$.
  have h1: Real.log 80 / Real.log 2 / (Real.log 2 / Real.log 40) =
    Real.log 80 / Real.log 40 := by
    -- Using the change of base formula $\log_a b = \frac{\log_c b}{\log_c a}$, we have:
    calc
      _ = Real.log 80 / Real.log 2 / (Real.log 2 / Real.log 40) := by rfl
      _ = Real.log 80 / (Real.log 2 / Real.log 40) := by
        simp [div_eq_mul_inv, ← mul_div_assoc]
      _ = Real.log 80 / Real.log 40 := by
        simp [div_eq_mul_inv, ← mul_div_assoc]

  -- Change the base of $\log_2 160$ to $\log_{20}2$.
  have h2: Real.log 160 / Real.log 2 / (Real.log 2 / Real.log 20) =
    Real.log 160 / Real.log 20 := by
    -- Using the same approach as above:
    calc
      _ = Real.log 160 / Real.log 2 / (Real.log 2 / Real.log 20) := by rfl
      _ = Real.log 160 / (Real.log 2 / Real.log 20) := by
        simp [div_eq_mul_inv, ← mul_div_assoc]
      _ = Real.log 160 / Real.log 20 := by
        simp [div_eq_mul_inv, ← mul_div_assoc]

  -- The expression simplifies to $\log_{40} 80 - \log_{20} 160$.
  calc
    _ = Real.log 80 / Real.log 40 - Real.log 160 / Real.log 20 := by rw [h1, h2]
    _ = Real.log 80 / Real.log 40 - Real.log 160 / Real.log 20 := by rfl
    _ = 2 := by
      -- Using the property $\log_a b = \frac{\log_c b}{\log_c a}$ with $c = 10$:
      have h3: Real.log 80 / Real.log 40 = Real.log 80 / Real.log 40 := rfl
      have h4: Real.log 160 / Real.log 20 = Real.log 160 / Real.log 20 := rfl
      -- Using the property $\log (a^b) = b \cdot \log a$:
      have h5: Real.log 80 = Real.log (2^4 * 5) := by norm_num
      have h6: Real.log 40 = Real.log (2^3 * 5) := by norm_num
      have h7: Real.log 160 = Real.log (2^5 * 5) := by norm_num
      have h8: Real.log 20 = Real.log (2^2 * 5) := by norm_num
      -- Using the properties $\log (a \cdot b) = \log a + \log b$ and $\log (a^b) = b \cdot \log a$:
      have h9: Real.log (2^4 * 5) = 4 * Real.log 2 + Real.log 5 := by
        rw [Real.log_mul (by positivity) (by positivity)]
        norm_num
      have h10: Real.log (2^3 * 5) = 3 * Real.log 2 + Real.log 5 := by
        rw [Real.log_mul (by positivity) (by positivity)]
        norm_num
      have h11: Real.log (2^5 * 5) = 5 * Real.log 2 + Real.log 5 := by
        rw [Real.log_mul (by positivity) (by positivity)]
        norm_num
      have h12: Real.log (2^2 * 5) = 2 * Real.log 2 + Real.log 5 := by
        rw [Real.log_mul (by positivity) (by positivity)]
        norm_num
      -- Using the above identities to simplify $\log_{40} 80 - \log_{20} 160$:
      rw [h5, h6, h7, h8, h9, h10, h11, h12]
      simp [show 4 * Real.log 2 + Real.log 5 - (3 * Real.log 2 + Real.log 5) = Real.log 2 by ring]
      simp [show 5 * Real.log 2 + Real.log 5 - (2 * Real.log 2 + Real.log 5) = 3 * Real.log 2 by ring]
      -- We get $2$ after cancelling the terms.
      ring
```