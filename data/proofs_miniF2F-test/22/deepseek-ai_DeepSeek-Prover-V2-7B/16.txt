norm_num [Finset.sum_range_succ, Finset.sum_range_one] at h₀ ⊢
  have h₁ : a 100 ^ 2 * a 1 ≤ a 100 ^ 2 * 1 := by
    exact mul_le_mul_of_nonneg_left (by exact_mod_cast NNReal.coe_le_coe.mpr (by norm_num)) (by positivity)
  have h₂ : a 100 ^ 2 * a 1 ≤ a 100 ^ 2 := by
    exact le_trans h₁ (by simp [sq])
  have h₃ : (∑ x in Finset.range 99, a (x + 1) ^ 2 * a (x + 2)) ≤ (∑ x in Finset.range 99, a (x + 1) ^ 2) := by
    apply Finset.sum_le_sum
    intro i hi
    have h₄ : a (i + 1) ^ 2 * a (i + 2) ≤ a (i + 1) ^ 2 := by
      exact mul_le_of_le_one_right (by positivity) (by
        have h₅ : a (i + 2) ≤ 1 := by
          have h₆ : (∑ x in Finset.range 100, a (x + 1) ^ 2) = 1 := h₀
          have h₇ : a (i + 2) ^ 2 ≤ 1 := by
            calc
              a (i + 2) ^ 2 ≤ ∑ x in Finset.range 100, a (x + 1) ^ 2 := by
                exact Finset.single_le_sum (fun j _ => sq_nonneg (a (j + 1))) (by
                  simp_all [Finset.mem_range]
                  <;> omega)
              _ = 1 := h₆
          exact by
            simpa [sq] using h₇
        simpa [sq] using h₅)
    simpa [sq] using h₄
  nlinarith [sq_nonneg (a 100), sq_nonneg (a 1), sq_nonneg (a 100 - a 1)]

theorem imosl_2007_algebra_p6_2 (a : ℕ → NNReal) (h₀ : (∑ x in Finset.range 100, a (x + 1) ^ 2) = 1) :
    (∑ x in Finset.range 99, a (x + 1) ^ 2 * a (x + 2)) + a 100 ^ 2 * a 1 < 12 / 25 := by
  norm_num [Finset.sum_range_succ, Finset.sum_range_one] at h₀ ⊢
  have h₁ : a 100 ^ 2 * a 1 ≤ a 100 ^ 2 * 1 := by
    exact mul_le_mul_of_nonneg_left (by exact_mod_cast NNReal.coe_le_coe.mpr (by norm_num)) (by positivity)
  have h₂ : a 100 ^ 2 * a 1 ≤ a 100 ^ 2 := by
    exact le_trans h₁ (by simp [sq])
  have h₃ : (∑ x in Finset.range 99, a (x + 1) ^ 2 * a (x + 2)) ≤ (∑ x in Finset.range 99, a (x + 1) ^ 2) := by
    apply Finset.sum_le_sum
    intro i hi
    have h₄ : a (i + 1) ^ 2 * a (i + 2) ≤ a (i + 1) ^ 2 := by
      exact mul_le_of_le_one_right (by positivity) (by
        have h₅ : a (i + 2) ≤ 1 := by
          have h₆ : (∑ x in Finset.range 100, a (x + 1) ^ 2) =