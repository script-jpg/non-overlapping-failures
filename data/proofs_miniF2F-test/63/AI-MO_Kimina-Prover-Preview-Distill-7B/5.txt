-- we get an equation with a^2 as subject and b*a^-2 as coefficients
  have h₃ : b * a ^ (-2 : ℤ) = 9 := by
    calc
      _ = (a ^ 2) ^ (-1 : ℤ) * (54 / a ^ 2) * (a ^ 2) ^ (-1 : ℤ) := by
        -- specialize to our case the formula for the product of two geometric sequences
        -- (left sequence: 6, a, b; right sequence: 1/b, a, 54)
        --  a * a = sqrt(6 * b) * sqrt(54 / b)
        ring_nf
        simp
        ring_nf
      _ = _ := by
        rw [zpow_neg_one, zpow_ofNat]
        field_simp
        rw [eq_div_iff]
        ring_nf
        rw [mul_assoc, mul_assoc, h₁, h₂]
        ring_nf
        calc
          _ = a * a := by ring
          _ = _ := by ring

  -- we need to solve for a
  -- 1. a^2 = 6b (from first sequence)
  -- 2. a^2 = 54/b (from second sequence)
  -- 3. b * a^(-2) = 9 (from combination of the two sequences)
  clear h₃
  -- 3. => b = 9 * a^2 / 9 = a^2
  have h₃ : b = a ^ 2 := by field_simp at h₃; nlinarith

  -- 1. and 2. => 6b = 54 / b
  -- => b^2 = 9
  -- => b = 3 (since b is positive)
  -- => a^2 = 6b = 18
  -- => a = 3*sqrt(2)
  suffices : a = 3 * √2
  clear * - this
  rw [← eq_div_iff]
  rw [mul_pow, Real.sq_sqrt (by norm_num)]
  ring_nf
  rw [Real.sqrt_div (by norm_num), Real.sqrt_mul (by norm_num)]
  ring_nf
  rw [Real.sqrt_sq (by positivity)]
  ring_nf

```