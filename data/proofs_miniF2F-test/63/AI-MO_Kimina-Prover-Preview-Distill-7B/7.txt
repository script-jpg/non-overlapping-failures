-- We prove that $b = 3 \sqrt{2}$. This is Problem 8 of the U.S. A.M.\'s
  -- 8th Кор00理mпиA.
  have : b = 3 * NNReal.sqrt 2 := by
    -- We shall use the Ptolemy's Theorem.
    have Ptolemy_ineq: b ^ 2 ≤ 18 := by
      calc
        _ = a ^ 2 * b / 6 := by field_simp; linarith
        _ = (3 * b + b * b - 3 * a) * b / 6 := by rw [← h₁]; ring
        _ = b / 6 * ((3 + b - 3 * a / b) * b) := by group
        _ = b / 6 * (3 * b + b ^ 2 - 3 * a) := by rw [mul_div_cancel_of_invertible]
        _ = b / 6 * (3 * b + b ^ 2 - 3 * a / b * b) := by group
        _ = b / 6 * (3 * b + b ^ 2 - 18) := by rw [← mul_div_assoc, h₂]; simp [b.ne.symm]
        _ = 18 * (b / 6) * (b / 6 - 1) := by ring
        _ ≤ 18 := by
          have : 0 ≤ (b / 6 - 1) := by
            calc
              _ = b ^ 2 / 6 - 6 / 6 := by field_simp; linarith
              _ = (b ^ 2 - 6) / 6 := by simp
              _ = a ^ 2 / 6 - 6 / 6 := by rw [← h₁]
              _ = (a / 3 - 2) * (a / 3 + 2) / 6 := by ring
              _ ≥ 0 := by
                have : 0 ≤ a / 3 + 2 := by linarith
                have : 0 ≤ a / 3 - 2 ∨ a / 3 + 2 ≤ 0 := by apply Or.inl; linarith
                rcases this with h | h
                · have : 0 ≤ (a / 3 - 2) * (a / 3 + 2) := by apply mul_nonneg; linarith; assumption
                  linarith
                · linarith
          apply mul_nonneg
          · apply div_nonneg
            linarith
            linarith
          · linarith

    have Ptolemy_eq: b ^ 2 = 18 := by
      calc
        _ = b ^ 2 - 18 + 18 := by group
        _ = (a ^ 2 * b / 6 - 18) + 18 := by group; rw [← h₁]
        _ = (3 * b + b * b - 3 * a) * b / 6 + 18 := by rw [← h₁]; ring
        _ = b / 6 * (3 * b + b * b - 3 * a) + 18 := by rw [mul_div_cancel_of_invertible]
        _ = b / 6 * (3 * b + b ^ 2 - 3 * a / b) + 18 := by group
        _ = b / 6 * (3 * b + b ^ 2 - 18) + 18 := by rw [← mul_div_assoc, h₂]; simp [b.ne.symm]
        _ = 18 * (b / 6) * (b / 6 - 1) + 18 := by ring
        _ = 18 := by
          rw [mul_sub, mul_assoc]
          apply eq_add_of_sub_eq
          calc
            _ = (b / 6 * (1 - b / 6)) * 18 := by ring
            _ = ((1 - b / 6) * b / 6) * 18 := by ring
            _ = ((1 - b / 6) * (b - 6)) / 6 * 18 := by field_simp; linarith
            _ = ((1 - b / 6) * (b - 6)) * 3 := by group
            _ = ((b - 6) - (b - 6) / 6 * 6) * 3 := by rw [mul_sub, ← div_mul, div_self]; linarith
            _ = ((b - 6) - (b - 6)) * 3 := by linarith
            _ = 0 := by simp
          linarith

    apply eq_of_le_of_eq Ptolemy_ineq Ptolemy_eq

  -- We solve for $a$.
  calc
    _ = √(6 * b) := by rw [h₁]; field_simp
    _ = √(6 * (3 * NNReal.sqrt 2)) := by rw [this]
    _ = 3 * NNReal.sqrt 2 := by
      rw [sqrt_mul, sqrt_mul, sqrt_eq_rpow, ← rpow_mul (by linarith)]
      norm_num
      rw [sqrt_eq_rpow, ← rpow_mul (by norm_num)]
      norm_num
      rw [← eq_sub_iff_add_eq']
      norm_num
      rw [← rpow_natCast, ← rpow_mul (by norm_num)]
      simp

```