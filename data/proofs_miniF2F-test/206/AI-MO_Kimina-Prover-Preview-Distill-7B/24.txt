-- We will show that $f$ is periodic with period $2a$.
  use 2 * a
  constructor
  · -- $2a$ is positive because $a$ is positive.
    linarith only [h₀]
  · -- It remains to show that $\forall x \in \mathbb{R}, f(x+2a)=f(x)$.
    intro x

    -- A straightforward calculation shows that $f(x+4a)=1-f(x+2a)$.
    have h₂ : f (x + 2 * a) = 1 - f (x + a) := by
      calc
        f (x + 2 * a) = 1 / 2 + Real.sqrt (f (x + a) - f (x + a) ^ 2) := by
          rw [show x + 2 * a = (x + a) + a by ring]
          exact h₁ (x + a)
        _ = 1 - (1 / 2 + Real.sqrt (f x - f x ^ 2)) := by
          ring_nf
          rw [add_sub_cancel_right]
        _ = 1 - f (x + a) := by
          rw [h₁ x]
    replace h₂ : f (x + 2 * a) = 1 - f (x + a) := by
      linarith only [h₂]

    -- Replacing $x$ by $x+a$ in the above equation, we get $f(x+3a)=1-f(x+2a)$.
    have h₃ : f (x + 3 * a) = 1 - f (x + 2 * a) := by
      calc
        f (x + 3 * a) = 1 / 2 + Real.sqrt (f (x + 2 * a) - f (x + 2 * a) ^ 2) := by
          rw [show x + 3 * a = (x + 2 * a) + a by ring]
          exact h₁ (x + 2 * a)
        _ = 1 - (1 / 2 + Real.sqrt (f (x + a) - f (x + a) ^ 2)) := by
          rw [h₂]
          ring_nf
          rw [add_sub_cancel_right]
        _ = 1 - f (x + 2 * a) := by
          rw [h₁ x]
    replace h₃ : f (x + 3 * a) = 1 - f (x + 2 * a) := by
      linarith only [h₃]

    -- We get $f(x+4a)=f(x)$.
    have h₄ : f (x + 4 * a) = f x := by
      calc
        f (x + 4 * a) = 1 / 2 + Real.sqrt (f (x + 3 * a) - f (x + 3 * a) ^ 2) := by
          rw [show x + 4 * a = (x + 3 * a) + a by ring]
          exact h₁ (x + 3 * a)
        _ = 1 / 2 + Real.sqrt ((1 - f (x + 2 * a)) - (1 - f (x + 2 * a)) ^ 2) := by
          rw [h₃]
        _ = 1 / 2 + Real.sqrt ((1 - (1 - f (x + a))) - (1 - (1 - f (x + a))) ^ 2) := by
          rw [h₂]
        _ = 1 / 2 + Real.sqrt (f (x + a) - f (x + a) ^ 2) := by
          ring_nf
        _ = f (x + a) := by
          rw [h₁ x]
        _ = f x := by
          rw [h₁ x]
    rw [show x + 2 * a + 2 * a = x + 4 * a by ring]
    exact h₄

```