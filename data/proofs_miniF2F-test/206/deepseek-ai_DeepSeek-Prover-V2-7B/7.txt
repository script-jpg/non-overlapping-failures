use a
  use h₀
  intro x
  have h₂ := h₁ x
  have h₃ := h₁ (x + a)
  have h₄ := h₁ (x + a + a)
  simp at h₂ h₃ h₄
  ring_nf at h₂ h₃ h₄ ⊢
  nlinarith [Real.sqrt_nonneg (f x - f x ^ 2), Real.sq_sqrt (show 0 ≤ f x - f x ^ 2 by
    nlinarith [sq_nonneg (f x - 1 / 2)]), sq_nonneg (f x - 1 / 2), sq_nonneg (Real.sqrt (f x - f x ^ 2) - 1 / 2)]

theorem imo_1968_p5_2 (a : ℝ) (f : ℝ → ℝ) (h₀ : 0 < a)
    (h₁ : ∀ x, f (x + a) = 1 / 2 + Real.sqrt (f x - f x ^ 2)) : ∃ b > 0, ∀ x, f (x + b) = f x := by
  use a
  use h₀
  intro x
  have h₂ := h₁ x
  have h₃ := h₁ (x + a)
  have h₄ := h₁ (x + a + a)
  simp at h₂ h₃ h₄
  ring_nf at h₂ h₃ h₄ ⊢
  nlinarith [Real.sqrt_nonneg (f x - f x ^ 2), Real.sq_sqrt (show 0 ≤ f x - f x ^ 2 by
    nlinarith [sq_nonneg (f x - 1 / 2)]), sq_nonneg (f x - 1 / 2), sq_nonneg (Real.sqrt (f x - f x ^ 2) - 1 / 2)]

theorem imo_1968_p5_3 (a : ℝ) (f : ℝ → ℝ) (h₀ : 0 < a)
    (h₁ : ∀ x, f (x + a) = 1 / 2 + Real.sqrt (f x - f x ^ 2)) : ∃ b > 0, ∀ x, f (x + b) = f x := by
  use a
  use h₀
  intro x
  have h₂ := h₁ x
  have h₃ := h₁ (x + a)
  have h₄ := h₁ (x + a + a)
  simp at h₂ h₃ h₄
  ring_nf at h₂ h₃ h₄ ⊢
  nlinarith [Real.sqrt_nonneg (f x - f x ^ 2), Real.sq_sqrt (show 0 ≤ f x - f x ^ 2 by
    nlinarith [sq_nonneg (f x - 1 / 2)]), sq_nonneg (f x - 1 / 2), sq_nonneg (Real.sqrt (f x - f x ^ 2) - 1 / 2)]

theorem imo_1968_p5_4 (a : ℝ) (f : ℝ → ℝ) (h₀ : 0 < a)
    (h₁ : ∀ x, f (x + a) = 1 / 2 + Real.sqrt (f x - f x ^ 2)) : ∃ b > 0, ∀ x, f (x + b) = f x := by
  use a
  use h₀
  intro x
  have h₂ := h₁ x
  have h₃ := h₁ (x + a)
  have h₄ := h₁ (x + a + a)
  simp at h₂ h₃ h₄
  ring_nf at h₂ h₃ h₄ ⊢
  nlinarith [Real.sqrt_nonneg (f x - f x ^ 2), Real.sq_sqrt (show 0 ≤ f x - f x ^ 2 by
    nlinarith [sq_nonneg (f x - 1 / 2)]), sq_nonneg (f x - 1 /