-- The condition ensures that f is defined everywhere except at -2.
have h₁ : f 1 = 1 / (1 + 2) := h₀ 1 (by norm_num)
-- So f(1) is 1/3.
have h₂ : f 1 = 1 / 3 := by
  norm_num at h₁
  exact h₁
-- Then f(f(1)) = f(1/3) = 1 / (1/3 + 2) = 1 / (7/3) = 3/7.
rw [h₂]
norm_num [h₀]